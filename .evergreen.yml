
exec_timeout_secs: 10800

pre:
  - command: shell.exec
    params:
      shell: bash
      script: |
        rm -rf "$HOME/.mongodb/mongosh"
post_error_fails_task: true
post:
  - command: shell.exec
    params:
      shell: bash
      script: |
        mkdir -p npm-logs
        tar cvzf npm-logs.tgz npm-logs

        if [ -d "src/tmp/mongodb-runner/logs" ]; then
          tar cvzf mongodb-runner-logs.tgz -C src/tmp/mongodb-runner logs
        else
          echo "Directory src/tmp/logs does not exist. Skipping."
        fi

        if [ -d "$HOME/.mongodb/mongosh" ]; then
          TARGET="$PWD/mongosh-logs.tgz"
          (cd $HOME/.mongodb && tar cvzf "$TARGET" mongosh/*_log)
        else
          echo "Directory ~/.mongodb/mongosh does not exist. Skipping."
        fi
  - command: s3.put
    params:
      aws_key: ${aws_key}
      aws_secret: ${aws_secret}
      local_file: npm-logs.tgz
      remote_file: mongosh/binaries/${revision}/${revision_order_id}/npm-logs-${build_variant}-${task_name}-${task_id}.tgz
      bucket: mciuploads
      permissions: private
      visibility: signed
      content_type: application/x-gzip
  - command: s3.put
    params:
      aws_key: ${aws_key}
      aws_secret: ${aws_secret}
      local_file: mongosh-logs.tgz
      remote_file: mongosh/binaries/${revision}/${revision_order_id}/mongosh-logs-${build_variant}-${task_name}-${task_id}.tgz
      bucket: mciuploads
      permissions: private
      visibility: signed
      content_type: application/x-gzip
      optional: true
  - command: s3.put
    params:
      aws_key: ${aws_key}
      aws_secret: ${aws_secret}
      local_file: mongodb-runner-logs.tgz
      remote_file: mongosh/binaries/${revision}/${revision_order_id}/mongodb-runner-logs-${build_variant}-${task_name}-${task_id}.tgz
      bucket: mciuploads
      permissions: private
      visibility: signed
      content_type: application/x-gzip
      optional: true
  - command: attach.xunit_results
    params:
      file: src/.logs/*.xml


# Functions are any command that can be run.
#
# Current functions:
#   checkout - Checks out the project from git.
#   compile_ts - Installs Node and all dependencies, and run all prepublish scripts.
#   install - Installs Node and all dependencies, and download the result of running all prepublish scripts.
#   check - Performs linter and dependency checks.
#   test - Runs all tests for a specific package.
#   test_vscode - Clones the vscode extension repository and runs its tests.
#   test_connectivity - Runs extra connectivity tests.
#   test_apistrict - Runs shell API and CLI tests with --apiStrict --apiDeprecationErrors.
#   compile_artifact - Compile the release binary.
#   package_artifact - Upload the release binary together with other files to S3.
#   sign_artifact - Get a package file from S3, sign it, put it back into S3.
#   verify_artifact - Verify if the package was successfully signed using Garasign.
#   test_linux_artifact - Test that the built artifact works where we expect it to.
#                         We use this to verify that e.g. the Ubuntu-built release
#                         binary also works on RHEL and Debian.
#   generate_license_and_vulnerability_report - Generates a report of vulnerabilities affecting the bundled application.
#   release_publish - Publishes the npm packages and uploads the tarballs.
functions:
  checkout:
    - command: git.get_project
      type: system
      params:
        directory: src

  checkout_writeable:
    - command: github.generate_token
      params:
        expansion_name: generated_github_token
        owner: mongodb-js
        repo: mongosh
        permissions:
          contents: write
    - command: git.get_project
      type: system
      params:
        directory: src
        token: ${generated_github_token}

  compile_ts:
    - command: expansions.write
      type: system
      params:
        file: tmp/expansions.yaml
        redacted: true
    - command: shell.exec
      type: setup
      params:
        working_dir: src
        shell: bash
        env:
          NODE_JS_VERSION: ${node_js_version}
          DISTRO_ID: ${distro_id}
          MONOGDB_DRIVER_VERSION_OVERRIDE: ${mongodb_driver_version_override}
          PUPPETEER_SKIP_DOWNLOAD: "true"
        script: |
          set -e
          set -x
          .evergreen/install-node.sh
          .evergreen/install-npm-deps.sh
    - command: shell.exec
      params:
        working_dir: src
        shell: bash
        env:
          NODE_JS_VERSION: ${node_js_version}
        script: |
          source .evergreen/setup-env.sh
          npm run evergreen-release bump
          npm run compile
          tar cvzf compiled-ts.tgz packages/*/{lib,dist,package.json} package.json package-lock.json
    - command: s3.put
      params:
        aws_key: ${aws_key}
        aws_secret: ${aws_secret}
        local_file: src/compiled-ts.tgz
        remote_file: mongosh/binaries/${revision}/${revision_order_id}/compiled-ts.tgz
        bucket: mciuploads
        permissions: public-read
        content_type: application/x-gzip
  install:
    - command: expansions.write
      type: system
      params:
        file: tmp/expansions.yaml
        redacted: true
    - command: shell.exec
      type: setup
      params:
        working_dir: src
        shell: bash
        env:
          NODE_JS_VERSION: ${node_js_version}
          DISTRO_ID: ${distro_id}
          MONOGDB_DRIVER_VERSION_OVERRIDE: ${mongodb_driver_version_override}
          PUPPETEER_SKIP_DOWNLOAD: ${puppeteer_skip_download|true}
        script: |
          set -e
          set -x
          .evergreen/install-node.sh
          .evergreen/install-npm-deps.sh
    - command: s3.get
      type: setup
      params:
        aws_key: ${aws_key}
        aws_secret: ${aws_secret}
        local_file: src/compiled-ts.tgz
        remote_file: mongosh/binaries/${revision}/${revision_order_id}/compiled-ts.tgz
        bucket: mciuploads
    - command: shell.exec
      type: setup
      params:
        working_dir: src
        shell: bash
        script: |
          tar xvzf compiled-ts.tgz
  check:
    - command: shell.exec
      params:
        working_dir: src
        shell: bash
        env:
          NODE_JS_VERSION: ${node_js_version}
        script: |
          set -e
          {
          source .evergreen/setup-env.sh
          npm run evergreen-release bump
          npm run check-ci
          }
  test:
    - command: expansions.write
      type: system
      params:
        file: tmp/expansions.yaml
        redacted: true
    - command: shell.exec
      params:
        working_dir: src
        shell: bash
        script: |
          set -e
          {
          source .evergreen/setup-env.sh
          npm run test-ci
          echo "Archiving current coverage result..."
          tar cvzf nyc-output.tgz .nyc_output
          }
        env:
          NODE_JS_VERSION: ${node_js_version}
          MONGOSH_RUN_ONLY_IN_PACKAGE: ${mongosh_run_only_in_package}
          AWS_AUTH_IAM_ACCESS_KEY_ID: ${devtools_ci_aws_key}
          AWS_AUTH_IAM_SECRET_ACCESS_KEY: ${devtools_ci_aws_secret}
          STREAMS_E2E_SPI_CONNECTION_STRING: ${streams_e2e_spi_connection_string}
          STREAMS_E2E_DB_USER: ${streams_e2e_db_user}
          STREAMS_E2E_DB_PASSWORD: ${streams_e2e_db_password}
          STREAMS_E2E_CLUSTER_CONNECTION_STRING: ${streams_e2e_cluster_connection_string}
          TASK_NAME: ${task_name}
    - command: s3.put
      params:
        aws_key: ${aws_key}
        aws_secret: ${aws_secret}
        local_file: src/nyc-output.tgz
        remote_file: mongosh/binaries/${revision}/${revision_order_id}/nyc-output-${build_variant}-${mongosh_test_id}.tgz
        bucket: mciuploads
        permissions: private
        visibility: signed
        content_type: application/x-gzip

  check_coverage:
    - command: s3.get
      params:
        aws_key: ${aws_key}
        aws_secret: ${aws_secret}
        local_file: src/nyc-output-darwin-n20-arg_parser.tgz
        remote_file: mongosh/binaries/${revision}/${revision_order_id}/nyc-output-darwin-n20-arg_parser.tgz
        bucket: mciuploads
    - command: shell.exec
      params:
        working_dir: src
        shell: bash
        script: |
          set -e
          tar xvzf nyc-output-darwin-n20-arg_parser.tgz
    - command: s3.get
      params:
        aws_key: ${aws_key}
        aws_secret: ${aws_secret}
        local_file: src/nyc-output-darwin-n20-async_rewriter2.tgz
        remote_file: mongosh/binaries/${revision}/${revision_order_id}/nyc-output-darwin-n20-async_rewriter2.tgz
        bucket: mciuploads
    - command: shell.exec
      params:
        working_dir: src
        shell: bash
        script: |
          set -e
          tar xvzf nyc-output-darwin-n20-async_rewriter2.tgz
    - command: s3.get
      params:
        aws_key: ${aws_key}
        aws_secret: ${aws_secret}
        local_file: src/nyc-output-darwin-n20-autocomplete.tgz
        remote_file: mongosh/binaries/${revision}/${revision_order_id}/nyc-output-darwin-n20-autocomplete.tgz
        bucket: mciuploads
    - command: shell.exec
      params:
        working_dir: src
        shell: bash
        script: |
          set -e
          tar xvzf nyc-output-darwin-n20-autocomplete.tgz
    - command: s3.get
      params:
        aws_key: ${aws_key}
        aws_secret: ${aws_secret}
        local_file: src/nyc-output-darwin-n20-browser_repl.tgz
        remote_file: mongosh/binaries/${revision}/${revision_order_id}/nyc-output-darwin-n20-browser_repl.tgz
        bucket: mciuploads
    - command: shell.exec
      params:
        working_dir: src
        shell: bash
        script: |
          set -e
          tar xvzf nyc-output-darwin-n20-browser_repl.tgz
    - command: s3.get
      params:
        aws_key: ${aws_key}
        aws_secret: ${aws_secret}
        local_file: src/nyc-output-darwin-n20-browser_runtime_core.tgz
        remote_file: mongosh/binaries/${revision}/${revision_order_id}/nyc-output-darwin-n20-browser_runtime_core.tgz
        bucket: mciuploads
    - command: shell.exec
      params:
        working_dir: src
        shell: bash
        script: |
          set -e
          tar xvzf nyc-output-darwin-n20-browser_runtime_core.tgz
    - command: s3.get
      params:
        aws_key: ${aws_key}
        aws_secret: ${aws_secret}
        local_file: src/nyc-output-darwin-n20-browser_runtime_electron.tgz
        remote_file: mongosh/binaries/${revision}/${revision_order_id}/nyc-output-darwin-n20-browser_runtime_electron.tgz
        bucket: mciuploads
    - command: shell.exec
      params:
        working_dir: src
        shell: bash
        script: |
          set -e
          tar xvzf nyc-output-darwin-n20-browser_runtime_electron.tgz
    - command: s3.get
      params:
        aws_key: ${aws_key}
        aws_secret: ${aws_secret}
        local_file: src/nyc-output-darwin-n20-build.tgz
        remote_file: mongosh/binaries/${revision}/${revision_order_id}/nyc-output-darwin-n20-build.tgz
        bucket: mciuploads
    - command: shell.exec
      params:
        working_dir: src
        shell: bash
        script: |
          set -e
          tar xvzf nyc-output-darwin-n20-build.tgz
    - command: s3.get
      params:
        aws_key: ${aws_key}
        aws_secret: ${aws_secret}
        local_file: src/nyc-output-darwin-n20-cli_repl.tgz
        remote_file: mongosh/binaries/${revision}/${revision_order_id}/nyc-output-darwin-n20-cli_repl.tgz
        bucket: mciuploads
    - command: shell.exec
      params:
        working_dir: src
        shell: bash
        script: |
          set -e
          tar xvzf nyc-output-darwin-n20-cli_repl.tgz
    - command: s3.get
      params:
        aws_key: ${aws_key}
        aws_secret: ${aws_secret}
        local_file: src/nyc-output-darwin-n20-e2e_tests.tgz
        remote_file: mongosh/binaries/${revision}/${revision_order_id}/nyc-output-darwin-n20-e2e_tests.tgz
        bucket: mciuploads
    - command: shell.exec
      params:
        working_dir: src
        shell: bash
        script: |
          set -e
          tar xvzf nyc-output-darwin-n20-e2e_tests.tgz
    - command: s3.get
      params:
        aws_key: ${aws_key}
        aws_secret: ${aws_secret}
        local_file: src/nyc-output-darwin-n20-editor.tgz
        remote_file: mongosh/binaries/${revision}/${revision_order_id}/nyc-output-darwin-n20-editor.tgz
        bucket: mciuploads
    - command: shell.exec
      params:
        working_dir: src
        shell: bash
        script: |
          set -e
          tar xvzf nyc-output-darwin-n20-editor.tgz
    - command: s3.get
      params:
        aws_key: ${aws_key}
        aws_secret: ${aws_secret}
        local_file: src/nyc-output-darwin-n20-errors.tgz
        remote_file: mongosh/binaries/${revision}/${revision_order_id}/nyc-output-darwin-n20-errors.tgz
        bucket: mciuploads
    - command: shell.exec
      params:
        working_dir: src
        shell: bash
        script: |
          set -e
          tar xvzf nyc-output-darwin-n20-errors.tgz
    - command: s3.get
      params:
        aws_key: ${aws_key}
        aws_secret: ${aws_secret}
        local_file: src/nyc-output-darwin-n20-history.tgz
        remote_file: mongosh/binaries/${revision}/${revision_order_id}/nyc-output-darwin-n20-history.tgz
        bucket: mciuploads
    - command: shell.exec
      params:
        working_dir: src
        shell: bash
        script: |
          set -e
          tar xvzf nyc-output-darwin-n20-history.tgz
    - command: s3.get
      params:
        aws_key: ${aws_key}
        aws_secret: ${aws_secret}
        local_file: src/nyc-output-darwin-n20-i18n.tgz
        remote_file: mongosh/binaries/${revision}/${revision_order_id}/nyc-output-darwin-n20-i18n.tgz
        bucket: mciuploads
    - command: shell.exec
      params:
        working_dir: src
        shell: bash
        script: |
          set -e
          tar xvzf nyc-output-darwin-n20-i18n.tgz
    - command: s3.get
      params:
        aws_key: ${aws_key}
        aws_secret: ${aws_secret}
        local_file: src/nyc-output-darwin-n20-js_multiline_to_singleline.tgz
        remote_file: mongosh/binaries/${revision}/${revision_order_id}/nyc-output-darwin-n20-js_multiline_to_singleline.tgz
        bucket: mciuploads
    - command: shell.exec
      params:
        working_dir: src
        shell: bash
        script: |
          set -e
          tar xvzf nyc-output-darwin-n20-js_multiline_to_singleline.tgz
    - command: s3.get
      params:
        aws_key: ${aws_key}
        aws_secret: ${aws_secret}
        local_file: src/nyc-output-darwin-n20-logging.tgz
        remote_file: mongosh/binaries/${revision}/${revision_order_id}/nyc-output-darwin-n20-logging.tgz
        bucket: mciuploads
    - command: shell.exec
      params:
        working_dir: src
        shell: bash
        script: |
          set -e
          tar xvzf nyc-output-darwin-n20-logging.tgz
    - command: s3.get
      params:
        aws_key: ${aws_key}
        aws_secret: ${aws_secret}
        local_file: src/nyc-output-darwin-n20-node_runtime_worker_thread.tgz
        remote_file: mongosh/binaries/${revision}/${revision_order_id}/nyc-output-darwin-n20-node_runtime_worker_thread.tgz
        bucket: mciuploads
    - command: shell.exec
      params:
        working_dir: src
        shell: bash
        script: |
          set -e
          tar xvzf nyc-output-darwin-n20-node_runtime_worker_thread.tgz
    - command: s3.get
      params:
        aws_key: ${aws_key}
        aws_secret: ${aws_secret}
        local_file: src/nyc-output-darwin-n20-service_provider_core.tgz
        remote_file: mongosh/binaries/${revision}/${revision_order_id}/nyc-output-darwin-n20-service_provider_core.tgz
        bucket: mciuploads
    - command: shell.exec
      params:
        working_dir: src
        shell: bash
        script: |
          set -e
          tar xvzf nyc-output-darwin-n20-service_provider_core.tgz
    - command: s3.get
      params:
        aws_key: ${aws_key}
        aws_secret: ${aws_secret}
        local_file: src/nyc-output-darwin-n20-service_provider_node_driver.tgz
        remote_file: mongosh/binaries/${revision}/${revision_order_id}/nyc-output-darwin-n20-service_provider_node_driver.tgz
        bucket: mciuploads
    - command: shell.exec
      params:
        working_dir: src
        shell: bash
        script: |
          set -e
          tar xvzf nyc-output-darwin-n20-service_provider_node_driver.tgz
    - command: s3.get
      params:
        aws_key: ${aws_key}
        aws_secret: ${aws_secret}
        local_file: src/nyc-output-darwin-n20-shell_api.tgz
        remote_file: mongosh/binaries/${revision}/${revision_order_id}/nyc-output-darwin-n20-shell_api.tgz
        bucket: mciuploads
    - command: shell.exec
      params:
        working_dir: src
        shell: bash
        script: |
          set -e
          tar xvzf nyc-output-darwin-n20-shell_api.tgz
    - command: s3.get
      params:
        aws_key: ${aws_key}
        aws_secret: ${aws_secret}
        local_file: src/nyc-output-darwin-n20-shell_bson.tgz
        remote_file: mongosh/binaries/${revision}/${revision_order_id}/nyc-output-darwin-n20-shell_bson.tgz
        bucket: mciuploads
    - command: shell.exec
      params:
        working_dir: src
        shell: bash
        script: |
          set -e
          tar xvzf nyc-output-darwin-n20-shell_bson.tgz
    - command: s3.get
      params:
        aws_key: ${aws_key}
        aws_secret: ${aws_secret}
        local_file: src/nyc-output-darwin-n20-shell_evaluator.tgz
        remote_file: mongosh/binaries/${revision}/${revision_order_id}/nyc-output-darwin-n20-shell_evaluator.tgz
        bucket: mciuploads
    - command: shell.exec
      params:
        working_dir: src
        shell: bash
        script: |
          set -e
          tar xvzf nyc-output-darwin-n20-shell_evaluator.tgz
    - command: s3.get
      params:
        aws_key: ${aws_key}
        aws_secret: ${aws_secret}
        local_file: src/nyc-output-darwin-n20-snippet_manager.tgz
        remote_file: mongosh/binaries/${revision}/${revision_order_id}/nyc-output-darwin-n20-snippet_manager.tgz
        bucket: mciuploads
    - command: shell.exec
      params:
        working_dir: src
        shell: bash
        script: |
          set -e
          tar xvzf nyc-output-darwin-n20-snippet_manager.tgz
    - command: s3.get
      params:
        aws_key: ${aws_key}
        aws_secret: ${aws_secret}
        local_file: src/nyc-output-darwin-n20-types.tgz
        remote_file: mongosh/binaries/${revision}/${revision_order_id}/nyc-output-darwin-n20-types.tgz
        bucket: mciuploads
    - command: shell.exec
      params:
        working_dir: src
        shell: bash
        script: |
          set -e
          tar xvzf nyc-output-darwin-n20-types.tgz
    - command: s3.get
      params:
        aws_key: ${aws_key}
        aws_secret: ${aws_secret}
        local_file: src/nyc-output-tests_darwin-m60xc_n20-cli_repl.tgz
        remote_file: mongosh/binaries/${revision}/${revision_order_id}/nyc-output-tests_darwin-m60xc_n20-cli_repl.tgz
        bucket: mciuploads
    - command: shell.exec
      params:
        working_dir: src
        shell: bash
        script: |
          set -e
          tar xvzf nyc-output-tests_darwin-m60xc_n20-cli_repl.tgz
    - command: s3.get
      params:
        aws_key: ${aws_key}
        aws_secret: ${aws_secret}
        local_file: src/nyc-output-tests_darwin-m60xc_n20-e2e_tests.tgz
        remote_file: mongosh/binaries/${revision}/${revision_order_id}/nyc-output-tests_darwin-m60xc_n20-e2e_tests.tgz
        bucket: mciuploads
    - command: shell.exec
      params:
        working_dir: src
        shell: bash
        script: |
          set -e
          tar xvzf nyc-output-tests_darwin-m60xc_n20-e2e_tests.tgz
    - command: s3.get
      params:
        aws_key: ${aws_key}
        aws_secret: ${aws_secret}
        local_file: src/nyc-output-tests_darwin-m60xc_n20-node_runtime_worker_thread.tgz
        remote_file: mongosh/binaries/${revision}/${revision_order_id}/nyc-output-tests_darwin-m60xc_n20-node_runtime_worker_thread.tgz
        bucket: mciuploads
    - command: shell.exec
      params:
        working_dir: src
        shell: bash
        script: |
          set -e
          tar xvzf nyc-output-tests_darwin-m60xc_n20-node_runtime_worker_thread.tgz
    - command: s3.get
      params:
        aws_key: ${aws_key}
        aws_secret: ${aws_secret}
        local_file: src/nyc-output-tests_darwin-m60xc_n20-service_provider_node_driver.tgz
        remote_file: mongosh/binaries/${revision}/${revision_order_id}/nyc-output-tests_darwin-m60xc_n20-service_provider_node_driver.tgz
        bucket: mciuploads
    - command: shell.exec
      params:
        working_dir: src
        shell: bash
        script: |
          set -e
          tar xvzf nyc-output-tests_darwin-m60xc_n20-service_provider_node_driver.tgz
    - command: s3.get
      params:
        aws_key: ${aws_key}
        aws_secret: ${aws_secret}
        local_file: src/nyc-output-tests_darwin-m60xc_n20-shell_api.tgz
        remote_file: mongosh/binaries/${revision}/${revision_order_id}/nyc-output-tests_darwin-m60xc_n20-shell_api.tgz
        bucket: mciuploads
    - command: shell.exec
      params:
        working_dir: src
        shell: bash
        script: |
          set -e
          tar xvzf nyc-output-tests_darwin-m60xc_n20-shell_api.tgz
    - command: s3.get
      params:
        aws_key: ${aws_key}
        aws_secret: ${aws_secret}
        local_file: src/nyc-output-tests_darwin-m60xe_n20-cli_repl.tgz
        remote_file: mongosh/binaries/${revision}/${revision_order_id}/nyc-output-tests_darwin-m60xe_n20-cli_repl.tgz
        bucket: mciuploads
    - command: shell.exec
      params:
        working_dir: src
        shell: bash
        script: |
          set -e
          tar xvzf nyc-output-tests_darwin-m60xe_n20-cli_repl.tgz
    - command: s3.get
      params:
        aws_key: ${aws_key}
        aws_secret: ${aws_secret}
        local_file: src/nyc-output-tests_darwin-m60xe_n20-e2e_tests.tgz
        remote_file: mongosh/binaries/${revision}/${revision_order_id}/nyc-output-tests_darwin-m60xe_n20-e2e_tests.tgz
        bucket: mciuploads
    - command: shell.exec
      params:
        working_dir: src
        shell: bash
        script: |
          set -e
          tar xvzf nyc-output-tests_darwin-m60xe_n20-e2e_tests.tgz
    - command: s3.get
      params:
        aws_key: ${aws_key}
        aws_secret: ${aws_secret}
        local_file: src/nyc-output-tests_darwin-m60xe_n20-node_runtime_worker_thread.tgz
        remote_file: mongosh/binaries/${revision}/${revision_order_id}/nyc-output-tests_darwin-m60xe_n20-node_runtime_worker_thread.tgz
        bucket: mciuploads
    - command: shell.exec
      params:
        working_dir: src
        shell: bash
        script: |
          set -e
          tar xvzf nyc-output-tests_darwin-m60xe_n20-node_runtime_worker_thread.tgz
    - command: s3.get
      params:
        aws_key: ${aws_key}
        aws_secret: ${aws_secret}
        local_file: src/nyc-output-tests_darwin-m60xe_n20-service_provider_node_driver.tgz
        remote_file: mongosh/binaries/${revision}/${revision_order_id}/nyc-output-tests_darwin-m60xe_n20-service_provider_node_driver.tgz
        bucket: mciuploads
    - command: shell.exec
      params:
        working_dir: src
        shell: bash
        script: |
          set -e
          tar xvzf nyc-output-tests_darwin-m60xe_n20-service_provider_node_driver.tgz
    - command: s3.get
      params:
        aws_key: ${aws_key}
        aws_secret: ${aws_secret}
        local_file: src/nyc-output-tests_darwin-m60xe_n20-shell_api.tgz
        remote_file: mongosh/binaries/${revision}/${revision_order_id}/nyc-output-tests_darwin-m60xe_n20-shell_api.tgz
        bucket: mciuploads
    - command: shell.exec
      params:
        working_dir: src
        shell: bash
        script: |
          set -e
          tar xvzf nyc-output-tests_darwin-m60xe_n20-shell_api.tgz
    - command: s3.get
      params:
        aws_key: ${aws_key}
        aws_secret: ${aws_secret}
        local_file: src/nyc-output-tests_darwin-m70xc_n20-cli_repl.tgz
        remote_file: mongosh/binaries/${revision}/${revision_order_id}/nyc-output-tests_darwin-m70xc_n20-cli_repl.tgz
        bucket: mciuploads
    - command: shell.exec
      params:
        working_dir: src
        shell: bash
        script: |
          set -e
          tar xvzf nyc-output-tests_darwin-m70xc_n20-cli_repl.tgz
    - command: s3.get
      params:
        aws_key: ${aws_key}
        aws_secret: ${aws_secret}
        local_file: src/nyc-output-tests_darwin-m70xc_n20-e2e_tests.tgz
        remote_file: mongosh/binaries/${revision}/${revision_order_id}/nyc-output-tests_darwin-m70xc_n20-e2e_tests.tgz
        bucket: mciuploads
    - command: shell.exec
      params:
        working_dir: src
        shell: bash
        script: |
          set -e
          tar xvzf nyc-output-tests_darwin-m70xc_n20-e2e_tests.tgz
    - command: s3.get
      params:
        aws_key: ${aws_key}
        aws_secret: ${aws_secret}
        local_file: src/nyc-output-tests_darwin-m70xc_n20-node_runtime_worker_thread.tgz
        remote_file: mongosh/binaries/${revision}/${revision_order_id}/nyc-output-tests_darwin-m70xc_n20-node_runtime_worker_thread.tgz
        bucket: mciuploads
    - command: shell.exec
      params:
        working_dir: src
        shell: bash
        script: |
          set -e
          tar xvzf nyc-output-tests_darwin-m70xc_n20-node_runtime_worker_thread.tgz
    - command: s3.get
      params:
        aws_key: ${aws_key}
        aws_secret: ${aws_secret}
        local_file: src/nyc-output-tests_darwin-m70xc_n20-service_provider_node_driver.tgz
        remote_file: mongosh/binaries/${revision}/${revision_order_id}/nyc-output-tests_darwin-m70xc_n20-service_provider_node_driver.tgz
        bucket: mciuploads
    - command: shell.exec
      params:
        working_dir: src
        shell: bash
        script: |
          set -e
          tar xvzf nyc-output-tests_darwin-m70xc_n20-service_provider_node_driver.tgz
    - command: s3.get
      params:
        aws_key: ${aws_key}
        aws_secret: ${aws_secret}
        local_file: src/nyc-output-tests_darwin-m70xc_n20-shell_api.tgz
        remote_file: mongosh/binaries/${revision}/${revision_order_id}/nyc-output-tests_darwin-m70xc_n20-shell_api.tgz
        bucket: mciuploads
    - command: shell.exec
      params:
        working_dir: src
        shell: bash
        script: |
          set -e
          tar xvzf nyc-output-tests_darwin-m70xc_n20-shell_api.tgz
    - command: s3.get
      params:
        aws_key: ${aws_key}
        aws_secret: ${aws_secret}
        local_file: src/nyc-output-tests_darwin-m70xe_n20-cli_repl.tgz
        remote_file: mongosh/binaries/${revision}/${revision_order_id}/nyc-output-tests_darwin-m70xe_n20-cli_repl.tgz
        bucket: mciuploads
    - command: shell.exec
      params:
        working_dir: src
        shell: bash
        script: |
          set -e
          tar xvzf nyc-output-tests_darwin-m70xe_n20-cli_repl.tgz
    - command: s3.get
      params:
        aws_key: ${aws_key}
        aws_secret: ${aws_secret}
        local_file: src/nyc-output-tests_darwin-m70xe_n20-e2e_tests.tgz
        remote_file: mongosh/binaries/${revision}/${revision_order_id}/nyc-output-tests_darwin-m70xe_n20-e2e_tests.tgz
        bucket: mciuploads
    - command: shell.exec
      params:
        working_dir: src
        shell: bash
        script: |
          set -e
          tar xvzf nyc-output-tests_darwin-m70xe_n20-e2e_tests.tgz
    - command: s3.get
      params:
        aws_key: ${aws_key}
        aws_secret: ${aws_secret}
        local_file: src/nyc-output-tests_darwin-m70xe_n20-node_runtime_worker_thread.tgz
        remote_file: mongosh/binaries/${revision}/${revision_order_id}/nyc-output-tests_darwin-m70xe_n20-node_runtime_worker_thread.tgz
        bucket: mciuploads
    - command: shell.exec
      params:
        working_dir: src
        shell: bash
        script: |
          set -e
          tar xvzf nyc-output-tests_darwin-m70xe_n20-node_runtime_worker_thread.tgz
    - command: s3.get
      params:
        aws_key: ${aws_key}
        aws_secret: ${aws_secret}
        local_file: src/nyc-output-tests_darwin-m70xe_n20-service_provider_node_driver.tgz
        remote_file: mongosh/binaries/${revision}/${revision_order_id}/nyc-output-tests_darwin-m70xe_n20-service_provider_node_driver.tgz
        bucket: mciuploads
    - command: shell.exec
      params:
        working_dir: src
        shell: bash
        script: |
          set -e
          tar xvzf nyc-output-tests_darwin-m70xe_n20-service_provider_node_driver.tgz
    - command: s3.get
      params:
        aws_key: ${aws_key}
        aws_secret: ${aws_secret}
        local_file: src/nyc-output-tests_darwin-m70xe_n20-shell_api.tgz
        remote_file: mongosh/binaries/${revision}/${revision_order_id}/nyc-output-tests_darwin-m70xe_n20-shell_api.tgz
        bucket: mciuploads
    - command: shell.exec
      params:
        working_dir: src
        shell: bash
        script: |
          set -e
          tar xvzf nyc-output-tests_darwin-m70xe_n20-shell_api.tgz
    - command: s3.get
      params:
        aws_key: ${aws_key}
        aws_secret: ${aws_secret}
        local_file: src/nyc-output-tests_darwin-m80xc_n20-cli_repl.tgz
        remote_file: mongosh/binaries/${revision}/${revision_order_id}/nyc-output-tests_darwin-m80xc_n20-cli_repl.tgz
        bucket: mciuploads
    - command: shell.exec
      params:
        working_dir: src
        shell: bash
        script: |
          set -e
          tar xvzf nyc-output-tests_darwin-m80xc_n20-cli_repl.tgz
    - command: s3.get
      params:
        aws_key: ${aws_key}
        aws_secret: ${aws_secret}
        local_file: src/nyc-output-tests_darwin-m80xc_n20-e2e_tests.tgz
        remote_file: mongosh/binaries/${revision}/${revision_order_id}/nyc-output-tests_darwin-m80xc_n20-e2e_tests.tgz
        bucket: mciuploads
    - command: shell.exec
      params:
        working_dir: src
        shell: bash
        script: |
          set -e
          tar xvzf nyc-output-tests_darwin-m80xc_n20-e2e_tests.tgz
    - command: s3.get
      params:
        aws_key: ${aws_key}
        aws_secret: ${aws_secret}
        local_file: src/nyc-output-tests_darwin-m80xc_n20-node_runtime_worker_thread.tgz
        remote_file: mongosh/binaries/${revision}/${revision_order_id}/nyc-output-tests_darwin-m80xc_n20-node_runtime_worker_thread.tgz
        bucket: mciuploads
    - command: shell.exec
      params:
        working_dir: src
        shell: bash
        script: |
          set -e
          tar xvzf nyc-output-tests_darwin-m80xc_n20-node_runtime_worker_thread.tgz
    - command: s3.get
      params:
        aws_key: ${aws_key}
        aws_secret: ${aws_secret}
        local_file: src/nyc-output-tests_darwin-m80xc_n20-service_provider_node_driver.tgz
        remote_file: mongosh/binaries/${revision}/${revision_order_id}/nyc-output-tests_darwin-m80xc_n20-service_provider_node_driver.tgz
        bucket: mciuploads
    - command: shell.exec
      params:
        working_dir: src
        shell: bash
        script: |
          set -e
          tar xvzf nyc-output-tests_darwin-m80xc_n20-service_provider_node_driver.tgz
    - command: s3.get
      params:
        aws_key: ${aws_key}
        aws_secret: ${aws_secret}
        local_file: src/nyc-output-tests_darwin-m80xc_n20-shell_api.tgz
        remote_file: mongosh/binaries/${revision}/${revision_order_id}/nyc-output-tests_darwin-m80xc_n20-shell_api.tgz
        bucket: mciuploads
    - command: shell.exec
      params:
        working_dir: src
        shell: bash
        script: |
          set -e
          tar xvzf nyc-output-tests_darwin-m80xc_n20-shell_api.tgz
    - command: s3.get
      params:
        aws_key: ${aws_key}
        aws_secret: ${aws_secret}
        local_file: src/nyc-output-tests_darwin-m80xe_n20-cli_repl.tgz
        remote_file: mongosh/binaries/${revision}/${revision_order_id}/nyc-output-tests_darwin-m80xe_n20-cli_repl.tgz
        bucket: mciuploads
    - command: shell.exec
      params:
        working_dir: src
        shell: bash
        script: |
          set -e
          tar xvzf nyc-output-tests_darwin-m80xe_n20-cli_repl.tgz
    - command: s3.get
      params:
        aws_key: ${aws_key}
        aws_secret: ${aws_secret}
        local_file: src/nyc-output-tests_darwin-m80xe_n20-e2e_tests.tgz
        remote_file: mongosh/binaries/${revision}/${revision_order_id}/nyc-output-tests_darwin-m80xe_n20-e2e_tests.tgz
        bucket: mciuploads
    - command: shell.exec
      params:
        working_dir: src
        shell: bash
        script: |
          set -e
          tar xvzf nyc-output-tests_darwin-m80xe_n20-e2e_tests.tgz
    - command: s3.get
      params:
        aws_key: ${aws_key}
        aws_secret: ${aws_secret}
        local_file: src/nyc-output-tests_darwin-m80xe_n20-node_runtime_worker_thread.tgz
        remote_file: mongosh/binaries/${revision}/${revision_order_id}/nyc-output-tests_darwin-m80xe_n20-node_runtime_worker_thread.tgz
        bucket: mciuploads
    - command: shell.exec
      params:
        working_dir: src
        shell: bash
        script: |
          set -e
          tar xvzf nyc-output-tests_darwin-m80xe_n20-node_runtime_worker_thread.tgz
    - command: s3.get
      params:
        aws_key: ${aws_key}
        aws_secret: ${aws_secret}
        local_file: src/nyc-output-tests_darwin-m80xe_n20-service_provider_node_driver.tgz
        remote_file: mongosh/binaries/${revision}/${revision_order_id}/nyc-output-tests_darwin-m80xe_n20-service_provider_node_driver.tgz
        bucket: mciuploads
    - command: shell.exec
      params:
        working_dir: src
        shell: bash
        script: |
          set -e
          tar xvzf nyc-output-tests_darwin-m80xe_n20-service_provider_node_driver.tgz
    - command: s3.get
      params:
        aws_key: ${aws_key}
        aws_secret: ${aws_secret}
        local_file: src/nyc-output-tests_darwin-m80xe_n20-shell_api.tgz
        remote_file: mongosh/binaries/${revision}/${revision_order_id}/nyc-output-tests_darwin-m80xe_n20-shell_api.tgz
        bucket: mciuploads
    - command: shell.exec
      params:
        working_dir: src
        shell: bash
        script: |
          set -e
          tar xvzf nyc-output-tests_darwin-m80xe_n20-shell_api.tgz
    - command: s3.get
      params:
        aws_key: ${aws_key}
        aws_secret: ${aws_secret}
        local_file: src/nyc-output-tests_darwin-m82xc_n20-cli_repl.tgz
        remote_file: mongosh/binaries/${revision}/${revision_order_id}/nyc-output-tests_darwin-m82xc_n20-cli_repl.tgz
        bucket: mciuploads
    - command: shell.exec
      params:
        working_dir: src
        shell: bash
        script: |
          set -e
          tar xvzf nyc-output-tests_darwin-m82xc_n20-cli_repl.tgz
    - command: s3.get
      params:
        aws_key: ${aws_key}
        aws_secret: ${aws_secret}
        local_file: src/nyc-output-tests_darwin-m82xc_n20-e2e_tests.tgz
        remote_file: mongosh/binaries/${revision}/${revision_order_id}/nyc-output-tests_darwin-m82xc_n20-e2e_tests.tgz
        bucket: mciuploads
    - command: shell.exec
      params:
        working_dir: src
        shell: bash
        script: |
          set -e
          tar xvzf nyc-output-tests_darwin-m82xc_n20-e2e_tests.tgz
    - command: s3.get
      params:
        aws_key: ${aws_key}
        aws_secret: ${aws_secret}
        local_file: src/nyc-output-tests_darwin-m82xc_n20-node_runtime_worker_thread.tgz
        remote_file: mongosh/binaries/${revision}/${revision_order_id}/nyc-output-tests_darwin-m82xc_n20-node_runtime_worker_thread.tgz
        bucket: mciuploads
    - command: shell.exec
      params:
        working_dir: src
        shell: bash
        script: |
          set -e
          tar xvzf nyc-output-tests_darwin-m82xc_n20-node_runtime_worker_thread.tgz
    - command: s3.get
      params:
        aws_key: ${aws_key}
        aws_secret: ${aws_secret}
        local_file: src/nyc-output-tests_darwin-m82xc_n20-service_provider_node_driver.tgz
        remote_file: mongosh/binaries/${revision}/${revision_order_id}/nyc-output-tests_darwin-m82xc_n20-service_provider_node_driver.tgz
        bucket: mciuploads
    - command: shell.exec
      params:
        working_dir: src
        shell: bash
        script: |
          set -e
          tar xvzf nyc-output-tests_darwin-m82xc_n20-service_provider_node_driver.tgz
    - command: s3.get
      params:
        aws_key: ${aws_key}
        aws_secret: ${aws_secret}
        local_file: src/nyc-output-tests_darwin-m82xc_n20-shell_api.tgz
        remote_file: mongosh/binaries/${revision}/${revision_order_id}/nyc-output-tests_darwin-m82xc_n20-shell_api.tgz
        bucket: mciuploads
    - command: shell.exec
      params:
        working_dir: src
        shell: bash
        script: |
          set -e
          tar xvzf nyc-output-tests_darwin-m82xc_n20-shell_api.tgz
    - command: s3.get
      params:
        aws_key: ${aws_key}
        aws_secret: ${aws_secret}
        local_file: src/nyc-output-tests_darwin-m82xe_n20-cli_repl.tgz
        remote_file: mongosh/binaries/${revision}/${revision_order_id}/nyc-output-tests_darwin-m82xe_n20-cli_repl.tgz
        bucket: mciuploads
    - command: shell.exec
      params:
        working_dir: src
        shell: bash
        script: |
          set -e
          tar xvzf nyc-output-tests_darwin-m82xe_n20-cli_repl.tgz
    - command: s3.get
      params:
        aws_key: ${aws_key}
        aws_secret: ${aws_secret}
        local_file: src/nyc-output-tests_darwin-m82xe_n20-e2e_tests.tgz
        remote_file: mongosh/binaries/${revision}/${revision_order_id}/nyc-output-tests_darwin-m82xe_n20-e2e_tests.tgz
        bucket: mciuploads
    - command: shell.exec
      params:
        working_dir: src
        shell: bash
        script: |
          set -e
          tar xvzf nyc-output-tests_darwin-m82xe_n20-e2e_tests.tgz
    - command: s3.get
      params:
        aws_key: ${aws_key}
        aws_secret: ${aws_secret}
        local_file: src/nyc-output-tests_darwin-m82xe_n20-node_runtime_worker_thread.tgz
        remote_file: mongosh/binaries/${revision}/${revision_order_id}/nyc-output-tests_darwin-m82xe_n20-node_runtime_worker_thread.tgz
        bucket: mciuploads
    - command: shell.exec
      params:
        working_dir: src
        shell: bash
        script: |
          set -e
          tar xvzf nyc-output-tests_darwin-m82xe_n20-node_runtime_worker_thread.tgz
    - command: s3.get
      params:
        aws_key: ${aws_key}
        aws_secret: ${aws_secret}
        local_file: src/nyc-output-tests_darwin-m82xe_n20-service_provider_node_driver.tgz
        remote_file: mongosh/binaries/${revision}/${revision_order_id}/nyc-output-tests_darwin-m82xe_n20-service_provider_node_driver.tgz
        bucket: mciuploads
    - command: shell.exec
      params:
        working_dir: src
        shell: bash
        script: |
          set -e
          tar xvzf nyc-output-tests_darwin-m82xe_n20-service_provider_node_driver.tgz
    - command: s3.get
      params:
        aws_key: ${aws_key}
        aws_secret: ${aws_secret}
        local_file: src/nyc-output-tests_darwin-m82xe_n20-shell_api.tgz
        remote_file: mongosh/binaries/${revision}/${revision_order_id}/nyc-output-tests_darwin-m82xe_n20-shell_api.tgz
        bucket: mciuploads
    - command: shell.exec
      params:
        working_dir: src
        shell: bash
        script: |
          set -e
          tar xvzf nyc-output-tests_darwin-m82xe_n20-shell_api.tgz
    - command: s3.get
      params:
        aws_key: ${aws_key}
        aws_secret: ${aws_secret}
        local_file: src/nyc-output-tests_darwin-mlatest_n20-cli_repl.tgz
        remote_file: mongosh/binaries/${revision}/${revision_order_id}/nyc-output-tests_darwin-mlatest_n20-cli_repl.tgz
        bucket: mciuploads
    - command: shell.exec
      params:
        working_dir: src
        shell: bash
        script: |
          set -e
          tar xvzf nyc-output-tests_darwin-mlatest_n20-cli_repl.tgz
    - command: s3.get
      params:
        aws_key: ${aws_key}
        aws_secret: ${aws_secret}
        local_file: src/nyc-output-tests_darwin-mlatest_n20-e2e_tests.tgz
        remote_file: mongosh/binaries/${revision}/${revision_order_id}/nyc-output-tests_darwin-mlatest_n20-e2e_tests.tgz
        bucket: mciuploads
    - command: shell.exec
      params:
        working_dir: src
        shell: bash
        script: |
          set -e
          tar xvzf nyc-output-tests_darwin-mlatest_n20-e2e_tests.tgz
    - command: s3.get
      params:
        aws_key: ${aws_key}
        aws_secret: ${aws_secret}
        local_file: src/nyc-output-tests_darwin-mlatest_n20-node_runtime_worker_thread.tgz
        remote_file: mongosh/binaries/${revision}/${revision_order_id}/nyc-output-tests_darwin-mlatest_n20-node_runtime_worker_thread.tgz
        bucket: mciuploads
    - command: shell.exec
      params:
        working_dir: src
        shell: bash
        script: |
          set -e
          tar xvzf nyc-output-tests_darwin-mlatest_n20-node_runtime_worker_thread.tgz
    - command: s3.get
      params:
        aws_key: ${aws_key}
        aws_secret: ${aws_secret}
        local_file: src/nyc-output-tests_darwin-mlatest_n20-service_provider_node_driver.tgz
        remote_file: mongosh/binaries/${revision}/${revision_order_id}/nyc-output-tests_darwin-mlatest_n20-service_provider_node_driver.tgz
        bucket: mciuploads
    - command: shell.exec
      params:
        working_dir: src
        shell: bash
        script: |
          set -e
          tar xvzf nyc-output-tests_darwin-mlatest_n20-service_provider_node_driver.tgz
    - command: s3.get
      params:
        aws_key: ${aws_key}
        aws_secret: ${aws_secret}
        local_file: src/nyc-output-tests_darwin-mlatest_n20-shell_api.tgz
        remote_file: mongosh/binaries/${revision}/${revision_order_id}/nyc-output-tests_darwin-mlatest_n20-shell_api.tgz
        bucket: mciuploads
    - command: shell.exec
      params:
        working_dir: src
        shell: bash
        script: |
          set -e
          tar xvzf nyc-output-tests_darwin-mlatest_n20-shell_api.tgz
    - command: s3.get
      params:
        aws_key: ${aws_key}
        aws_secret: ${aws_secret}
        local_file: src/nyc-output-linux-n20-arg_parser.tgz
        remote_file: mongosh/binaries/${revision}/${revision_order_id}/nyc-output-linux-n20-arg_parser.tgz
        bucket: mciuploads
    - command: shell.exec
      params:
        working_dir: src
        shell: bash
        script: |
          set -e
          tar xvzf nyc-output-linux-n20-arg_parser.tgz
    - command: s3.get
      params:
        aws_key: ${aws_key}
        aws_secret: ${aws_secret}
        local_file: src/nyc-output-linux-n20-async_rewriter2.tgz
        remote_file: mongosh/binaries/${revision}/${revision_order_id}/nyc-output-linux-n20-async_rewriter2.tgz
        bucket: mciuploads
    - command: shell.exec
      params:
        working_dir: src
        shell: bash
        script: |
          set -e
          tar xvzf nyc-output-linux-n20-async_rewriter2.tgz
    - command: s3.get
      params:
        aws_key: ${aws_key}
        aws_secret: ${aws_secret}
        local_file: src/nyc-output-linux-n20-autocomplete.tgz
        remote_file: mongosh/binaries/${revision}/${revision_order_id}/nyc-output-linux-n20-autocomplete.tgz
        bucket: mciuploads
    - command: shell.exec
      params:
        working_dir: src
        shell: bash
        script: |
          set -e
          tar xvzf nyc-output-linux-n20-autocomplete.tgz
    - command: s3.get
      params:
        aws_key: ${aws_key}
        aws_secret: ${aws_secret}
        local_file: src/nyc-output-linux-n20-browser_runtime_core.tgz
        remote_file: mongosh/binaries/${revision}/${revision_order_id}/nyc-output-linux-n20-browser_runtime_core.tgz
        bucket: mciuploads
    - command: shell.exec
      params:
        working_dir: src
        shell: bash
        script: |
          set -e
          tar xvzf nyc-output-linux-n20-browser_runtime_core.tgz
    - command: s3.get
      params:
        aws_key: ${aws_key}
        aws_secret: ${aws_secret}
        local_file: src/nyc-output-linux-n20-browser_runtime_electron.tgz
        remote_file: mongosh/binaries/${revision}/${revision_order_id}/nyc-output-linux-n20-browser_runtime_electron.tgz
        bucket: mciuploads
    - command: shell.exec
      params:
        working_dir: src
        shell: bash
        script: |
          set -e
          tar xvzf nyc-output-linux-n20-browser_runtime_electron.tgz
    - command: s3.get
      params:
        aws_key: ${aws_key}
        aws_secret: ${aws_secret}
        local_file: src/nyc-output-linux-n20-build.tgz
        remote_file: mongosh/binaries/${revision}/${revision_order_id}/nyc-output-linux-n20-build.tgz
        bucket: mciuploads
    - command: shell.exec
      params:
        working_dir: src
        shell: bash
        script: |
          set -e
          tar xvzf nyc-output-linux-n20-build.tgz
    - command: s3.get
      params:
        aws_key: ${aws_key}
        aws_secret: ${aws_secret}
        local_file: src/nyc-output-linux-n20-cli_repl.tgz
        remote_file: mongosh/binaries/${revision}/${revision_order_id}/nyc-output-linux-n20-cli_repl.tgz
        bucket: mciuploads
    - command: shell.exec
      params:
        working_dir: src
        shell: bash
        script: |
          set -e
          tar xvzf nyc-output-linux-n20-cli_repl.tgz
    - command: s3.get
      params:
        aws_key: ${aws_key}
        aws_secret: ${aws_secret}
        local_file: src/nyc-output-linux-n20-e2e_tests.tgz
        remote_file: mongosh/binaries/${revision}/${revision_order_id}/nyc-output-linux-n20-e2e_tests.tgz
        bucket: mciuploads
    - command: shell.exec
      params:
        working_dir: src
        shell: bash
        script: |
          set -e
          tar xvzf nyc-output-linux-n20-e2e_tests.tgz
    - command: s3.get
      params:
        aws_key: ${aws_key}
        aws_secret: ${aws_secret}
        local_file: src/nyc-output-linux-n20-editor.tgz
        remote_file: mongosh/binaries/${revision}/${revision_order_id}/nyc-output-linux-n20-editor.tgz
        bucket: mciuploads
    - command: shell.exec
      params:
        working_dir: src
        shell: bash
        script: |
          set -e
          tar xvzf nyc-output-linux-n20-editor.tgz
    - command: s3.get
      params:
        aws_key: ${aws_key}
        aws_secret: ${aws_secret}
        local_file: src/nyc-output-linux-n20-errors.tgz
        remote_file: mongosh/binaries/${revision}/${revision_order_id}/nyc-output-linux-n20-errors.tgz
        bucket: mciuploads
    - command: shell.exec
      params:
        working_dir: src
        shell: bash
        script: |
          set -e
          tar xvzf nyc-output-linux-n20-errors.tgz
    - command: s3.get
      params:
        aws_key: ${aws_key}
        aws_secret: ${aws_secret}
        local_file: src/nyc-output-linux-n20-history.tgz
        remote_file: mongosh/binaries/${revision}/${revision_order_id}/nyc-output-linux-n20-history.tgz
        bucket: mciuploads
    - command: shell.exec
      params:
        working_dir: src
        shell: bash
        script: |
          set -e
          tar xvzf nyc-output-linux-n20-history.tgz
    - command: s3.get
      params:
        aws_key: ${aws_key}
        aws_secret: ${aws_secret}
        local_file: src/nyc-output-linux-n20-i18n.tgz
        remote_file: mongosh/binaries/${revision}/${revision_order_id}/nyc-output-linux-n20-i18n.tgz
        bucket: mciuploads
    - command: shell.exec
      params:
        working_dir: src
        shell: bash
        script: |
          set -e
          tar xvzf nyc-output-linux-n20-i18n.tgz
    - command: s3.get
      params:
        aws_key: ${aws_key}
        aws_secret: ${aws_secret}
        local_file: src/nyc-output-linux-n20-java_shell.tgz
        remote_file: mongosh/binaries/${revision}/${revision_order_id}/nyc-output-linux-n20-java_shell.tgz
        bucket: mciuploads
    - command: shell.exec
      params:
        working_dir: src
        shell: bash
        script: |
          set -e
          tar xvzf nyc-output-linux-n20-java_shell.tgz
    - command: s3.get
      params:
        aws_key: ${aws_key}
        aws_secret: ${aws_secret}
        local_file: src/nyc-output-linux-n20-js_multiline_to_singleline.tgz
        remote_file: mongosh/binaries/${revision}/${revision_order_id}/nyc-output-linux-n20-js_multiline_to_singleline.tgz
        bucket: mciuploads
    - command: shell.exec
      params:
        working_dir: src
        shell: bash
        script: |
          set -e
          tar xvzf nyc-output-linux-n20-js_multiline_to_singleline.tgz
    - command: s3.get
      params:
        aws_key: ${aws_key}
        aws_secret: ${aws_secret}
        local_file: src/nyc-output-linux-n20-logging.tgz
        remote_file: mongosh/binaries/${revision}/${revision_order_id}/nyc-output-linux-n20-logging.tgz
        bucket: mciuploads
    - command: shell.exec
      params:
        working_dir: src
        shell: bash
        script: |
          set -e
          tar xvzf nyc-output-linux-n20-logging.tgz
    - command: s3.get
      params:
        aws_key: ${aws_key}
        aws_secret: ${aws_secret}
        local_file: src/nyc-output-linux-n20-node_runtime_worker_thread.tgz
        remote_file: mongosh/binaries/${revision}/${revision_order_id}/nyc-output-linux-n20-node_runtime_worker_thread.tgz
        bucket: mciuploads
    - command: shell.exec
      params:
        working_dir: src
        shell: bash
        script: |
          set -e
          tar xvzf nyc-output-linux-n20-node_runtime_worker_thread.tgz
    - command: s3.get
      params:
        aws_key: ${aws_key}
        aws_secret: ${aws_secret}
        local_file: src/nyc-output-linux-n20-service_provider_core.tgz
        remote_file: mongosh/binaries/${revision}/${revision_order_id}/nyc-output-linux-n20-service_provider_core.tgz
        bucket: mciuploads
    - command: shell.exec
      params:
        working_dir: src
        shell: bash
        script: |
          set -e
          tar xvzf nyc-output-linux-n20-service_provider_core.tgz
    - command: s3.get
      params:
        aws_key: ${aws_key}
        aws_secret: ${aws_secret}
        local_file: src/nyc-output-linux-n20-service_provider_node_driver.tgz
        remote_file: mongosh/binaries/${revision}/${revision_order_id}/nyc-output-linux-n20-service_provider_node_driver.tgz
        bucket: mciuploads
    - command: shell.exec
      params:
        working_dir: src
        shell: bash
        script: |
          set -e
          tar xvzf nyc-output-linux-n20-service_provider_node_driver.tgz
    - command: s3.get
      params:
        aws_key: ${aws_key}
        aws_secret: ${aws_secret}
        local_file: src/nyc-output-linux-n20-shell_api.tgz
        remote_file: mongosh/binaries/${revision}/${revision_order_id}/nyc-output-linux-n20-shell_api.tgz
        bucket: mciuploads
    - command: shell.exec
      params:
        working_dir: src
        shell: bash
        script: |
          set -e
          tar xvzf nyc-output-linux-n20-shell_api.tgz
    - command: s3.get
      params:
        aws_key: ${aws_key}
        aws_secret: ${aws_secret}
        local_file: src/nyc-output-linux-n20-shell_bson.tgz
        remote_file: mongosh/binaries/${revision}/${revision_order_id}/nyc-output-linux-n20-shell_bson.tgz
        bucket: mciuploads
    - command: shell.exec
      params:
        working_dir: src
        shell: bash
        script: |
          set -e
          tar xvzf nyc-output-linux-n20-shell_bson.tgz
    - command: s3.get
      params:
        aws_key: ${aws_key}
        aws_secret: ${aws_secret}
        local_file: src/nyc-output-linux-n20-shell_evaluator.tgz
        remote_file: mongosh/binaries/${revision}/${revision_order_id}/nyc-output-linux-n20-shell_evaluator.tgz
        bucket: mciuploads
    - command: shell.exec
      params:
        working_dir: src
        shell: bash
        script: |
          set -e
          tar xvzf nyc-output-linux-n20-shell_evaluator.tgz
    - command: s3.get
      params:
        aws_key: ${aws_key}
        aws_secret: ${aws_secret}
        local_file: src/nyc-output-linux-n20-snippet_manager.tgz
        remote_file: mongosh/binaries/${revision}/${revision_order_id}/nyc-output-linux-n20-snippet_manager.tgz
        bucket: mciuploads
    - command: shell.exec
      params:
        working_dir: src
        shell: bash
        script: |
          set -e
          tar xvzf nyc-output-linux-n20-snippet_manager.tgz
    - command: s3.get
      params:
        aws_key: ${aws_key}
        aws_secret: ${aws_secret}
        local_file: src/nyc-output-linux-n20-types.tgz
        remote_file: mongosh/binaries/${revision}/${revision_order_id}/nyc-output-linux-n20-types.tgz
        bucket: mciuploads
    - command: shell.exec
      params:
        working_dir: src
        shell: bash
        script: |
          set -e
          tar xvzf nyc-output-linux-n20-types.tgz
    - command: s3.get
      params:
        aws_key: ${aws_key}
        aws_secret: ${aws_secret}
        local_file: src/nyc-output-tests_linux-m42xc_n20-cli_repl.tgz
        remote_file: mongosh/binaries/${revision}/${revision_order_id}/nyc-output-tests_linux-m42xc_n20-cli_repl.tgz
        bucket: mciuploads
    - command: shell.exec
      params:
        working_dir: src
        shell: bash
        script: |
          set -e
          tar xvzf nyc-output-tests_linux-m42xc_n20-cli_repl.tgz
    - command: s3.get
      params:
        aws_key: ${aws_key}
        aws_secret: ${aws_secret}
        local_file: src/nyc-output-tests_linux-m42xc_n20-e2e_tests.tgz
        remote_file: mongosh/binaries/${revision}/${revision_order_id}/nyc-output-tests_linux-m42xc_n20-e2e_tests.tgz
        bucket: mciuploads
    - command: shell.exec
      params:
        working_dir: src
        shell: bash
        script: |
          set -e
          tar xvzf nyc-output-tests_linux-m42xc_n20-e2e_tests.tgz
    - command: s3.get
      params:
        aws_key: ${aws_key}
        aws_secret: ${aws_secret}
        local_file: src/nyc-output-tests_linux-m42xc_n20-java_shell.tgz
        remote_file: mongosh/binaries/${revision}/${revision_order_id}/nyc-output-tests_linux-m42xc_n20-java_shell.tgz
        bucket: mciuploads
    - command: shell.exec
      params:
        working_dir: src
        shell: bash
        script: |
          set -e
          tar xvzf nyc-output-tests_linux-m42xc_n20-java_shell.tgz
    - command: s3.get
      params:
        aws_key: ${aws_key}
        aws_secret: ${aws_secret}
        local_file: src/nyc-output-tests_linux-m42xc_n20-node_runtime_worker_thread.tgz
        remote_file: mongosh/binaries/${revision}/${revision_order_id}/nyc-output-tests_linux-m42xc_n20-node_runtime_worker_thread.tgz
        bucket: mciuploads
    - command: shell.exec
      params:
        working_dir: src
        shell: bash
        script: |
          set -e
          tar xvzf nyc-output-tests_linux-m42xc_n20-node_runtime_worker_thread.tgz
    - command: s3.get
      params:
        aws_key: ${aws_key}
        aws_secret: ${aws_secret}
        local_file: src/nyc-output-tests_linux-m42xc_n20-service_provider_node_driver.tgz
        remote_file: mongosh/binaries/${revision}/${revision_order_id}/nyc-output-tests_linux-m42xc_n20-service_provider_node_driver.tgz
        bucket: mciuploads
    - command: shell.exec
      params:
        working_dir: src
        shell: bash
        script: |
          set -e
          tar xvzf nyc-output-tests_linux-m42xc_n20-service_provider_node_driver.tgz
    - command: s3.get
      params:
        aws_key: ${aws_key}
        aws_secret: ${aws_secret}
        local_file: src/nyc-output-tests_linux-m42xc_n20-shell_api.tgz
        remote_file: mongosh/binaries/${revision}/${revision_order_id}/nyc-output-tests_linux-m42xc_n20-shell_api.tgz
        bucket: mciuploads
    - command: shell.exec
      params:
        working_dir: src
        shell: bash
        script: |
          set -e
          tar xvzf nyc-output-tests_linux-m42xc_n20-shell_api.tgz
    - command: s3.get
      params:
        aws_key: ${aws_key}
        aws_secret: ${aws_secret}
        local_file: src/nyc-output-tests_linux-m44xc_n20-cli_repl.tgz
        remote_file: mongosh/binaries/${revision}/${revision_order_id}/nyc-output-tests_linux-m44xc_n20-cli_repl.tgz
        bucket: mciuploads
    - command: shell.exec
      params:
        working_dir: src
        shell: bash
        script: |
          set -e
          tar xvzf nyc-output-tests_linux-m44xc_n20-cli_repl.tgz
    - command: s3.get
      params:
        aws_key: ${aws_key}
        aws_secret: ${aws_secret}
        local_file: src/nyc-output-tests_linux-m44xc_n20-e2e_tests.tgz
        remote_file: mongosh/binaries/${revision}/${revision_order_id}/nyc-output-tests_linux-m44xc_n20-e2e_tests.tgz
        bucket: mciuploads
    - command: shell.exec
      params:
        working_dir: src
        shell: bash
        script: |
          set -e
          tar xvzf nyc-output-tests_linux-m44xc_n20-e2e_tests.tgz
    - command: s3.get
      params:
        aws_key: ${aws_key}
        aws_secret: ${aws_secret}
        local_file: src/nyc-output-tests_linux-m44xc_n20-java_shell.tgz
        remote_file: mongosh/binaries/${revision}/${revision_order_id}/nyc-output-tests_linux-m44xc_n20-java_shell.tgz
        bucket: mciuploads
    - command: shell.exec
      params:
        working_dir: src
        shell: bash
        script: |
          set -e
          tar xvzf nyc-output-tests_linux-m44xc_n20-java_shell.tgz
    - command: s3.get
      params:
        aws_key: ${aws_key}
        aws_secret: ${aws_secret}
        local_file: src/nyc-output-tests_linux-m44xc_n20-node_runtime_worker_thread.tgz
        remote_file: mongosh/binaries/${revision}/${revision_order_id}/nyc-output-tests_linux-m44xc_n20-node_runtime_worker_thread.tgz
        bucket: mciuploads
    - command: shell.exec
      params:
        working_dir: src
        shell: bash
        script: |
          set -e
          tar xvzf nyc-output-tests_linux-m44xc_n20-node_runtime_worker_thread.tgz
    - command: s3.get
      params:
        aws_key: ${aws_key}
        aws_secret: ${aws_secret}
        local_file: src/nyc-output-tests_linux-m44xc_n20-service_provider_node_driver.tgz
        remote_file: mongosh/binaries/${revision}/${revision_order_id}/nyc-output-tests_linux-m44xc_n20-service_provider_node_driver.tgz
        bucket: mciuploads
    - command: shell.exec
      params:
        working_dir: src
        shell: bash
        script: |
          set -e
          tar xvzf nyc-output-tests_linux-m44xc_n20-service_provider_node_driver.tgz
    - command: s3.get
      params:
        aws_key: ${aws_key}
        aws_secret: ${aws_secret}
        local_file: src/nyc-output-tests_linux-m44xc_n20-shell_api.tgz
        remote_file: mongosh/binaries/${revision}/${revision_order_id}/nyc-output-tests_linux-m44xc_n20-shell_api.tgz
        bucket: mciuploads
    - command: shell.exec
      params:
        working_dir: src
        shell: bash
        script: |
          set -e
          tar xvzf nyc-output-tests_linux-m44xc_n20-shell_api.tgz
    - command: s3.get
      params:
        aws_key: ${aws_key}
        aws_secret: ${aws_secret}
        local_file: src/nyc-output-tests_linux-m44xe_n20-cli_repl.tgz
        remote_file: mongosh/binaries/${revision}/${revision_order_id}/nyc-output-tests_linux-m44xe_n20-cli_repl.tgz
        bucket: mciuploads
    - command: shell.exec
      params:
        working_dir: src
        shell: bash
        script: |
          set -e
          tar xvzf nyc-output-tests_linux-m44xe_n20-cli_repl.tgz
    - command: s3.get
      params:
        aws_key: ${aws_key}
        aws_secret: ${aws_secret}
        local_file: src/nyc-output-tests_linux-m44xe_n20-e2e_tests.tgz
        remote_file: mongosh/binaries/${revision}/${revision_order_id}/nyc-output-tests_linux-m44xe_n20-e2e_tests.tgz
        bucket: mciuploads
    - command: shell.exec
      params:
        working_dir: src
        shell: bash
        script: |
          set -e
          tar xvzf nyc-output-tests_linux-m44xe_n20-e2e_tests.tgz
    - command: s3.get
      params:
        aws_key: ${aws_key}
        aws_secret: ${aws_secret}
        local_file: src/nyc-output-tests_linux-m44xe_n20-java_shell.tgz
        remote_file: mongosh/binaries/${revision}/${revision_order_id}/nyc-output-tests_linux-m44xe_n20-java_shell.tgz
        bucket: mciuploads
    - command: shell.exec
      params:
        working_dir: src
        shell: bash
        script: |
          set -e
          tar xvzf nyc-output-tests_linux-m44xe_n20-java_shell.tgz
    - command: s3.get
      params:
        aws_key: ${aws_key}
        aws_secret: ${aws_secret}
        local_file: src/nyc-output-tests_linux-m44xe_n20-node_runtime_worker_thread.tgz
        remote_file: mongosh/binaries/${revision}/${revision_order_id}/nyc-output-tests_linux-m44xe_n20-node_runtime_worker_thread.tgz
        bucket: mciuploads
    - command: shell.exec
      params:
        working_dir: src
        shell: bash
        script: |
          set -e
          tar xvzf nyc-output-tests_linux-m44xe_n20-node_runtime_worker_thread.tgz
    - command: s3.get
      params:
        aws_key: ${aws_key}
        aws_secret: ${aws_secret}
        local_file: src/nyc-output-tests_linux-m44xe_n20-service_provider_node_driver.tgz
        remote_file: mongosh/binaries/${revision}/${revision_order_id}/nyc-output-tests_linux-m44xe_n20-service_provider_node_driver.tgz
        bucket: mciuploads
    - command: shell.exec
      params:
        working_dir: src
        shell: bash
        script: |
          set -e
          tar xvzf nyc-output-tests_linux-m44xe_n20-service_provider_node_driver.tgz
    - command: s3.get
      params:
        aws_key: ${aws_key}
        aws_secret: ${aws_secret}
        local_file: src/nyc-output-tests_linux-m44xe_n20-shell_api.tgz
        remote_file: mongosh/binaries/${revision}/${revision_order_id}/nyc-output-tests_linux-m44xe_n20-shell_api.tgz
        bucket: mciuploads
    - command: shell.exec
      params:
        working_dir: src
        shell: bash
        script: |
          set -e
          tar xvzf nyc-output-tests_linux-m44xe_n20-shell_api.tgz
    - command: s3.get
      params:
        aws_key: ${aws_key}
        aws_secret: ${aws_secret}
        local_file: src/nyc-output-tests_linux-m50xc_n20-cli_repl.tgz
        remote_file: mongosh/binaries/${revision}/${revision_order_id}/nyc-output-tests_linux-m50xc_n20-cli_repl.tgz
        bucket: mciuploads
    - command: shell.exec
      params:
        working_dir: src
        shell: bash
        script: |
          set -e
          tar xvzf nyc-output-tests_linux-m50xc_n20-cli_repl.tgz
    - command: s3.get
      params:
        aws_key: ${aws_key}
        aws_secret: ${aws_secret}
        local_file: src/nyc-output-tests_linux-m50xc_n20-e2e_tests.tgz
        remote_file: mongosh/binaries/${revision}/${revision_order_id}/nyc-output-tests_linux-m50xc_n20-e2e_tests.tgz
        bucket: mciuploads
    - command: shell.exec
      params:
        working_dir: src
        shell: bash
        script: |
          set -e
          tar xvzf nyc-output-tests_linux-m50xc_n20-e2e_tests.tgz
    - command: s3.get
      params:
        aws_key: ${aws_key}
        aws_secret: ${aws_secret}
        local_file: src/nyc-output-tests_linux-m50xc_n20-java_shell.tgz
        remote_file: mongosh/binaries/${revision}/${revision_order_id}/nyc-output-tests_linux-m50xc_n20-java_shell.tgz
        bucket: mciuploads
    - command: shell.exec
      params:
        working_dir: src
        shell: bash
        script: |
          set -e
          tar xvzf nyc-output-tests_linux-m50xc_n20-java_shell.tgz
    - command: s3.get
      params:
        aws_key: ${aws_key}
        aws_secret: ${aws_secret}
        local_file: src/nyc-output-tests_linux-m50xc_n20-node_runtime_worker_thread.tgz
        remote_file: mongosh/binaries/${revision}/${revision_order_id}/nyc-output-tests_linux-m50xc_n20-node_runtime_worker_thread.tgz
        bucket: mciuploads
    - command: shell.exec
      params:
        working_dir: src
        shell: bash
        script: |
          set -e
          tar xvzf nyc-output-tests_linux-m50xc_n20-node_runtime_worker_thread.tgz
    - command: s3.get
      params:
        aws_key: ${aws_key}
        aws_secret: ${aws_secret}
        local_file: src/nyc-output-tests_linux-m50xc_n20-service_provider_node_driver.tgz
        remote_file: mongosh/binaries/${revision}/${revision_order_id}/nyc-output-tests_linux-m50xc_n20-service_provider_node_driver.tgz
        bucket: mciuploads
    - command: shell.exec
      params:
        working_dir: src
        shell: bash
        script: |
          set -e
          tar xvzf nyc-output-tests_linux-m50xc_n20-service_provider_node_driver.tgz
    - command: s3.get
      params:
        aws_key: ${aws_key}
        aws_secret: ${aws_secret}
        local_file: src/nyc-output-tests_linux-m50xc_n20-shell_api.tgz
        remote_file: mongosh/binaries/${revision}/${revision_order_id}/nyc-output-tests_linux-m50xc_n20-shell_api.tgz
        bucket: mciuploads
    - command: shell.exec
      params:
        working_dir: src
        shell: bash
        script: |
          set -e
          tar xvzf nyc-output-tests_linux-m50xc_n20-shell_api.tgz
    - command: s3.get
      params:
        aws_key: ${aws_key}
        aws_secret: ${aws_secret}
        local_file: src/nyc-output-tests_linux-m50xe_n20-cli_repl.tgz
        remote_file: mongosh/binaries/${revision}/${revision_order_id}/nyc-output-tests_linux-m50xe_n20-cli_repl.tgz
        bucket: mciuploads
    - command: shell.exec
      params:
        working_dir: src
        shell: bash
        script: |
          set -e
          tar xvzf nyc-output-tests_linux-m50xe_n20-cli_repl.tgz
    - command: s3.get
      params:
        aws_key: ${aws_key}
        aws_secret: ${aws_secret}
        local_file: src/nyc-output-tests_linux-m50xe_n20-e2e_tests.tgz
        remote_file: mongosh/binaries/${revision}/${revision_order_id}/nyc-output-tests_linux-m50xe_n20-e2e_tests.tgz
        bucket: mciuploads
    - command: shell.exec
      params:
        working_dir: src
        shell: bash
        script: |
          set -e
          tar xvzf nyc-output-tests_linux-m50xe_n20-e2e_tests.tgz
    - command: s3.get
      params:
        aws_key: ${aws_key}
        aws_secret: ${aws_secret}
        local_file: src/nyc-output-tests_linux-m50xe_n20-java_shell.tgz
        remote_file: mongosh/binaries/${revision}/${revision_order_id}/nyc-output-tests_linux-m50xe_n20-java_shell.tgz
        bucket: mciuploads
    - command: shell.exec
      params:
        working_dir: src
        shell: bash
        script: |
          set -e
          tar xvzf nyc-output-tests_linux-m50xe_n20-java_shell.tgz
    - command: s3.get
      params:
        aws_key: ${aws_key}
        aws_secret: ${aws_secret}
        local_file: src/nyc-output-tests_linux-m50xe_n20-node_runtime_worker_thread.tgz
        remote_file: mongosh/binaries/${revision}/${revision_order_id}/nyc-output-tests_linux-m50xe_n20-node_runtime_worker_thread.tgz
        bucket: mciuploads
    - command: shell.exec
      params:
        working_dir: src
        shell: bash
        script: |
          set -e
          tar xvzf nyc-output-tests_linux-m50xe_n20-node_runtime_worker_thread.tgz
    - command: s3.get
      params:
        aws_key: ${aws_key}
        aws_secret: ${aws_secret}
        local_file: src/nyc-output-tests_linux-m50xe_n20-service_provider_node_driver.tgz
        remote_file: mongosh/binaries/${revision}/${revision_order_id}/nyc-output-tests_linux-m50xe_n20-service_provider_node_driver.tgz
        bucket: mciuploads
    - command: shell.exec
      params:
        working_dir: src
        shell: bash
        script: |
          set -e
          tar xvzf nyc-output-tests_linux-m50xe_n20-service_provider_node_driver.tgz
    - command: s3.get
      params:
        aws_key: ${aws_key}
        aws_secret: ${aws_secret}
        local_file: src/nyc-output-tests_linux-m50xe_n20-shell_api.tgz
        remote_file: mongosh/binaries/${revision}/${revision_order_id}/nyc-output-tests_linux-m50xe_n20-shell_api.tgz
        bucket: mciuploads
    - command: shell.exec
      params:
        working_dir: src
        shell: bash
        script: |
          set -e
          tar xvzf nyc-output-tests_linux-m50xe_n20-shell_api.tgz
    - command: s3.get
      params:
        aws_key: ${aws_key}
        aws_secret: ${aws_secret}
        local_file: src/nyc-output-tests_linux-m60xc_n20-cli_repl.tgz
        remote_file: mongosh/binaries/${revision}/${revision_order_id}/nyc-output-tests_linux-m60xc_n20-cli_repl.tgz
        bucket: mciuploads
    - command: shell.exec
      params:
        working_dir: src
        shell: bash
        script: |
          set -e
          tar xvzf nyc-output-tests_linux-m60xc_n20-cli_repl.tgz
    - command: s3.get
      params:
        aws_key: ${aws_key}
        aws_secret: ${aws_secret}
        local_file: src/nyc-output-tests_linux-m60xc_n20-e2e_tests.tgz
        remote_file: mongosh/binaries/${revision}/${revision_order_id}/nyc-output-tests_linux-m60xc_n20-e2e_tests.tgz
        bucket: mciuploads
    - command: shell.exec
      params:
        working_dir: src
        shell: bash
        script: |
          set -e
          tar xvzf nyc-output-tests_linux-m60xc_n20-e2e_tests.tgz
    - command: s3.get
      params:
        aws_key: ${aws_key}
        aws_secret: ${aws_secret}
        local_file: src/nyc-output-tests_linux-m60xc_n20-java_shell.tgz
        remote_file: mongosh/binaries/${revision}/${revision_order_id}/nyc-output-tests_linux-m60xc_n20-java_shell.tgz
        bucket: mciuploads
    - command: shell.exec
      params:
        working_dir: src
        shell: bash
        script: |
          set -e
          tar xvzf nyc-output-tests_linux-m60xc_n20-java_shell.tgz
    - command: s3.get
      params:
        aws_key: ${aws_key}
        aws_secret: ${aws_secret}
        local_file: src/nyc-output-tests_linux-m60xc_n20-node_runtime_worker_thread.tgz
        remote_file: mongosh/binaries/${revision}/${revision_order_id}/nyc-output-tests_linux-m60xc_n20-node_runtime_worker_thread.tgz
        bucket: mciuploads
    - command: shell.exec
      params:
        working_dir: src
        shell: bash
        script: |
          set -e
          tar xvzf nyc-output-tests_linux-m60xc_n20-node_runtime_worker_thread.tgz
    - command: s3.get
      params:
        aws_key: ${aws_key}
        aws_secret: ${aws_secret}
        local_file: src/nyc-output-tests_linux-m60xc_n20-service_provider_node_driver.tgz
        remote_file: mongosh/binaries/${revision}/${revision_order_id}/nyc-output-tests_linux-m60xc_n20-service_provider_node_driver.tgz
        bucket: mciuploads
    - command: shell.exec
      params:
        working_dir: src
        shell: bash
        script: |
          set -e
          tar xvzf nyc-output-tests_linux-m60xc_n20-service_provider_node_driver.tgz
    - command: s3.get
      params:
        aws_key: ${aws_key}
        aws_secret: ${aws_secret}
        local_file: src/nyc-output-tests_linux-m60xc_n20-shell_api.tgz
        remote_file: mongosh/binaries/${revision}/${revision_order_id}/nyc-output-tests_linux-m60xc_n20-shell_api.tgz
        bucket: mciuploads
    - command: shell.exec
      params:
        working_dir: src
        shell: bash
        script: |
          set -e
          tar xvzf nyc-output-tests_linux-m60xc_n20-shell_api.tgz
    - command: s3.get
      params:
        aws_key: ${aws_key}
        aws_secret: ${aws_secret}
        local_file: src/nyc-output-tests_linux-m60xe_n20-cli_repl.tgz
        remote_file: mongosh/binaries/${revision}/${revision_order_id}/nyc-output-tests_linux-m60xe_n20-cli_repl.tgz
        bucket: mciuploads
    - command: shell.exec
      params:
        working_dir: src
        shell: bash
        script: |
          set -e
          tar xvzf nyc-output-tests_linux-m60xe_n20-cli_repl.tgz
    - command: s3.get
      params:
        aws_key: ${aws_key}
        aws_secret: ${aws_secret}
        local_file: src/nyc-output-tests_linux-m60xe_n20-e2e_tests.tgz
        remote_file: mongosh/binaries/${revision}/${revision_order_id}/nyc-output-tests_linux-m60xe_n20-e2e_tests.tgz
        bucket: mciuploads
    - command: shell.exec
      params:
        working_dir: src
        shell: bash
        script: |
          set -e
          tar xvzf nyc-output-tests_linux-m60xe_n20-e2e_tests.tgz
    - command: s3.get
      params:
        aws_key: ${aws_key}
        aws_secret: ${aws_secret}
        local_file: src/nyc-output-tests_linux-m60xe_n20-java_shell.tgz
        remote_file: mongosh/binaries/${revision}/${revision_order_id}/nyc-output-tests_linux-m60xe_n20-java_shell.tgz
        bucket: mciuploads
    - command: shell.exec
      params:
        working_dir: src
        shell: bash
        script: |
          set -e
          tar xvzf nyc-output-tests_linux-m60xe_n20-java_shell.tgz
    - command: s3.get
      params:
        aws_key: ${aws_key}
        aws_secret: ${aws_secret}
        local_file: src/nyc-output-tests_linux-m60xe_n20-node_runtime_worker_thread.tgz
        remote_file: mongosh/binaries/${revision}/${revision_order_id}/nyc-output-tests_linux-m60xe_n20-node_runtime_worker_thread.tgz
        bucket: mciuploads
    - command: shell.exec
      params:
        working_dir: src
        shell: bash
        script: |
          set -e
          tar xvzf nyc-output-tests_linux-m60xe_n20-node_runtime_worker_thread.tgz
    - command: s3.get
      params:
        aws_key: ${aws_key}
        aws_secret: ${aws_secret}
        local_file: src/nyc-output-tests_linux-m60xe_n20-service_provider_node_driver.tgz
        remote_file: mongosh/binaries/${revision}/${revision_order_id}/nyc-output-tests_linux-m60xe_n20-service_provider_node_driver.tgz
        bucket: mciuploads
    - command: shell.exec
      params:
        working_dir: src
        shell: bash
        script: |
          set -e
          tar xvzf nyc-output-tests_linux-m60xe_n20-service_provider_node_driver.tgz
    - command: s3.get
      params:
        aws_key: ${aws_key}
        aws_secret: ${aws_secret}
        local_file: src/nyc-output-tests_linux-m60xe_n20-shell_api.tgz
        remote_file: mongosh/binaries/${revision}/${revision_order_id}/nyc-output-tests_linux-m60xe_n20-shell_api.tgz
        bucket: mciuploads
    - command: shell.exec
      params:
        working_dir: src
        shell: bash
        script: |
          set -e
          tar xvzf nyc-output-tests_linux-m60xe_n20-shell_api.tgz
    - command: s3.get
      params:
        aws_key: ${aws_key}
        aws_secret: ${aws_secret}
        local_file: src/nyc-output-tests_linux-m70xc_n20-cli_repl.tgz
        remote_file: mongosh/binaries/${revision}/${revision_order_id}/nyc-output-tests_linux-m70xc_n20-cli_repl.tgz
        bucket: mciuploads
    - command: shell.exec
      params:
        working_dir: src
        shell: bash
        script: |
          set -e
          tar xvzf nyc-output-tests_linux-m70xc_n20-cli_repl.tgz
    - command: s3.get
      params:
        aws_key: ${aws_key}
        aws_secret: ${aws_secret}
        local_file: src/nyc-output-tests_linux-m70xc_n20-e2e_tests.tgz
        remote_file: mongosh/binaries/${revision}/${revision_order_id}/nyc-output-tests_linux-m70xc_n20-e2e_tests.tgz
        bucket: mciuploads
    - command: shell.exec
      params:
        working_dir: src
        shell: bash
        script: |
          set -e
          tar xvzf nyc-output-tests_linux-m70xc_n20-e2e_tests.tgz
    - command: s3.get
      params:
        aws_key: ${aws_key}
        aws_secret: ${aws_secret}
        local_file: src/nyc-output-tests_linux-m70xc_n20-java_shell.tgz
        remote_file: mongosh/binaries/${revision}/${revision_order_id}/nyc-output-tests_linux-m70xc_n20-java_shell.tgz
        bucket: mciuploads
    - command: shell.exec
      params:
        working_dir: src
        shell: bash
        script: |
          set -e
          tar xvzf nyc-output-tests_linux-m70xc_n20-java_shell.tgz
    - command: s3.get
      params:
        aws_key: ${aws_key}
        aws_secret: ${aws_secret}
        local_file: src/nyc-output-tests_linux-m70xc_n20-node_runtime_worker_thread.tgz
        remote_file: mongosh/binaries/${revision}/${revision_order_id}/nyc-output-tests_linux-m70xc_n20-node_runtime_worker_thread.tgz
        bucket: mciuploads
    - command: shell.exec
      params:
        working_dir: src
        shell: bash
        script: |
          set -e
          tar xvzf nyc-output-tests_linux-m70xc_n20-node_runtime_worker_thread.tgz
    - command: s3.get
      params:
        aws_key: ${aws_key}
        aws_secret: ${aws_secret}
        local_file: src/nyc-output-tests_linux-m70xc_n20-service_provider_node_driver.tgz
        remote_file: mongosh/binaries/${revision}/${revision_order_id}/nyc-output-tests_linux-m70xc_n20-service_provider_node_driver.tgz
        bucket: mciuploads
    - command: shell.exec
      params:
        working_dir: src
        shell: bash
        script: |
          set -e
          tar xvzf nyc-output-tests_linux-m70xc_n20-service_provider_node_driver.tgz
    - command: s3.get
      params:
        aws_key: ${aws_key}
        aws_secret: ${aws_secret}
        local_file: src/nyc-output-tests_linux-m70xc_n20-shell_api.tgz
        remote_file: mongosh/binaries/${revision}/${revision_order_id}/nyc-output-tests_linux-m70xc_n20-shell_api.tgz
        bucket: mciuploads
    - command: shell.exec
      params:
        working_dir: src
        shell: bash
        script: |
          set -e
          tar xvzf nyc-output-tests_linux-m70xc_n20-shell_api.tgz
    - command: s3.get
      params:
        aws_key: ${aws_key}
        aws_secret: ${aws_secret}
        local_file: src/nyc-output-tests_linux-m70xe_n20-cli_repl.tgz
        remote_file: mongosh/binaries/${revision}/${revision_order_id}/nyc-output-tests_linux-m70xe_n20-cli_repl.tgz
        bucket: mciuploads
    - command: shell.exec
      params:
        working_dir: src
        shell: bash
        script: |
          set -e
          tar xvzf nyc-output-tests_linux-m70xe_n20-cli_repl.tgz
    - command: s3.get
      params:
        aws_key: ${aws_key}
        aws_secret: ${aws_secret}
        local_file: src/nyc-output-tests_linux-m70xe_n20-e2e_tests.tgz
        remote_file: mongosh/binaries/${revision}/${revision_order_id}/nyc-output-tests_linux-m70xe_n20-e2e_tests.tgz
        bucket: mciuploads
    - command: shell.exec
      params:
        working_dir: src
        shell: bash
        script: |
          set -e
          tar xvzf nyc-output-tests_linux-m70xe_n20-e2e_tests.tgz
    - command: s3.get
      params:
        aws_key: ${aws_key}
        aws_secret: ${aws_secret}
        local_file: src/nyc-output-tests_linux-m70xe_n20-java_shell.tgz
        remote_file: mongosh/binaries/${revision}/${revision_order_id}/nyc-output-tests_linux-m70xe_n20-java_shell.tgz
        bucket: mciuploads
    - command: shell.exec
      params:
        working_dir: src
        shell: bash
        script: |
          set -e
          tar xvzf nyc-output-tests_linux-m70xe_n20-java_shell.tgz
    - command: s3.get
      params:
        aws_key: ${aws_key}
        aws_secret: ${aws_secret}
        local_file: src/nyc-output-tests_linux-m70xe_n20-node_runtime_worker_thread.tgz
        remote_file: mongosh/binaries/${revision}/${revision_order_id}/nyc-output-tests_linux-m70xe_n20-node_runtime_worker_thread.tgz
        bucket: mciuploads
    - command: shell.exec
      params:
        working_dir: src
        shell: bash
        script: |
          set -e
          tar xvzf nyc-output-tests_linux-m70xe_n20-node_runtime_worker_thread.tgz
    - command: s3.get
      params:
        aws_key: ${aws_key}
        aws_secret: ${aws_secret}
        local_file: src/nyc-output-tests_linux-m70xe_n20-service_provider_node_driver.tgz
        remote_file: mongosh/binaries/${revision}/${revision_order_id}/nyc-output-tests_linux-m70xe_n20-service_provider_node_driver.tgz
        bucket: mciuploads
    - command: shell.exec
      params:
        working_dir: src
        shell: bash
        script: |
          set -e
          tar xvzf nyc-output-tests_linux-m70xe_n20-service_provider_node_driver.tgz
    - command: s3.get
      params:
        aws_key: ${aws_key}
        aws_secret: ${aws_secret}
        local_file: src/nyc-output-tests_linux-m70xe_n20-shell_api.tgz
        remote_file: mongosh/binaries/${revision}/${revision_order_id}/nyc-output-tests_linux-m70xe_n20-shell_api.tgz
        bucket: mciuploads
    - command: shell.exec
      params:
        working_dir: src
        shell: bash
        script: |
          set -e
          tar xvzf nyc-output-tests_linux-m70xe_n20-shell_api.tgz
    - command: s3.get
      params:
        aws_key: ${aws_key}
        aws_secret: ${aws_secret}
        local_file: src/nyc-output-tests_linux-m80xc_n20-cli_repl.tgz
        remote_file: mongosh/binaries/${revision}/${revision_order_id}/nyc-output-tests_linux-m80xc_n20-cli_repl.tgz
        bucket: mciuploads
    - command: shell.exec
      params:
        working_dir: src
        shell: bash
        script: |
          set -e
          tar xvzf nyc-output-tests_linux-m80xc_n20-cli_repl.tgz
    - command: s3.get
      params:
        aws_key: ${aws_key}
        aws_secret: ${aws_secret}
        local_file: src/nyc-output-tests_linux-m80xc_n20-e2e_tests.tgz
        remote_file: mongosh/binaries/${revision}/${revision_order_id}/nyc-output-tests_linux-m80xc_n20-e2e_tests.tgz
        bucket: mciuploads
    - command: shell.exec
      params:
        working_dir: src
        shell: bash
        script: |
          set -e
          tar xvzf nyc-output-tests_linux-m80xc_n20-e2e_tests.tgz
    - command: s3.get
      params:
        aws_key: ${aws_key}
        aws_secret: ${aws_secret}
        local_file: src/nyc-output-tests_linux-m80xc_n20-java_shell.tgz
        remote_file: mongosh/binaries/${revision}/${revision_order_id}/nyc-output-tests_linux-m80xc_n20-java_shell.tgz
        bucket: mciuploads
    - command: shell.exec
      params:
        working_dir: src
        shell: bash
        script: |
          set -e
          tar xvzf nyc-output-tests_linux-m80xc_n20-java_shell.tgz
    - command: s3.get
      params:
        aws_key: ${aws_key}
        aws_secret: ${aws_secret}
        local_file: src/nyc-output-tests_linux-m80xc_n20-node_runtime_worker_thread.tgz
        remote_file: mongosh/binaries/${revision}/${revision_order_id}/nyc-output-tests_linux-m80xc_n20-node_runtime_worker_thread.tgz
        bucket: mciuploads
    - command: shell.exec
      params:
        working_dir: src
        shell: bash
        script: |
          set -e
          tar xvzf nyc-output-tests_linux-m80xc_n20-node_runtime_worker_thread.tgz
    - command: s3.get
      params:
        aws_key: ${aws_key}
        aws_secret: ${aws_secret}
        local_file: src/nyc-output-tests_linux-m80xc_n20-service_provider_node_driver.tgz
        remote_file: mongosh/binaries/${revision}/${revision_order_id}/nyc-output-tests_linux-m80xc_n20-service_provider_node_driver.tgz
        bucket: mciuploads
    - command: shell.exec
      params:
        working_dir: src
        shell: bash
        script: |
          set -e
          tar xvzf nyc-output-tests_linux-m80xc_n20-service_provider_node_driver.tgz
    - command: s3.get
      params:
        aws_key: ${aws_key}
        aws_secret: ${aws_secret}
        local_file: src/nyc-output-tests_linux-m80xc_n20-shell_api.tgz
        remote_file: mongosh/binaries/${revision}/${revision_order_id}/nyc-output-tests_linux-m80xc_n20-shell_api.tgz
        bucket: mciuploads
    - command: shell.exec
      params:
        working_dir: src
        shell: bash
        script: |
          set -e
          tar xvzf nyc-output-tests_linux-m80xc_n20-shell_api.tgz
    - command: s3.get
      params:
        aws_key: ${aws_key}
        aws_secret: ${aws_secret}
        local_file: src/nyc-output-tests_linux-m80xe_n20-cli_repl.tgz
        remote_file: mongosh/binaries/${revision}/${revision_order_id}/nyc-output-tests_linux-m80xe_n20-cli_repl.tgz
        bucket: mciuploads
    - command: shell.exec
      params:
        working_dir: src
        shell: bash
        script: |
          set -e
          tar xvzf nyc-output-tests_linux-m80xe_n20-cli_repl.tgz
    - command: s3.get
      params:
        aws_key: ${aws_key}
        aws_secret: ${aws_secret}
        local_file: src/nyc-output-tests_linux-m80xe_n20-e2e_tests.tgz
        remote_file: mongosh/binaries/${revision}/${revision_order_id}/nyc-output-tests_linux-m80xe_n20-e2e_tests.tgz
        bucket: mciuploads
    - command: shell.exec
      params:
        working_dir: src
        shell: bash
        script: |
          set -e
          tar xvzf nyc-output-tests_linux-m80xe_n20-e2e_tests.tgz
    - command: s3.get
      params:
        aws_key: ${aws_key}
        aws_secret: ${aws_secret}
        local_file: src/nyc-output-tests_linux-m80xe_n20-java_shell.tgz
        remote_file: mongosh/binaries/${revision}/${revision_order_id}/nyc-output-tests_linux-m80xe_n20-java_shell.tgz
        bucket: mciuploads
    - command: shell.exec
      params:
        working_dir: src
        shell: bash
        script: |
          set -e
          tar xvzf nyc-output-tests_linux-m80xe_n20-java_shell.tgz
    - command: s3.get
      params:
        aws_key: ${aws_key}
        aws_secret: ${aws_secret}
        local_file: src/nyc-output-tests_linux-m80xe_n20-node_runtime_worker_thread.tgz
        remote_file: mongosh/binaries/${revision}/${revision_order_id}/nyc-output-tests_linux-m80xe_n20-node_runtime_worker_thread.tgz
        bucket: mciuploads
    - command: shell.exec
      params:
        working_dir: src
        shell: bash
        script: |
          set -e
          tar xvzf nyc-output-tests_linux-m80xe_n20-node_runtime_worker_thread.tgz
    - command: s3.get
      params:
        aws_key: ${aws_key}
        aws_secret: ${aws_secret}
        local_file: src/nyc-output-tests_linux-m80xe_n20-service_provider_node_driver.tgz
        remote_file: mongosh/binaries/${revision}/${revision_order_id}/nyc-output-tests_linux-m80xe_n20-service_provider_node_driver.tgz
        bucket: mciuploads
    - command: shell.exec
      params:
        working_dir: src
        shell: bash
        script: |
          set -e
          tar xvzf nyc-output-tests_linux-m80xe_n20-service_provider_node_driver.tgz
    - command: s3.get
      params:
        aws_key: ${aws_key}
        aws_secret: ${aws_secret}
        local_file: src/nyc-output-tests_linux-m80xe_n20-shell_api.tgz
        remote_file: mongosh/binaries/${revision}/${revision_order_id}/nyc-output-tests_linux-m80xe_n20-shell_api.tgz
        bucket: mciuploads
    - command: shell.exec
      params:
        working_dir: src
        shell: bash
        script: |
          set -e
          tar xvzf nyc-output-tests_linux-m80xe_n20-shell_api.tgz
    - command: s3.get
      params:
        aws_key: ${aws_key}
        aws_secret: ${aws_secret}
        local_file: src/nyc-output-tests_linux-m82xc_n20-cli_repl.tgz
        remote_file: mongosh/binaries/${revision}/${revision_order_id}/nyc-output-tests_linux-m82xc_n20-cli_repl.tgz
        bucket: mciuploads
    - command: shell.exec
      params:
        working_dir: src
        shell: bash
        script: |
          set -e
          tar xvzf nyc-output-tests_linux-m82xc_n20-cli_repl.tgz
    - command: s3.get
      params:
        aws_key: ${aws_key}
        aws_secret: ${aws_secret}
        local_file: src/nyc-output-tests_linux-m82xc_n20-e2e_tests.tgz
        remote_file: mongosh/binaries/${revision}/${revision_order_id}/nyc-output-tests_linux-m82xc_n20-e2e_tests.tgz
        bucket: mciuploads
    - command: shell.exec
      params:
        working_dir: src
        shell: bash
        script: |
          set -e
          tar xvzf nyc-output-tests_linux-m82xc_n20-e2e_tests.tgz
    - command: s3.get
      params:
        aws_key: ${aws_key}
        aws_secret: ${aws_secret}
        local_file: src/nyc-output-tests_linux-m82xc_n20-java_shell.tgz
        remote_file: mongosh/binaries/${revision}/${revision_order_id}/nyc-output-tests_linux-m82xc_n20-java_shell.tgz
        bucket: mciuploads
    - command: shell.exec
      params:
        working_dir: src
        shell: bash
        script: |
          set -e
          tar xvzf nyc-output-tests_linux-m82xc_n20-java_shell.tgz
    - command: s3.get
      params:
        aws_key: ${aws_key}
        aws_secret: ${aws_secret}
        local_file: src/nyc-output-tests_linux-m82xc_n20-node_runtime_worker_thread.tgz
        remote_file: mongosh/binaries/${revision}/${revision_order_id}/nyc-output-tests_linux-m82xc_n20-node_runtime_worker_thread.tgz
        bucket: mciuploads
    - command: shell.exec
      params:
        working_dir: src
        shell: bash
        script: |
          set -e
          tar xvzf nyc-output-tests_linux-m82xc_n20-node_runtime_worker_thread.tgz
    - command: s3.get
      params:
        aws_key: ${aws_key}
        aws_secret: ${aws_secret}
        local_file: src/nyc-output-tests_linux-m82xc_n20-service_provider_node_driver.tgz
        remote_file: mongosh/binaries/${revision}/${revision_order_id}/nyc-output-tests_linux-m82xc_n20-service_provider_node_driver.tgz
        bucket: mciuploads
    - command: shell.exec
      params:
        working_dir: src
        shell: bash
        script: |
          set -e
          tar xvzf nyc-output-tests_linux-m82xc_n20-service_provider_node_driver.tgz
    - command: s3.get
      params:
        aws_key: ${aws_key}
        aws_secret: ${aws_secret}
        local_file: src/nyc-output-tests_linux-m82xc_n20-shell_api.tgz
        remote_file: mongosh/binaries/${revision}/${revision_order_id}/nyc-output-tests_linux-m82xc_n20-shell_api.tgz
        bucket: mciuploads
    - command: shell.exec
      params:
        working_dir: src
        shell: bash
        script: |
          set -e
          tar xvzf nyc-output-tests_linux-m82xc_n20-shell_api.tgz
    - command: s3.get
      params:
        aws_key: ${aws_key}
        aws_secret: ${aws_secret}
        local_file: src/nyc-output-tests_linux-m82xe_n20-cli_repl.tgz
        remote_file: mongosh/binaries/${revision}/${revision_order_id}/nyc-output-tests_linux-m82xe_n20-cli_repl.tgz
        bucket: mciuploads
    - command: shell.exec
      params:
        working_dir: src
        shell: bash
        script: |
          set -e
          tar xvzf nyc-output-tests_linux-m82xe_n20-cli_repl.tgz
    - command: s3.get
      params:
        aws_key: ${aws_key}
        aws_secret: ${aws_secret}
        local_file: src/nyc-output-tests_linux-m82xe_n20-e2e_tests.tgz
        remote_file: mongosh/binaries/${revision}/${revision_order_id}/nyc-output-tests_linux-m82xe_n20-e2e_tests.tgz
        bucket: mciuploads
    - command: shell.exec
      params:
        working_dir: src
        shell: bash
        script: |
          set -e
          tar xvzf nyc-output-tests_linux-m82xe_n20-e2e_tests.tgz
    - command: s3.get
      params:
        aws_key: ${aws_key}
        aws_secret: ${aws_secret}
        local_file: src/nyc-output-tests_linux-m82xe_n20-java_shell.tgz
        remote_file: mongosh/binaries/${revision}/${revision_order_id}/nyc-output-tests_linux-m82xe_n20-java_shell.tgz
        bucket: mciuploads
    - command: shell.exec
      params:
        working_dir: src
        shell: bash
        script: |
          set -e
          tar xvzf nyc-output-tests_linux-m82xe_n20-java_shell.tgz
    - command: s3.get
      params:
        aws_key: ${aws_key}
        aws_secret: ${aws_secret}
        local_file: src/nyc-output-tests_linux-m82xe_n20-node_runtime_worker_thread.tgz
        remote_file: mongosh/binaries/${revision}/${revision_order_id}/nyc-output-tests_linux-m82xe_n20-node_runtime_worker_thread.tgz
        bucket: mciuploads
    - command: shell.exec
      params:
        working_dir: src
        shell: bash
        script: |
          set -e
          tar xvzf nyc-output-tests_linux-m82xe_n20-node_runtime_worker_thread.tgz
    - command: s3.get
      params:
        aws_key: ${aws_key}
        aws_secret: ${aws_secret}
        local_file: src/nyc-output-tests_linux-m82xe_n20-service_provider_node_driver.tgz
        remote_file: mongosh/binaries/${revision}/${revision_order_id}/nyc-output-tests_linux-m82xe_n20-service_provider_node_driver.tgz
        bucket: mciuploads
    - command: shell.exec
      params:
        working_dir: src
        shell: bash
        script: |
          set -e
          tar xvzf nyc-output-tests_linux-m82xe_n20-service_provider_node_driver.tgz
    - command: s3.get
      params:
        aws_key: ${aws_key}
        aws_secret: ${aws_secret}
        local_file: src/nyc-output-tests_linux-m82xe_n20-shell_api.tgz
        remote_file: mongosh/binaries/${revision}/${revision_order_id}/nyc-output-tests_linux-m82xe_n20-shell_api.tgz
        bucket: mciuploads
    - command: shell.exec
      params:
        working_dir: src
        shell: bash
        script: |
          set -e
          tar xvzf nyc-output-tests_linux-m82xe_n20-shell_api.tgz
    - command: s3.get
      params:
        aws_key: ${aws_key}
        aws_secret: ${aws_secret}
        local_file: src/nyc-output-tests_linux-mlatest_n20-cli_repl.tgz
        remote_file: mongosh/binaries/${revision}/${revision_order_id}/nyc-output-tests_linux-mlatest_n20-cli_repl.tgz
        bucket: mciuploads
    - command: shell.exec
      params:
        working_dir: src
        shell: bash
        script: |
          set -e
          tar xvzf nyc-output-tests_linux-mlatest_n20-cli_repl.tgz
    - command: s3.get
      params:
        aws_key: ${aws_key}
        aws_secret: ${aws_secret}
        local_file: src/nyc-output-tests_linux-mlatest_n20-e2e_tests.tgz
        remote_file: mongosh/binaries/${revision}/${revision_order_id}/nyc-output-tests_linux-mlatest_n20-e2e_tests.tgz
        bucket: mciuploads
    - command: shell.exec
      params:
        working_dir: src
        shell: bash
        script: |
          set -e
          tar xvzf nyc-output-tests_linux-mlatest_n20-e2e_tests.tgz
    - command: s3.get
      params:
        aws_key: ${aws_key}
        aws_secret: ${aws_secret}
        local_file: src/nyc-output-tests_linux-mlatest_n20-java_shell.tgz
        remote_file: mongosh/binaries/${revision}/${revision_order_id}/nyc-output-tests_linux-mlatest_n20-java_shell.tgz
        bucket: mciuploads
    - command: shell.exec
      params:
        working_dir: src
        shell: bash
        script: |
          set -e
          tar xvzf nyc-output-tests_linux-mlatest_n20-java_shell.tgz
    - command: s3.get
      params:
        aws_key: ${aws_key}
        aws_secret: ${aws_secret}
        local_file: src/nyc-output-tests_linux-mlatest_n20-node_runtime_worker_thread.tgz
        remote_file: mongosh/binaries/${revision}/${revision_order_id}/nyc-output-tests_linux-mlatest_n20-node_runtime_worker_thread.tgz
        bucket: mciuploads
    - command: shell.exec
      params:
        working_dir: src
        shell: bash
        script: |
          set -e
          tar xvzf nyc-output-tests_linux-mlatest_n20-node_runtime_worker_thread.tgz
    - command: s3.get
      params:
        aws_key: ${aws_key}
        aws_secret: ${aws_secret}
        local_file: src/nyc-output-tests_linux-mlatest_n20-service_provider_node_driver.tgz
        remote_file: mongosh/binaries/${revision}/${revision_order_id}/nyc-output-tests_linux-mlatest_n20-service_provider_node_driver.tgz
        bucket: mciuploads
    - command: shell.exec
      params:
        working_dir: src
        shell: bash
        script: |
          set -e
          tar xvzf nyc-output-tests_linux-mlatest_n20-service_provider_node_driver.tgz
    - command: s3.get
      params:
        aws_key: ${aws_key}
        aws_secret: ${aws_secret}
        local_file: src/nyc-output-tests_linux-mlatest_n20-shell_api.tgz
        remote_file: mongosh/binaries/${revision}/${revision_order_id}/nyc-output-tests_linux-mlatest_n20-shell_api.tgz
        bucket: mciuploads
    - command: shell.exec
      params:
        working_dir: src
        shell: bash
        script: |
          set -e
          tar xvzf nyc-output-tests_linux-mlatest_n20-shell_api.tgz
    - command: s3.get
      params:
        aws_key: ${aws_key}
        aws_secret: ${aws_secret}
        local_file: src/nyc-output-win32-n20-arg_parser.tgz
        remote_file: mongosh/binaries/${revision}/${revision_order_id}/nyc-output-win32-n20-arg_parser.tgz
        bucket: mciuploads
    - command: shell.exec
      params:
        working_dir: src
        shell: bash
        script: |
          set -e
          tar xvzf nyc-output-win32-n20-arg_parser.tgz
    - command: s3.get
      params:
        aws_key: ${aws_key}
        aws_secret: ${aws_secret}
        local_file: src/nyc-output-win32-n20-async_rewriter2.tgz
        remote_file: mongosh/binaries/${revision}/${revision_order_id}/nyc-output-win32-n20-async_rewriter2.tgz
        bucket: mciuploads
    - command: shell.exec
      params:
        working_dir: src
        shell: bash
        script: |
          set -e
          tar xvzf nyc-output-win32-n20-async_rewriter2.tgz
    - command: s3.get
      params:
        aws_key: ${aws_key}
        aws_secret: ${aws_secret}
        local_file: src/nyc-output-win32-n20-autocomplete.tgz
        remote_file: mongosh/binaries/${revision}/${revision_order_id}/nyc-output-win32-n20-autocomplete.tgz
        bucket: mciuploads
    - command: shell.exec
      params:
        working_dir: src
        shell: bash
        script: |
          set -e
          tar xvzf nyc-output-win32-n20-autocomplete.tgz
    - command: s3.get
      params:
        aws_key: ${aws_key}
        aws_secret: ${aws_secret}
        local_file: src/nyc-output-win32-n20-browser_runtime_core.tgz
        remote_file: mongosh/binaries/${revision}/${revision_order_id}/nyc-output-win32-n20-browser_runtime_core.tgz
        bucket: mciuploads
    - command: shell.exec
      params:
        working_dir: src
        shell: bash
        script: |
          set -e
          tar xvzf nyc-output-win32-n20-browser_runtime_core.tgz
    - command: s3.get
      params:
        aws_key: ${aws_key}
        aws_secret: ${aws_secret}
        local_file: src/nyc-output-win32-n20-browser_runtime_electron.tgz
        remote_file: mongosh/binaries/${revision}/${revision_order_id}/nyc-output-win32-n20-browser_runtime_electron.tgz
        bucket: mciuploads
    - command: shell.exec
      params:
        working_dir: src
        shell: bash
        script: |
          set -e
          tar xvzf nyc-output-win32-n20-browser_runtime_electron.tgz
    - command: s3.get
      params:
        aws_key: ${aws_key}
        aws_secret: ${aws_secret}
        local_file: src/nyc-output-win32-n20-build.tgz
        remote_file: mongosh/binaries/${revision}/${revision_order_id}/nyc-output-win32-n20-build.tgz
        bucket: mciuploads
    - command: shell.exec
      params:
        working_dir: src
        shell: bash
        script: |
          set -e
          tar xvzf nyc-output-win32-n20-build.tgz
    - command: s3.get
      params:
        aws_key: ${aws_key}
        aws_secret: ${aws_secret}
        local_file: src/nyc-output-win32-n20-cli_repl.tgz
        remote_file: mongosh/binaries/${revision}/${revision_order_id}/nyc-output-win32-n20-cli_repl.tgz
        bucket: mciuploads
    - command: shell.exec
      params:
        working_dir: src
        shell: bash
        script: |
          set -e
          tar xvzf nyc-output-win32-n20-cli_repl.tgz
    - command: s3.get
      params:
        aws_key: ${aws_key}
        aws_secret: ${aws_secret}
        local_file: src/nyc-output-win32-n20-e2e_tests.tgz
        remote_file: mongosh/binaries/${revision}/${revision_order_id}/nyc-output-win32-n20-e2e_tests.tgz
        bucket: mciuploads
    - command: shell.exec
      params:
        working_dir: src
        shell: bash
        script: |
          set -e
          tar xvzf nyc-output-win32-n20-e2e_tests.tgz
    - command: s3.get
      params:
        aws_key: ${aws_key}
        aws_secret: ${aws_secret}
        local_file: src/nyc-output-win32-n20-editor.tgz
        remote_file: mongosh/binaries/${revision}/${revision_order_id}/nyc-output-win32-n20-editor.tgz
        bucket: mciuploads
    - command: shell.exec
      params:
        working_dir: src
        shell: bash
        script: |
          set -e
          tar xvzf nyc-output-win32-n20-editor.tgz
    - command: s3.get
      params:
        aws_key: ${aws_key}
        aws_secret: ${aws_secret}
        local_file: src/nyc-output-win32-n20-errors.tgz
        remote_file: mongosh/binaries/${revision}/${revision_order_id}/nyc-output-win32-n20-errors.tgz
        bucket: mciuploads
    - command: shell.exec
      params:
        working_dir: src
        shell: bash
        script: |
          set -e
          tar xvzf nyc-output-win32-n20-errors.tgz
    - command: s3.get
      params:
        aws_key: ${aws_key}
        aws_secret: ${aws_secret}
        local_file: src/nyc-output-win32-n20-history.tgz
        remote_file: mongosh/binaries/${revision}/${revision_order_id}/nyc-output-win32-n20-history.tgz
        bucket: mciuploads
    - command: shell.exec
      params:
        working_dir: src
        shell: bash
        script: |
          set -e
          tar xvzf nyc-output-win32-n20-history.tgz
    - command: s3.get
      params:
        aws_key: ${aws_key}
        aws_secret: ${aws_secret}
        local_file: src/nyc-output-win32-n20-i18n.tgz
        remote_file: mongosh/binaries/${revision}/${revision_order_id}/nyc-output-win32-n20-i18n.tgz
        bucket: mciuploads
    - command: shell.exec
      params:
        working_dir: src
        shell: bash
        script: |
          set -e
          tar xvzf nyc-output-win32-n20-i18n.tgz
    - command: s3.get
      params:
        aws_key: ${aws_key}
        aws_secret: ${aws_secret}
        local_file: src/nyc-output-win32-n20-js_multiline_to_singleline.tgz
        remote_file: mongosh/binaries/${revision}/${revision_order_id}/nyc-output-win32-n20-js_multiline_to_singleline.tgz
        bucket: mciuploads
    - command: shell.exec
      params:
        working_dir: src
        shell: bash
        script: |
          set -e
          tar xvzf nyc-output-win32-n20-js_multiline_to_singleline.tgz
    - command: s3.get
      params:
        aws_key: ${aws_key}
        aws_secret: ${aws_secret}
        local_file: src/nyc-output-win32-n20-logging.tgz
        remote_file: mongosh/binaries/${revision}/${revision_order_id}/nyc-output-win32-n20-logging.tgz
        bucket: mciuploads
    - command: shell.exec
      params:
        working_dir: src
        shell: bash
        script: |
          set -e
          tar xvzf nyc-output-win32-n20-logging.tgz
    - command: s3.get
      params:
        aws_key: ${aws_key}
        aws_secret: ${aws_secret}
        local_file: src/nyc-output-win32-n20-node_runtime_worker_thread.tgz
        remote_file: mongosh/binaries/${revision}/${revision_order_id}/nyc-output-win32-n20-node_runtime_worker_thread.tgz
        bucket: mciuploads
    - command: shell.exec
      params:
        working_dir: src
        shell: bash
        script: |
          set -e
          tar xvzf nyc-output-win32-n20-node_runtime_worker_thread.tgz
    - command: s3.get
      params:
        aws_key: ${aws_key}
        aws_secret: ${aws_secret}
        local_file: src/nyc-output-win32-n20-service_provider_core.tgz
        remote_file: mongosh/binaries/${revision}/${revision_order_id}/nyc-output-win32-n20-service_provider_core.tgz
        bucket: mciuploads
    - command: shell.exec
      params:
        working_dir: src
        shell: bash
        script: |
          set -e
          tar xvzf nyc-output-win32-n20-service_provider_core.tgz
    - command: s3.get
      params:
        aws_key: ${aws_key}
        aws_secret: ${aws_secret}
        local_file: src/nyc-output-win32-n20-service_provider_node_driver.tgz
        remote_file: mongosh/binaries/${revision}/${revision_order_id}/nyc-output-win32-n20-service_provider_node_driver.tgz
        bucket: mciuploads
    - command: shell.exec
      params:
        working_dir: src
        shell: bash
        script: |
          set -e
          tar xvzf nyc-output-win32-n20-service_provider_node_driver.tgz
    - command: s3.get
      params:
        aws_key: ${aws_key}
        aws_secret: ${aws_secret}
        local_file: src/nyc-output-win32-n20-shell_api.tgz
        remote_file: mongosh/binaries/${revision}/${revision_order_id}/nyc-output-win32-n20-shell_api.tgz
        bucket: mciuploads
    - command: shell.exec
      params:
        working_dir: src
        shell: bash
        script: |
          set -e
          tar xvzf nyc-output-win32-n20-shell_api.tgz
    - command: s3.get
      params:
        aws_key: ${aws_key}
        aws_secret: ${aws_secret}
        local_file: src/nyc-output-win32-n20-shell_bson.tgz
        remote_file: mongosh/binaries/${revision}/${revision_order_id}/nyc-output-win32-n20-shell_bson.tgz
        bucket: mciuploads
    - command: shell.exec
      params:
        working_dir: src
        shell: bash
        script: |
          set -e
          tar xvzf nyc-output-win32-n20-shell_bson.tgz
    - command: s3.get
      params:
        aws_key: ${aws_key}
        aws_secret: ${aws_secret}
        local_file: src/nyc-output-win32-n20-shell_evaluator.tgz
        remote_file: mongosh/binaries/${revision}/${revision_order_id}/nyc-output-win32-n20-shell_evaluator.tgz
        bucket: mciuploads
    - command: shell.exec
      params:
        working_dir: src
        shell: bash
        script: |
          set -e
          tar xvzf nyc-output-win32-n20-shell_evaluator.tgz
    - command: s3.get
      params:
        aws_key: ${aws_key}
        aws_secret: ${aws_secret}
        local_file: src/nyc-output-win32-n20-snippet_manager.tgz
        remote_file: mongosh/binaries/${revision}/${revision_order_id}/nyc-output-win32-n20-snippet_manager.tgz
        bucket: mciuploads
    - command: shell.exec
      params:
        working_dir: src
        shell: bash
        script: |
          set -e
          tar xvzf nyc-output-win32-n20-snippet_manager.tgz
    - command: s3.get
      params:
        aws_key: ${aws_key}
        aws_secret: ${aws_secret}
        local_file: src/nyc-output-win32-n20-types.tgz
        remote_file: mongosh/binaries/${revision}/${revision_order_id}/nyc-output-win32-n20-types.tgz
        bucket: mciuploads
    - command: shell.exec
      params:
        working_dir: src
        shell: bash
        script: |
          set -e
          tar xvzf nyc-output-win32-n20-types.tgz
    - command: s3.get
      params:
        aws_key: ${aws_key}
        aws_secret: ${aws_secret}
        local_file: src/nyc-output-tests_win32-m42xc_n20-cli_repl.tgz
        remote_file: mongosh/binaries/${revision}/${revision_order_id}/nyc-output-tests_win32-m42xc_n20-cli_repl.tgz
        bucket: mciuploads
    - command: shell.exec
      params:
        working_dir: src
        shell: bash
        script: |
          set -e
          tar xvzf nyc-output-tests_win32-m42xc_n20-cli_repl.tgz
    - command: s3.get
      params:
        aws_key: ${aws_key}
        aws_secret: ${aws_secret}
        local_file: src/nyc-output-tests_win32-m42xc_n20-e2e_tests.tgz
        remote_file: mongosh/binaries/${revision}/${revision_order_id}/nyc-output-tests_win32-m42xc_n20-e2e_tests.tgz
        bucket: mciuploads
    - command: shell.exec
      params:
        working_dir: src
        shell: bash
        script: |
          set -e
          tar xvzf nyc-output-tests_win32-m42xc_n20-e2e_tests.tgz
    - command: s3.get
      params:
        aws_key: ${aws_key}
        aws_secret: ${aws_secret}
        local_file: src/nyc-output-tests_win32-m42xc_n20-node_runtime_worker_thread.tgz
        remote_file: mongosh/binaries/${revision}/${revision_order_id}/nyc-output-tests_win32-m42xc_n20-node_runtime_worker_thread.tgz
        bucket: mciuploads
    - command: shell.exec
      params:
        working_dir: src
        shell: bash
        script: |
          set -e
          tar xvzf nyc-output-tests_win32-m42xc_n20-node_runtime_worker_thread.tgz
    - command: s3.get
      params:
        aws_key: ${aws_key}
        aws_secret: ${aws_secret}
        local_file: src/nyc-output-tests_win32-m42xc_n20-service_provider_node_driver.tgz
        remote_file: mongosh/binaries/${revision}/${revision_order_id}/nyc-output-tests_win32-m42xc_n20-service_provider_node_driver.tgz
        bucket: mciuploads
    - command: shell.exec
      params:
        working_dir: src
        shell: bash
        script: |
          set -e
          tar xvzf nyc-output-tests_win32-m42xc_n20-service_provider_node_driver.tgz
    - command: s3.get
      params:
        aws_key: ${aws_key}
        aws_secret: ${aws_secret}
        local_file: src/nyc-output-tests_win32-m42xc_n20-shell_api.tgz
        remote_file: mongosh/binaries/${revision}/${revision_order_id}/nyc-output-tests_win32-m42xc_n20-shell_api.tgz
        bucket: mciuploads
    - command: shell.exec
      params:
        working_dir: src
        shell: bash
        script: |
          set -e
          tar xvzf nyc-output-tests_win32-m42xc_n20-shell_api.tgz
    - command: s3.get
      params:
        aws_key: ${aws_key}
        aws_secret: ${aws_secret}
        local_file: src/nyc-output-tests_win32-m42xe_n20-cli_repl.tgz
        remote_file: mongosh/binaries/${revision}/${revision_order_id}/nyc-output-tests_win32-m42xe_n20-cli_repl.tgz
        bucket: mciuploads
    - command: shell.exec
      params:
        working_dir: src
        shell: bash
        script: |
          set -e
          tar xvzf nyc-output-tests_win32-m42xe_n20-cli_repl.tgz
    - command: s3.get
      params:
        aws_key: ${aws_key}
        aws_secret: ${aws_secret}
        local_file: src/nyc-output-tests_win32-m42xe_n20-e2e_tests.tgz
        remote_file: mongosh/binaries/${revision}/${revision_order_id}/nyc-output-tests_win32-m42xe_n20-e2e_tests.tgz
        bucket: mciuploads
    - command: shell.exec
      params:
        working_dir: src
        shell: bash
        script: |
          set -e
          tar xvzf nyc-output-tests_win32-m42xe_n20-e2e_tests.tgz
    - command: s3.get
      params:
        aws_key: ${aws_key}
        aws_secret: ${aws_secret}
        local_file: src/nyc-output-tests_win32-m42xe_n20-node_runtime_worker_thread.tgz
        remote_file: mongosh/binaries/${revision}/${revision_order_id}/nyc-output-tests_win32-m42xe_n20-node_runtime_worker_thread.tgz
        bucket: mciuploads
    - command: shell.exec
      params:
        working_dir: src
        shell: bash
        script: |
          set -e
          tar xvzf nyc-output-tests_win32-m42xe_n20-node_runtime_worker_thread.tgz
    - command: s3.get
      params:
        aws_key: ${aws_key}
        aws_secret: ${aws_secret}
        local_file: src/nyc-output-tests_win32-m42xe_n20-service_provider_node_driver.tgz
        remote_file: mongosh/binaries/${revision}/${revision_order_id}/nyc-output-tests_win32-m42xe_n20-service_provider_node_driver.tgz
        bucket: mciuploads
    - command: shell.exec
      params:
        working_dir: src
        shell: bash
        script: |
          set -e
          tar xvzf nyc-output-tests_win32-m42xe_n20-service_provider_node_driver.tgz
    - command: s3.get
      params:
        aws_key: ${aws_key}
        aws_secret: ${aws_secret}
        local_file: src/nyc-output-tests_win32-m42xe_n20-shell_api.tgz
        remote_file: mongosh/binaries/${revision}/${revision_order_id}/nyc-output-tests_win32-m42xe_n20-shell_api.tgz
        bucket: mciuploads
    - command: shell.exec
      params:
        working_dir: src
        shell: bash
        script: |
          set -e
          tar xvzf nyc-output-tests_win32-m42xe_n20-shell_api.tgz
    - command: s3.get
      params:
        aws_key: ${aws_key}
        aws_secret: ${aws_secret}
        local_file: src/nyc-output-tests_win32-m44xc_n20-cli_repl.tgz
        remote_file: mongosh/binaries/${revision}/${revision_order_id}/nyc-output-tests_win32-m44xc_n20-cli_repl.tgz
        bucket: mciuploads
    - command: shell.exec
      params:
        working_dir: src
        shell: bash
        script: |
          set -e
          tar xvzf nyc-output-tests_win32-m44xc_n20-cli_repl.tgz
    - command: s3.get
      params:
        aws_key: ${aws_key}
        aws_secret: ${aws_secret}
        local_file: src/nyc-output-tests_win32-m44xc_n20-e2e_tests.tgz
        remote_file: mongosh/binaries/${revision}/${revision_order_id}/nyc-output-tests_win32-m44xc_n20-e2e_tests.tgz
        bucket: mciuploads
    - command: shell.exec
      params:
        working_dir: src
        shell: bash
        script: |
          set -e
          tar xvzf nyc-output-tests_win32-m44xc_n20-e2e_tests.tgz
    - command: s3.get
      params:
        aws_key: ${aws_key}
        aws_secret: ${aws_secret}
        local_file: src/nyc-output-tests_win32-m44xc_n20-node_runtime_worker_thread.tgz
        remote_file: mongosh/binaries/${revision}/${revision_order_id}/nyc-output-tests_win32-m44xc_n20-node_runtime_worker_thread.tgz
        bucket: mciuploads
    - command: shell.exec
      params:
        working_dir: src
        shell: bash
        script: |
          set -e
          tar xvzf nyc-output-tests_win32-m44xc_n20-node_runtime_worker_thread.tgz
    - command: s3.get
      params:
        aws_key: ${aws_key}
        aws_secret: ${aws_secret}
        local_file: src/nyc-output-tests_win32-m44xc_n20-service_provider_node_driver.tgz
        remote_file: mongosh/binaries/${revision}/${revision_order_id}/nyc-output-tests_win32-m44xc_n20-service_provider_node_driver.tgz
        bucket: mciuploads
    - command: shell.exec
      params:
        working_dir: src
        shell: bash
        script: |
          set -e
          tar xvzf nyc-output-tests_win32-m44xc_n20-service_provider_node_driver.tgz
    - command: s3.get
      params:
        aws_key: ${aws_key}
        aws_secret: ${aws_secret}
        local_file: src/nyc-output-tests_win32-m44xc_n20-shell_api.tgz
        remote_file: mongosh/binaries/${revision}/${revision_order_id}/nyc-output-tests_win32-m44xc_n20-shell_api.tgz
        bucket: mciuploads
    - command: shell.exec
      params:
        working_dir: src
        shell: bash
        script: |
          set -e
          tar xvzf nyc-output-tests_win32-m44xc_n20-shell_api.tgz
    - command: s3.get
      params:
        aws_key: ${aws_key}
        aws_secret: ${aws_secret}
        local_file: src/nyc-output-tests_win32-m44xe_n20-cli_repl.tgz
        remote_file: mongosh/binaries/${revision}/${revision_order_id}/nyc-output-tests_win32-m44xe_n20-cli_repl.tgz
        bucket: mciuploads
    - command: shell.exec
      params:
        working_dir: src
        shell: bash
        script: |
          set -e
          tar xvzf nyc-output-tests_win32-m44xe_n20-cli_repl.tgz
    - command: s3.get
      params:
        aws_key: ${aws_key}
        aws_secret: ${aws_secret}
        local_file: src/nyc-output-tests_win32-m44xe_n20-e2e_tests.tgz
        remote_file: mongosh/binaries/${revision}/${revision_order_id}/nyc-output-tests_win32-m44xe_n20-e2e_tests.tgz
        bucket: mciuploads
    - command: shell.exec
      params:
        working_dir: src
        shell: bash
        script: |
          set -e
          tar xvzf nyc-output-tests_win32-m44xe_n20-e2e_tests.tgz
    - command: s3.get
      params:
        aws_key: ${aws_key}
        aws_secret: ${aws_secret}
        local_file: src/nyc-output-tests_win32-m44xe_n20-node_runtime_worker_thread.tgz
        remote_file: mongosh/binaries/${revision}/${revision_order_id}/nyc-output-tests_win32-m44xe_n20-node_runtime_worker_thread.tgz
        bucket: mciuploads
    - command: shell.exec
      params:
        working_dir: src
        shell: bash
        script: |
          set -e
          tar xvzf nyc-output-tests_win32-m44xe_n20-node_runtime_worker_thread.tgz
    - command: s3.get
      params:
        aws_key: ${aws_key}
        aws_secret: ${aws_secret}
        local_file: src/nyc-output-tests_win32-m44xe_n20-service_provider_node_driver.tgz
        remote_file: mongosh/binaries/${revision}/${revision_order_id}/nyc-output-tests_win32-m44xe_n20-service_provider_node_driver.tgz
        bucket: mciuploads
    - command: shell.exec
      params:
        working_dir: src
        shell: bash
        script: |
          set -e
          tar xvzf nyc-output-tests_win32-m44xe_n20-service_provider_node_driver.tgz
    - command: s3.get
      params:
        aws_key: ${aws_key}
        aws_secret: ${aws_secret}
        local_file: src/nyc-output-tests_win32-m44xe_n20-shell_api.tgz
        remote_file: mongosh/binaries/${revision}/${revision_order_id}/nyc-output-tests_win32-m44xe_n20-shell_api.tgz
        bucket: mciuploads
    - command: shell.exec
      params:
        working_dir: src
        shell: bash
        script: |
          set -e
          tar xvzf nyc-output-tests_win32-m44xe_n20-shell_api.tgz
    - command: s3.get
      params:
        aws_key: ${aws_key}
        aws_secret: ${aws_secret}
        local_file: src/nyc-output-tests_win32-m50xc_n20-cli_repl.tgz
        remote_file: mongosh/binaries/${revision}/${revision_order_id}/nyc-output-tests_win32-m50xc_n20-cli_repl.tgz
        bucket: mciuploads
    - command: shell.exec
      params:
        working_dir: src
        shell: bash
        script: |
          set -e
          tar xvzf nyc-output-tests_win32-m50xc_n20-cli_repl.tgz
    - command: s3.get
      params:
        aws_key: ${aws_key}
        aws_secret: ${aws_secret}
        local_file: src/nyc-output-tests_win32-m50xc_n20-e2e_tests.tgz
        remote_file: mongosh/binaries/${revision}/${revision_order_id}/nyc-output-tests_win32-m50xc_n20-e2e_tests.tgz
        bucket: mciuploads
    - command: shell.exec
      params:
        working_dir: src
        shell: bash
        script: |
          set -e
          tar xvzf nyc-output-tests_win32-m50xc_n20-e2e_tests.tgz
    - command: s3.get
      params:
        aws_key: ${aws_key}
        aws_secret: ${aws_secret}
        local_file: src/nyc-output-tests_win32-m50xc_n20-node_runtime_worker_thread.tgz
        remote_file: mongosh/binaries/${revision}/${revision_order_id}/nyc-output-tests_win32-m50xc_n20-node_runtime_worker_thread.tgz
        bucket: mciuploads
    - command: shell.exec
      params:
        working_dir: src
        shell: bash
        script: |
          set -e
          tar xvzf nyc-output-tests_win32-m50xc_n20-node_runtime_worker_thread.tgz
    - command: s3.get
      params:
        aws_key: ${aws_key}
        aws_secret: ${aws_secret}
        local_file: src/nyc-output-tests_win32-m50xc_n20-service_provider_node_driver.tgz
        remote_file: mongosh/binaries/${revision}/${revision_order_id}/nyc-output-tests_win32-m50xc_n20-service_provider_node_driver.tgz
        bucket: mciuploads
    - command: shell.exec
      params:
        working_dir: src
        shell: bash
        script: |
          set -e
          tar xvzf nyc-output-tests_win32-m50xc_n20-service_provider_node_driver.tgz
    - command: s3.get
      params:
        aws_key: ${aws_key}
        aws_secret: ${aws_secret}
        local_file: src/nyc-output-tests_win32-m50xc_n20-shell_api.tgz
        remote_file: mongosh/binaries/${revision}/${revision_order_id}/nyc-output-tests_win32-m50xc_n20-shell_api.tgz
        bucket: mciuploads
    - command: shell.exec
      params:
        working_dir: src
        shell: bash
        script: |
          set -e
          tar xvzf nyc-output-tests_win32-m50xc_n20-shell_api.tgz
    - command: s3.get
      params:
        aws_key: ${aws_key}
        aws_secret: ${aws_secret}
        local_file: src/nyc-output-tests_win32-m50xe_n20-cli_repl.tgz
        remote_file: mongosh/binaries/${revision}/${revision_order_id}/nyc-output-tests_win32-m50xe_n20-cli_repl.tgz
        bucket: mciuploads
    - command: shell.exec
      params:
        working_dir: src
        shell: bash
        script: |
          set -e
          tar xvzf nyc-output-tests_win32-m50xe_n20-cli_repl.tgz
    - command: s3.get
      params:
        aws_key: ${aws_key}
        aws_secret: ${aws_secret}
        local_file: src/nyc-output-tests_win32-m50xe_n20-e2e_tests.tgz
        remote_file: mongosh/binaries/${revision}/${revision_order_id}/nyc-output-tests_win32-m50xe_n20-e2e_tests.tgz
        bucket: mciuploads
    - command: shell.exec
      params:
        working_dir: src
        shell: bash
        script: |
          set -e
          tar xvzf nyc-output-tests_win32-m50xe_n20-e2e_tests.tgz
    - command: s3.get
      params:
        aws_key: ${aws_key}
        aws_secret: ${aws_secret}
        local_file: src/nyc-output-tests_win32-m50xe_n20-node_runtime_worker_thread.tgz
        remote_file: mongosh/binaries/${revision}/${revision_order_id}/nyc-output-tests_win32-m50xe_n20-node_runtime_worker_thread.tgz
        bucket: mciuploads
    - command: shell.exec
      params:
        working_dir: src
        shell: bash
        script: |
          set -e
          tar xvzf nyc-output-tests_win32-m50xe_n20-node_runtime_worker_thread.tgz
    - command: s3.get
      params:
        aws_key: ${aws_key}
        aws_secret: ${aws_secret}
        local_file: src/nyc-output-tests_win32-m50xe_n20-service_provider_node_driver.tgz
        remote_file: mongosh/binaries/${revision}/${revision_order_id}/nyc-output-tests_win32-m50xe_n20-service_provider_node_driver.tgz
        bucket: mciuploads
    - command: shell.exec
      params:
        working_dir: src
        shell: bash
        script: |
          set -e
          tar xvzf nyc-output-tests_win32-m50xe_n20-service_provider_node_driver.tgz
    - command: s3.get
      params:
        aws_key: ${aws_key}
        aws_secret: ${aws_secret}
        local_file: src/nyc-output-tests_win32-m50xe_n20-shell_api.tgz
        remote_file: mongosh/binaries/${revision}/${revision_order_id}/nyc-output-tests_win32-m50xe_n20-shell_api.tgz
        bucket: mciuploads
    - command: shell.exec
      params:
        working_dir: src
        shell: bash
        script: |
          set -e
          tar xvzf nyc-output-tests_win32-m50xe_n20-shell_api.tgz
    - command: s3.get
      params:
        aws_key: ${aws_key}
        aws_secret: ${aws_secret}
        local_file: src/nyc-output-tests_win32-m60xc_n20-cli_repl.tgz
        remote_file: mongosh/binaries/${revision}/${revision_order_id}/nyc-output-tests_win32-m60xc_n20-cli_repl.tgz
        bucket: mciuploads
    - command: shell.exec
      params:
        working_dir: src
        shell: bash
        script: |
          set -e
          tar xvzf nyc-output-tests_win32-m60xc_n20-cli_repl.tgz
    - command: s3.get
      params:
        aws_key: ${aws_key}
        aws_secret: ${aws_secret}
        local_file: src/nyc-output-tests_win32-m60xc_n20-e2e_tests.tgz
        remote_file: mongosh/binaries/${revision}/${revision_order_id}/nyc-output-tests_win32-m60xc_n20-e2e_tests.tgz
        bucket: mciuploads
    - command: shell.exec
      params:
        working_dir: src
        shell: bash
        script: |
          set -e
          tar xvzf nyc-output-tests_win32-m60xc_n20-e2e_tests.tgz
    - command: s3.get
      params:
        aws_key: ${aws_key}
        aws_secret: ${aws_secret}
        local_file: src/nyc-output-tests_win32-m60xc_n20-node_runtime_worker_thread.tgz
        remote_file: mongosh/binaries/${revision}/${revision_order_id}/nyc-output-tests_win32-m60xc_n20-node_runtime_worker_thread.tgz
        bucket: mciuploads
    - command: shell.exec
      params:
        working_dir: src
        shell: bash
        script: |
          set -e
          tar xvzf nyc-output-tests_win32-m60xc_n20-node_runtime_worker_thread.tgz
    - command: s3.get
      params:
        aws_key: ${aws_key}
        aws_secret: ${aws_secret}
        local_file: src/nyc-output-tests_win32-m60xc_n20-service_provider_node_driver.tgz
        remote_file: mongosh/binaries/${revision}/${revision_order_id}/nyc-output-tests_win32-m60xc_n20-service_provider_node_driver.tgz
        bucket: mciuploads
    - command: shell.exec
      params:
        working_dir: src
        shell: bash
        script: |
          set -e
          tar xvzf nyc-output-tests_win32-m60xc_n20-service_provider_node_driver.tgz
    - command: s3.get
      params:
        aws_key: ${aws_key}
        aws_secret: ${aws_secret}
        local_file: src/nyc-output-tests_win32-m60xc_n20-shell_api.tgz
        remote_file: mongosh/binaries/${revision}/${revision_order_id}/nyc-output-tests_win32-m60xc_n20-shell_api.tgz
        bucket: mciuploads
    - command: shell.exec
      params:
        working_dir: src
        shell: bash
        script: |
          set -e
          tar xvzf nyc-output-tests_win32-m60xc_n20-shell_api.tgz
    - command: s3.get
      params:
        aws_key: ${aws_key}
        aws_secret: ${aws_secret}
        local_file: src/nyc-output-tests_win32-m60xe_n20-cli_repl.tgz
        remote_file: mongosh/binaries/${revision}/${revision_order_id}/nyc-output-tests_win32-m60xe_n20-cli_repl.tgz
        bucket: mciuploads
    - command: shell.exec
      params:
        working_dir: src
        shell: bash
        script: |
          set -e
          tar xvzf nyc-output-tests_win32-m60xe_n20-cli_repl.tgz
    - command: s3.get
      params:
        aws_key: ${aws_key}
        aws_secret: ${aws_secret}
        local_file: src/nyc-output-tests_win32-m60xe_n20-e2e_tests.tgz
        remote_file: mongosh/binaries/${revision}/${revision_order_id}/nyc-output-tests_win32-m60xe_n20-e2e_tests.tgz
        bucket: mciuploads
    - command: shell.exec
      params:
        working_dir: src
        shell: bash
        script: |
          set -e
          tar xvzf nyc-output-tests_win32-m60xe_n20-e2e_tests.tgz
    - command: s3.get
      params:
        aws_key: ${aws_key}
        aws_secret: ${aws_secret}
        local_file: src/nyc-output-tests_win32-m60xe_n20-node_runtime_worker_thread.tgz
        remote_file: mongosh/binaries/${revision}/${revision_order_id}/nyc-output-tests_win32-m60xe_n20-node_runtime_worker_thread.tgz
        bucket: mciuploads
    - command: shell.exec
      params:
        working_dir: src
        shell: bash
        script: |
          set -e
          tar xvzf nyc-output-tests_win32-m60xe_n20-node_runtime_worker_thread.tgz
    - command: s3.get
      params:
        aws_key: ${aws_key}
        aws_secret: ${aws_secret}
        local_file: src/nyc-output-tests_win32-m60xe_n20-service_provider_node_driver.tgz
        remote_file: mongosh/binaries/${revision}/${revision_order_id}/nyc-output-tests_win32-m60xe_n20-service_provider_node_driver.tgz
        bucket: mciuploads
    - command: shell.exec
      params:
        working_dir: src
        shell: bash
        script: |
          set -e
          tar xvzf nyc-output-tests_win32-m60xe_n20-service_provider_node_driver.tgz
    - command: s3.get
      params:
        aws_key: ${aws_key}
        aws_secret: ${aws_secret}
        local_file: src/nyc-output-tests_win32-m60xe_n20-shell_api.tgz
        remote_file: mongosh/binaries/${revision}/${revision_order_id}/nyc-output-tests_win32-m60xe_n20-shell_api.tgz
        bucket: mciuploads
    - command: shell.exec
      params:
        working_dir: src
        shell: bash
        script: |
          set -e
          tar xvzf nyc-output-tests_win32-m60xe_n20-shell_api.tgz
    - command: s3.get
      params:
        aws_key: ${aws_key}
        aws_secret: ${aws_secret}
        local_file: src/nyc-output-tests_win32-m70xc_n20-cli_repl.tgz
        remote_file: mongosh/binaries/${revision}/${revision_order_id}/nyc-output-tests_win32-m70xc_n20-cli_repl.tgz
        bucket: mciuploads
    - command: shell.exec
      params:
        working_dir: src
        shell: bash
        script: |
          set -e
          tar xvzf nyc-output-tests_win32-m70xc_n20-cli_repl.tgz
    - command: s3.get
      params:
        aws_key: ${aws_key}
        aws_secret: ${aws_secret}
        local_file: src/nyc-output-tests_win32-m70xc_n20-e2e_tests.tgz
        remote_file: mongosh/binaries/${revision}/${revision_order_id}/nyc-output-tests_win32-m70xc_n20-e2e_tests.tgz
        bucket: mciuploads
    - command: shell.exec
      params:
        working_dir: src
        shell: bash
        script: |
          set -e
          tar xvzf nyc-output-tests_win32-m70xc_n20-e2e_tests.tgz
    - command: s3.get
      params:
        aws_key: ${aws_key}
        aws_secret: ${aws_secret}
        local_file: src/nyc-output-tests_win32-m70xc_n20-node_runtime_worker_thread.tgz
        remote_file: mongosh/binaries/${revision}/${revision_order_id}/nyc-output-tests_win32-m70xc_n20-node_runtime_worker_thread.tgz
        bucket: mciuploads
    - command: shell.exec
      params:
        working_dir: src
        shell: bash
        script: |
          set -e
          tar xvzf nyc-output-tests_win32-m70xc_n20-node_runtime_worker_thread.tgz
    - command: s3.get
      params:
        aws_key: ${aws_key}
        aws_secret: ${aws_secret}
        local_file: src/nyc-output-tests_win32-m70xc_n20-service_provider_node_driver.tgz
        remote_file: mongosh/binaries/${revision}/${revision_order_id}/nyc-output-tests_win32-m70xc_n20-service_provider_node_driver.tgz
        bucket: mciuploads
    - command: shell.exec
      params:
        working_dir: src
        shell: bash
        script: |
          set -e
          tar xvzf nyc-output-tests_win32-m70xc_n20-service_provider_node_driver.tgz
    - command: s3.get
      params:
        aws_key: ${aws_key}
        aws_secret: ${aws_secret}
        local_file: src/nyc-output-tests_win32-m70xc_n20-shell_api.tgz
        remote_file: mongosh/binaries/${revision}/${revision_order_id}/nyc-output-tests_win32-m70xc_n20-shell_api.tgz
        bucket: mciuploads
    - command: shell.exec
      params:
        working_dir: src
        shell: bash
        script: |
          set -e
          tar xvzf nyc-output-tests_win32-m70xc_n20-shell_api.tgz
    - command: s3.get
      params:
        aws_key: ${aws_key}
        aws_secret: ${aws_secret}
        local_file: src/nyc-output-tests_win32-m70xe_n20-cli_repl.tgz
        remote_file: mongosh/binaries/${revision}/${revision_order_id}/nyc-output-tests_win32-m70xe_n20-cli_repl.tgz
        bucket: mciuploads
    - command: shell.exec
      params:
        working_dir: src
        shell: bash
        script: |
          set -e
          tar xvzf nyc-output-tests_win32-m70xe_n20-cli_repl.tgz
    - command: s3.get
      params:
        aws_key: ${aws_key}
        aws_secret: ${aws_secret}
        local_file: src/nyc-output-tests_win32-m70xe_n20-e2e_tests.tgz
        remote_file: mongosh/binaries/${revision}/${revision_order_id}/nyc-output-tests_win32-m70xe_n20-e2e_tests.tgz
        bucket: mciuploads
    - command: shell.exec
      params:
        working_dir: src
        shell: bash
        script: |
          set -e
          tar xvzf nyc-output-tests_win32-m70xe_n20-e2e_tests.tgz
    - command: s3.get
      params:
        aws_key: ${aws_key}
        aws_secret: ${aws_secret}
        local_file: src/nyc-output-tests_win32-m70xe_n20-node_runtime_worker_thread.tgz
        remote_file: mongosh/binaries/${revision}/${revision_order_id}/nyc-output-tests_win32-m70xe_n20-node_runtime_worker_thread.tgz
        bucket: mciuploads
    - command: shell.exec
      params:
        working_dir: src
        shell: bash
        script: |
          set -e
          tar xvzf nyc-output-tests_win32-m70xe_n20-node_runtime_worker_thread.tgz
    - command: s3.get
      params:
        aws_key: ${aws_key}
        aws_secret: ${aws_secret}
        local_file: src/nyc-output-tests_win32-m70xe_n20-service_provider_node_driver.tgz
        remote_file: mongosh/binaries/${revision}/${revision_order_id}/nyc-output-tests_win32-m70xe_n20-service_provider_node_driver.tgz
        bucket: mciuploads
    - command: shell.exec
      params:
        working_dir: src
        shell: bash
        script: |
          set -e
          tar xvzf nyc-output-tests_win32-m70xe_n20-service_provider_node_driver.tgz
    - command: s3.get
      params:
        aws_key: ${aws_key}
        aws_secret: ${aws_secret}
        local_file: src/nyc-output-tests_win32-m70xe_n20-shell_api.tgz
        remote_file: mongosh/binaries/${revision}/${revision_order_id}/nyc-output-tests_win32-m70xe_n20-shell_api.tgz
        bucket: mciuploads
    - command: shell.exec
      params:
        working_dir: src
        shell: bash
        script: |
          set -e
          tar xvzf nyc-output-tests_win32-m70xe_n20-shell_api.tgz
    - command: s3.get
      params:
        aws_key: ${aws_key}
        aws_secret: ${aws_secret}
        local_file: src/nyc-output-tests_win32-m80xc_n20-cli_repl.tgz
        remote_file: mongosh/binaries/${revision}/${revision_order_id}/nyc-output-tests_win32-m80xc_n20-cli_repl.tgz
        bucket: mciuploads
    - command: shell.exec
      params:
        working_dir: src
        shell: bash
        script: |
          set -e
          tar xvzf nyc-output-tests_win32-m80xc_n20-cli_repl.tgz
    - command: s3.get
      params:
        aws_key: ${aws_key}
        aws_secret: ${aws_secret}
        local_file: src/nyc-output-tests_win32-m80xc_n20-e2e_tests.tgz
        remote_file: mongosh/binaries/${revision}/${revision_order_id}/nyc-output-tests_win32-m80xc_n20-e2e_tests.tgz
        bucket: mciuploads
    - command: shell.exec
      params:
        working_dir: src
        shell: bash
        script: |
          set -e
          tar xvzf nyc-output-tests_win32-m80xc_n20-e2e_tests.tgz
    - command: s3.get
      params:
        aws_key: ${aws_key}
        aws_secret: ${aws_secret}
        local_file: src/nyc-output-tests_win32-m80xc_n20-node_runtime_worker_thread.tgz
        remote_file: mongosh/binaries/${revision}/${revision_order_id}/nyc-output-tests_win32-m80xc_n20-node_runtime_worker_thread.tgz
        bucket: mciuploads
    - command: shell.exec
      params:
        working_dir: src
        shell: bash
        script: |
          set -e
          tar xvzf nyc-output-tests_win32-m80xc_n20-node_runtime_worker_thread.tgz
    - command: s3.get
      params:
        aws_key: ${aws_key}
        aws_secret: ${aws_secret}
        local_file: src/nyc-output-tests_win32-m80xc_n20-service_provider_node_driver.tgz
        remote_file: mongosh/binaries/${revision}/${revision_order_id}/nyc-output-tests_win32-m80xc_n20-service_provider_node_driver.tgz
        bucket: mciuploads
    - command: shell.exec
      params:
        working_dir: src
        shell: bash
        script: |
          set -e
          tar xvzf nyc-output-tests_win32-m80xc_n20-service_provider_node_driver.tgz
    - command: s3.get
      params:
        aws_key: ${aws_key}
        aws_secret: ${aws_secret}
        local_file: src/nyc-output-tests_win32-m80xc_n20-shell_api.tgz
        remote_file: mongosh/binaries/${revision}/${revision_order_id}/nyc-output-tests_win32-m80xc_n20-shell_api.tgz
        bucket: mciuploads
    - command: shell.exec
      params:
        working_dir: src
        shell: bash
        script: |
          set -e
          tar xvzf nyc-output-tests_win32-m80xc_n20-shell_api.tgz
    - command: s3.get
      params:
        aws_key: ${aws_key}
        aws_secret: ${aws_secret}
        local_file: src/nyc-output-tests_win32-m80xe_n20-cli_repl.tgz
        remote_file: mongosh/binaries/${revision}/${revision_order_id}/nyc-output-tests_win32-m80xe_n20-cli_repl.tgz
        bucket: mciuploads
    - command: shell.exec
      params:
        working_dir: src
        shell: bash
        script: |
          set -e
          tar xvzf nyc-output-tests_win32-m80xe_n20-cli_repl.tgz
    - command: s3.get
      params:
        aws_key: ${aws_key}
        aws_secret: ${aws_secret}
        local_file: src/nyc-output-tests_win32-m80xe_n20-e2e_tests.tgz
        remote_file: mongosh/binaries/${revision}/${revision_order_id}/nyc-output-tests_win32-m80xe_n20-e2e_tests.tgz
        bucket: mciuploads
    - command: shell.exec
      params:
        working_dir: src
        shell: bash
        script: |
          set -e
          tar xvzf nyc-output-tests_win32-m80xe_n20-e2e_tests.tgz
    - command: s3.get
      params:
        aws_key: ${aws_key}
        aws_secret: ${aws_secret}
        local_file: src/nyc-output-tests_win32-m80xe_n20-node_runtime_worker_thread.tgz
        remote_file: mongosh/binaries/${revision}/${revision_order_id}/nyc-output-tests_win32-m80xe_n20-node_runtime_worker_thread.tgz
        bucket: mciuploads
    - command: shell.exec
      params:
        working_dir: src
        shell: bash
        script: |
          set -e
          tar xvzf nyc-output-tests_win32-m80xe_n20-node_runtime_worker_thread.tgz
    - command: s3.get
      params:
        aws_key: ${aws_key}
        aws_secret: ${aws_secret}
        local_file: src/nyc-output-tests_win32-m80xe_n20-service_provider_node_driver.tgz
        remote_file: mongosh/binaries/${revision}/${revision_order_id}/nyc-output-tests_win32-m80xe_n20-service_provider_node_driver.tgz
        bucket: mciuploads
    - command: shell.exec
      params:
        working_dir: src
        shell: bash
        script: |
          set -e
          tar xvzf nyc-output-tests_win32-m80xe_n20-service_provider_node_driver.tgz
    - command: s3.get
      params:
        aws_key: ${aws_key}
        aws_secret: ${aws_secret}
        local_file: src/nyc-output-tests_win32-m80xe_n20-shell_api.tgz
        remote_file: mongosh/binaries/${revision}/${revision_order_id}/nyc-output-tests_win32-m80xe_n20-shell_api.tgz
        bucket: mciuploads
    - command: shell.exec
      params:
        working_dir: src
        shell: bash
        script: |
          set -e
          tar xvzf nyc-output-tests_win32-m80xe_n20-shell_api.tgz
    - command: s3.get
      params:
        aws_key: ${aws_key}
        aws_secret: ${aws_secret}
        local_file: src/nyc-output-tests_win32-m82xc_n20-cli_repl.tgz
        remote_file: mongosh/binaries/${revision}/${revision_order_id}/nyc-output-tests_win32-m82xc_n20-cli_repl.tgz
        bucket: mciuploads
    - command: shell.exec
      params:
        working_dir: src
        shell: bash
        script: |
          set -e
          tar xvzf nyc-output-tests_win32-m82xc_n20-cli_repl.tgz
    - command: s3.get
      params:
        aws_key: ${aws_key}
        aws_secret: ${aws_secret}
        local_file: src/nyc-output-tests_win32-m82xc_n20-e2e_tests.tgz
        remote_file: mongosh/binaries/${revision}/${revision_order_id}/nyc-output-tests_win32-m82xc_n20-e2e_tests.tgz
        bucket: mciuploads
    - command: shell.exec
      params:
        working_dir: src
        shell: bash
        script: |
          set -e
          tar xvzf nyc-output-tests_win32-m82xc_n20-e2e_tests.tgz
    - command: s3.get
      params:
        aws_key: ${aws_key}
        aws_secret: ${aws_secret}
        local_file: src/nyc-output-tests_win32-m82xc_n20-node_runtime_worker_thread.tgz
        remote_file: mongosh/binaries/${revision}/${revision_order_id}/nyc-output-tests_win32-m82xc_n20-node_runtime_worker_thread.tgz
        bucket: mciuploads
    - command: shell.exec
      params:
        working_dir: src
        shell: bash
        script: |
          set -e
          tar xvzf nyc-output-tests_win32-m82xc_n20-node_runtime_worker_thread.tgz
    - command: s3.get
      params:
        aws_key: ${aws_key}
        aws_secret: ${aws_secret}
        local_file: src/nyc-output-tests_win32-m82xc_n20-service_provider_node_driver.tgz
        remote_file: mongosh/binaries/${revision}/${revision_order_id}/nyc-output-tests_win32-m82xc_n20-service_provider_node_driver.tgz
        bucket: mciuploads
    - command: shell.exec
      params:
        working_dir: src
        shell: bash
        script: |
          set -e
          tar xvzf nyc-output-tests_win32-m82xc_n20-service_provider_node_driver.tgz
    - command: s3.get
      params:
        aws_key: ${aws_key}
        aws_secret: ${aws_secret}
        local_file: src/nyc-output-tests_win32-m82xc_n20-shell_api.tgz
        remote_file: mongosh/binaries/${revision}/${revision_order_id}/nyc-output-tests_win32-m82xc_n20-shell_api.tgz
        bucket: mciuploads
    - command: shell.exec
      params:
        working_dir: src
        shell: bash
        script: |
          set -e
          tar xvzf nyc-output-tests_win32-m82xc_n20-shell_api.tgz
    - command: s3.get
      params:
        aws_key: ${aws_key}
        aws_secret: ${aws_secret}
        local_file: src/nyc-output-tests_win32-m82xe_n20-cli_repl.tgz
        remote_file: mongosh/binaries/${revision}/${revision_order_id}/nyc-output-tests_win32-m82xe_n20-cli_repl.tgz
        bucket: mciuploads
    - command: shell.exec
      params:
        working_dir: src
        shell: bash
        script: |
          set -e
          tar xvzf nyc-output-tests_win32-m82xe_n20-cli_repl.tgz
    - command: s3.get
      params:
        aws_key: ${aws_key}
        aws_secret: ${aws_secret}
        local_file: src/nyc-output-tests_win32-m82xe_n20-e2e_tests.tgz
        remote_file: mongosh/binaries/${revision}/${revision_order_id}/nyc-output-tests_win32-m82xe_n20-e2e_tests.tgz
        bucket: mciuploads
    - command: shell.exec
      params:
        working_dir: src
        shell: bash
        script: |
          set -e
          tar xvzf nyc-output-tests_win32-m82xe_n20-e2e_tests.tgz
    - command: s3.get
      params:
        aws_key: ${aws_key}
        aws_secret: ${aws_secret}
        local_file: src/nyc-output-tests_win32-m82xe_n20-node_runtime_worker_thread.tgz
        remote_file: mongosh/binaries/${revision}/${revision_order_id}/nyc-output-tests_win32-m82xe_n20-node_runtime_worker_thread.tgz
        bucket: mciuploads
    - command: shell.exec
      params:
        working_dir: src
        shell: bash
        script: |
          set -e
          tar xvzf nyc-output-tests_win32-m82xe_n20-node_runtime_worker_thread.tgz
    - command: s3.get
      params:
        aws_key: ${aws_key}
        aws_secret: ${aws_secret}
        local_file: src/nyc-output-tests_win32-m82xe_n20-service_provider_node_driver.tgz
        remote_file: mongosh/binaries/${revision}/${revision_order_id}/nyc-output-tests_win32-m82xe_n20-service_provider_node_driver.tgz
        bucket: mciuploads
    - command: shell.exec
      params:
        working_dir: src
        shell: bash
        script: |
          set -e
          tar xvzf nyc-output-tests_win32-m82xe_n20-service_provider_node_driver.tgz
    - command: s3.get
      params:
        aws_key: ${aws_key}
        aws_secret: ${aws_secret}
        local_file: src/nyc-output-tests_win32-m82xe_n20-shell_api.tgz
        remote_file: mongosh/binaries/${revision}/${revision_order_id}/nyc-output-tests_win32-m82xe_n20-shell_api.tgz
        bucket: mciuploads
    - command: shell.exec
      params:
        working_dir: src
        shell: bash
        script: |
          set -e
          tar xvzf nyc-output-tests_win32-m82xe_n20-shell_api.tgz
    - command: s3.get
      params:
        aws_key: ${aws_key}
        aws_secret: ${aws_secret}
        local_file: src/nyc-output-tests_win32-mlatest_n20-cli_repl.tgz
        remote_file: mongosh/binaries/${revision}/${revision_order_id}/nyc-output-tests_win32-mlatest_n20-cli_repl.tgz
        bucket: mciuploads
    - command: shell.exec
      params:
        working_dir: src
        shell: bash
        script: |
          set -e
          tar xvzf nyc-output-tests_win32-mlatest_n20-cli_repl.tgz
    - command: s3.get
      params:
        aws_key: ${aws_key}
        aws_secret: ${aws_secret}
        local_file: src/nyc-output-tests_win32-mlatest_n20-e2e_tests.tgz
        remote_file: mongosh/binaries/${revision}/${revision_order_id}/nyc-output-tests_win32-mlatest_n20-e2e_tests.tgz
        bucket: mciuploads
    - command: shell.exec
      params:
        working_dir: src
        shell: bash
        script: |
          set -e
          tar xvzf nyc-output-tests_win32-mlatest_n20-e2e_tests.tgz
    - command: s3.get
      params:
        aws_key: ${aws_key}
        aws_secret: ${aws_secret}
        local_file: src/nyc-output-tests_win32-mlatest_n20-node_runtime_worker_thread.tgz
        remote_file: mongosh/binaries/${revision}/${revision_order_id}/nyc-output-tests_win32-mlatest_n20-node_runtime_worker_thread.tgz
        bucket: mciuploads
    - command: shell.exec
      params:
        working_dir: src
        shell: bash
        script: |
          set -e
          tar xvzf nyc-output-tests_win32-mlatest_n20-node_runtime_worker_thread.tgz
    - command: s3.get
      params:
        aws_key: ${aws_key}
        aws_secret: ${aws_secret}
        local_file: src/nyc-output-tests_win32-mlatest_n20-service_provider_node_driver.tgz
        remote_file: mongosh/binaries/${revision}/${revision_order_id}/nyc-output-tests_win32-mlatest_n20-service_provider_node_driver.tgz
        bucket: mciuploads
    - command: shell.exec
      params:
        working_dir: src
        shell: bash
        script: |
          set -e
          tar xvzf nyc-output-tests_win32-mlatest_n20-service_provider_node_driver.tgz
    - command: s3.get
      params:
        aws_key: ${aws_key}
        aws_secret: ${aws_secret}
        local_file: src/nyc-output-tests_win32-mlatest_n20-shell_api.tgz
        remote_file: mongosh/binaries/${revision}/${revision_order_id}/nyc-output-tests_win32-mlatest_n20-shell_api.tgz
        bucket: mciuploads
    - command: shell.exec
      params:
        working_dir: src
        shell: bash
        script: |
          set -e
          tar xvzf nyc-output-tests_win32-mlatest_n20-shell_api.tgz
    - command: shell.exec
      params:
        working_dir: src
        shell: bash
        script: |
          set -e
          tar cvzf full-nyc-output.tgz .nyc_output
    - command: s3.put
      params:
        aws_key: ${aws_key}
        aws_secret: ${aws_secret}
        local_file: src/full-nyc-output.tgz
        remote_file: mongosh/binaries/${revision}/${revision_order_id}/full-nyc-output.tgz
        bucket: mciuploads
        permissions: private
        visibility: signed
        content_type: application/x-gzip
    - command: shell.exec
      params:
        working_dir: src
        shell: bash
        env:
          NODE_JS_VERSION: ${node_js_version}
        script: |
          set -e
          {
          source .evergreen/setup-env.sh
          npm run report-coverage-ci
          echo "Creating coverage tarball..."
          tar cvzf coverage.tgz coverage
          }
    - command: s3.put
      params:
        aws_key: ${aws_key}
        aws_secret: ${aws_secret}
        local_file: src/coverage.tgz
        remote_file: mongosh/binaries/${revision}/${revision_order_id}/coverage.tgz
        bucket: mciuploads
        permissions: private
        visibility: signed
        content_type: application/x-gzip
    - command: shell.exec
      params:
        working_dir: src
        shell: bash
        env:
          NODE_JS_VERSION: ${node_js_version}
        script: |
          set -e
          {
          source .evergreen/setup-env.sh
          npm run check-coverage
          }

  test_vscode:
    - command: shell.exec
      params:
        working_dir: src
        shell: bash
        env:
          DOCKERHUB_USERNAME: ${dockerhub_username}
          DOCKERHUB_PASSWORD: ${dockerhub_password}
        script: |
          set -e
          {
          source .evergreen/setup-env.sh
          # Fetch Node.js version from VS Code's .nvmrc, default to 22.20.0 if unavailable
          export NODE_VERSION=$(curl -fsSL https://raw.githubusercontent.com/microsoft/vscode/refs/heads/main/.nvmrc | tr -d '[:space:]' || echo "22.20.0")
          echo "Using Node.js version for VS Code extension tests: $NODE_VERSION"
          (cd scripts/docker && docker build --build-arg NODE_JS_VERSION="$NODE_VERSION" -t ubuntu24.04-xvfb -f ubuntu24.04-xvfb.Dockerfile .)
          docker run \
            --rm -v $PWD:/tmp/build ubuntu24.04-xvfb \
            -c 'cd /tmp/build && ./testing/test-vscode.sh'
          }
  test_connectivity:
    - command: expansions.write
      type: system
      params:
        file: tmp/expansions.yaml
        redacted: true
    - command: shell.exec
      params:
        working_dir: src
        shell: bash
        env:
          NODE_JS_VERSION: ${node_js_version}
          TEST_MONGOSH_EXECUTABLE: ${test_mongosh_executable|}
          KERBEROS_JUMPHOST_DOCKERFILE: ${kerberos_jumphost_dockerfile|}
          DOCKERHUB_USERNAME: ${dockerhub_username}
          DOCKERHUB_PASSWORD: ${dockerhub_password}
        script: |
          set -e
          {
          source .evergreen/setup-env.sh
          npm run test-connectivity
          }
  test_apistrict:
    - command: expansions.write
      type: system
      params:
        file: tmp/expansions.yaml
        redacted: true
    - command: shell.exec
      params:
        working_dir: src
        shell: bash
        env:
          NODE_JS_VERSION: ${node_js_version}
        script: |
          set -e
          {
          source .evergreen/setup-env.sh
          npm run test-apistrict-ci
          }

  ###
  # ARTIFACT COMPILATION
  #
  # compile_artifact generates the executable binary and uploads it as TGZ to S3 for later use.
  # Use download_compiled_artifact to download the TGZ from S3.
  #
  # Both functions expect the following arguments:
  # - executable_os_id
  ###
  compile_artifact:
    - command: expansions.write
      type: system
      params:
        file: tmp/expansions.yaml
        redacted: true
    - command: subprocess.exec
      params:
        working_dir: src
        binary: bash .evergreen/compile-artifact.sh
        env:
          DISTRO_ID: ${distro_id}
          NODE_JS_VERSION: ${node_js_version}
          MONGOSH_SHARED_OPENSSL: ${mongosh_shared_openssl}
          GITHUB_PR_NUMBER: ${github_pr_number}
  upload_sbom:
    - command: s3.put
      params:
        aws_key: ${aws_key}
        aws_secret: ${aws_secret}
        local_file: src/dist/.sbom.json
        remote_file: mongosh/binaries/${revision}/${revision_order_id}/mongosh-${executable_os_id}${extra_upload_tag}-sbom.json
        bucket: mciuploads
        permissions: public-read
        content_type: application/json
    - command: s3.put
      params:
        aws_key: ${aws_key}
        aws_secret: ${aws_secret}
        local_file: src/dist/.purls.txt
        remote_file: mongosh/binaries/${revision}/${revision_order_id}/mongosh-${executable_os_id}${extra_upload_tag}-purls.txt
        bucket: mciuploads
        permissions: public-read
        content_type: text/plain
  upload_compiled_artifact:
    - command: shell.exec
      params:
        working_dir: src
        shell: bash
        env:
          DISTRO_ID: ${distro_id}
        script: |
          set -e
          set -x
          tar cvzf dist.tgz dist
          bash .evergreen/compilation-context-expansions.sh
    - command: expansions.update
      params:
        ignore_missing_file: false
        file: tmp/compiling-context.yml
    - command: s3.put
      params:
        aws_key: ${aws_key}
        aws_secret: ${aws_secret}
        local_file: src/dist.tgz
        remote_file: mongosh/binaries/${revision}/${revision_order_id}/mongosh-${executable_os_id}${extra_upload_tag}.tgz
        bucket: mciuploads
        permissions: public-read
        content_type: application/x-gzip
  upload_first_party_deps_list:
    - command: s3.put
      params:
        aws_key: ${aws_key}
        aws_secret: ${aws_secret}
        local_file: src/.sbom/first-party-deps.json
        remote_file: mongosh/binaries/${revision}/${revision_order_id}/mongosh-${executable_os_id}${extra_upload_tag}-first-party-deps.json
        bucket: mciuploads
        permissions: public-read
        content_type: application/json
  download_compiled_artifact:
    - command: s3.get
      type: setup
      params:
        aws_key: ${aws_key}
        aws_secret: ${aws_secret}
        local_file: src/dist.tgz
        remote_file: mongosh/binaries/${revision}/${revision_order_id}/mongosh-${executable_os_id}${extra_upload_tag}.tgz
        bucket: mciuploads
    - command: shell.exec
      params:
        working_dir: src
        shell: bash
        script: |
          set -e
          tar xvzf dist.tgz

  ###
  # E2E TEST EXECUTION
  #
  # Runs the E2E tests against the compiled artifact, i.e. expects the compiled artifact to be already present.
  ###
  run_e2e_tests:
    - command: expansions.write
      type: system
      params:
        file: tmp/expansions.yaml
        redacted: true
    - command: subprocess.exec
      params:
        working_dir: src
        binary: bash .evergreen/run-e2e-tests.sh
        env:
          NODE_JS_VERSION: ${node_js_version}
          AWS_AUTH_IAM_ACCESS_KEY_ID: ${devtools_ci_aws_key}
          AWS_AUTH_IAM_SECRET_ACCESS_KEY: ${devtools_ci_aws_secret}
          STREAMS_E2E_SPI_CONNECTION_STRING: ${streams_e2e_spi_connection_string}
          STREAMS_E2E_DB_USER: ${streams_e2e_db_user}
          STREAMS_E2E_DB_PASSWORD: ${streams_e2e_db_password}
          STREAMS_E2E_CLUSTER_CONNECTION_STRING: ${streams_e2e_cluster_connection_string}
          TASK_NAME: ${task_name}

  ###
  # PACKAGING AND UPLOADING
  #
  # package_artifact generates a distributable package out of the compiled artifact,
  # i.e. it expects it to have been downloaded already. The distributable package will be uploaded
  # to a specifc Evergreen S3 bucket for later use.
  # sign_artifact signs and/or notarizes the distributable package as appropriate.
  #
  # The URL to download the distributable package can be retrieved by get_artifact_url.
  #
  # package_artifact expects the following arguments:
  # - distro_id
  # - package_variant
  # - executable_os_id
  #
  # get_artifact_url and put_artifact_url expects the following arguments:
  # - package_variant
  # - signature_tag (either 'signed' or 'unsigned')
  ###
  add_crypt_shared_and_sbom:
    - command: ec2.assume_role
      display_name: Assume IAM role with permissions to pull Kondukto API token
      params:
        role_arn: ${kondukto_role_arn}
    - command: shell.exec
      display_name: Pull Kondukto API token from AWS Secrets Manager and write it to file
      params:
        silent: true
        shell: bash
        working_dir: src
        include_expansions_in_env: [AWS_ACCESS_KEY_ID, AWS_SECRET_ACCESS_KEY, AWS_SESSION_TOKEN]
        script: |
          set -e
          # use AWS CLI to get the Kondukto API token from AWS Secrets Manager
          kondukto_token=$(aws secretsmanager get-secret-value --secret-id "kondukto-token" --region "us-east-1" --query 'SecretString' --output text)
          # set the KONDUKTO_TOKEN environment variable
          echo "KONDUKTO_TOKEN=$kondukto_token" > /tmp/kondukto_credentials.env
    - command: subprocess.exec
      params:
        working_dir: src
        binary: bash .evergreen/download-crypt-shared-and-generate-sbom.sh
        env:
          NODE_JS_VERSION: ${node_js_version}
          DISTRO_ID_OVERRIDE: ${distro_id}
          PACKAGE_VARIANT: ${package_variant}
          ARTIFACTORY_USERNAME: ${artifactory_username}
          ARTIFACTORY_PASSWORD: ${artifactory_password}
          # for Kondukto SBOM integration
          KONDUKTO_BRANCH: ${branch_name}_${executable_os_id}
  create_static_analysis_report:
    - command: s3.get
      params:
        aws_key: ${aws_key}
        aws_secret: ${aws_secret}
        local_file: src/.sbom/mongosh-darwin-x64-first-party-deps.json
        remote_file: mongosh/binaries/${revision}/${revision_order_id}/mongosh-darwin-x64-first-party-deps.json
        bucket: mciuploads
    - command: s3.get
      params:
        aws_key: ${aws_key}
        aws_secret: ${aws_secret}
        local_file: src/.sbom/mongosh-darwin-arm64-first-party-deps.json
        remote_file: mongosh/binaries/${revision}/${revision_order_id}/mongosh-darwin-arm64-first-party-deps.json
        bucket: mciuploads
    - command: s3.get
      params:
        aws_key: ${aws_key}
        aws_secret: ${aws_secret}
        local_file: src/.sbom/mongosh-linux-x64-first-party-deps.json
        remote_file: mongosh/binaries/${revision}/${revision_order_id}/mongosh-linux-x64-first-party-deps.json
        bucket: mciuploads
    - command: s3.get
      params:
        aws_key: ${aws_key}
        aws_secret: ${aws_secret}
        local_file: src/.sbom/mongosh-linux-x64-openssl11-first-party-deps.json
        remote_file: mongosh/binaries/${revision}/${revision_order_id}/mongosh-linux-x64-openssl11-first-party-deps.json
        bucket: mciuploads
    - command: s3.get
      params:
        aws_key: ${aws_key}
        aws_secret: ${aws_secret}
        local_file: src/.sbom/mongosh-linux-x64-openssl3-first-party-deps.json
        remote_file: mongosh/binaries/${revision}/${revision_order_id}/mongosh-linux-x64-openssl3-first-party-deps.json
        bucket: mciuploads
    - command: s3.get
      params:
        aws_key: ${aws_key}
        aws_secret: ${aws_secret}
        local_file: src/.sbom/mongosh-linux-arm64-first-party-deps.json
        remote_file: mongosh/binaries/${revision}/${revision_order_id}/mongosh-linux-arm64-first-party-deps.json
        bucket: mciuploads
    - command: s3.get
      params:
        aws_key: ${aws_key}
        aws_secret: ${aws_secret}
        local_file: src/.sbom/mongosh-linux-arm64-openssl11-first-party-deps.json
        remote_file: mongosh/binaries/${revision}/${revision_order_id}/mongosh-linux-arm64-openssl11-first-party-deps.json
        bucket: mciuploads
    - command: s3.get
      params:
        aws_key: ${aws_key}
        aws_secret: ${aws_secret}
        local_file: src/.sbom/mongosh-linux-arm64-openssl3-first-party-deps.json
        remote_file: mongosh/binaries/${revision}/${revision_order_id}/mongosh-linux-arm64-openssl3-first-party-deps.json
        bucket: mciuploads
    - command: s3.get
      params:
        aws_key: ${aws_key}
        aws_secret: ${aws_secret}
        local_file: src/.sbom/mongosh-linux-ppc64le-first-party-deps.json
        remote_file: mongosh/binaries/${revision}/${revision_order_id}/mongosh-linux-ppc64le-first-party-deps.json
        bucket: mciuploads
    - command: s3.get
      params:
        aws_key: ${aws_key}
        aws_secret: ${aws_secret}
        local_file: src/.sbom/mongosh-linux-s390x-first-party-deps.json
        remote_file: mongosh/binaries/${revision}/${revision_order_id}/mongosh-linux-s390x-first-party-deps.json
        bucket: mciuploads
    - command: s3.get
      params:
        aws_key: ${aws_key}
        aws_secret: ${aws_secret}
        local_file: src/.sbom/mongosh-win32-first-party-deps.json
        remote_file: mongosh/binaries/${revision}/${revision_order_id}/mongosh-win32-first-party-deps.json
        bucket: mciuploads
    - command: shell.exec
      params:
        working_dir: src
        shell: bash
        script: |
          set -e
          export NODE_JS_VERSION=${node_js_version}
          source .evergreen/setup-env.sh
          .evergreen/create-static-analysis-report.sh
        env:
          NODE_JS_VERSION: ${node_js_version}
          FIRST_PARTY_DEPENDENCY_FILENAMES: .sbom/mongosh-darwin-x64-first-party-deps.json,.sbom/mongosh-darwin-arm64-first-party-deps.json,.sbom/mongosh-linux-x64-first-party-deps.json,.sbom/mongosh-linux-x64-openssl11-first-party-deps.json,.sbom/mongosh-linux-x64-openssl3-first-party-deps.json,.sbom/mongosh-linux-arm64-first-party-deps.json,.sbom/mongosh-linux-arm64-openssl11-first-party-deps.json,.sbom/mongosh-linux-arm64-openssl3-first-party-deps.json,.sbom/mongosh-linux-ppc64le-first-party-deps.json,.sbom/mongosh-linux-s390x-first-party-deps.json,.sbom/mongosh-win32-first-party-deps.json
          GITHUB_TOKEN: ${github_token}
          GITHUB_PR_NUMBER: ${github_pr_number}
    - command: s3.put
      params:
        aws_key: ${aws_key}
        aws_secret: ${aws_secret}
        local_file: src/static-analysis-report.tgz
        remote_file: mongosh/binaries/${revision}/${revision_order_id}/mongosh-static-analysis-report.tgz
        bucket: mciuploads
        permissions: private
        visibility: signed
        content_type: application/x-gzip
  package_artifact:
    - command: expansions.write
      type: setup
      params:
        file: tmp/expansions.yaml
        redacted: true
    - command: subprocess.exec
      params:
        working_dir: src
        binary: bash .evergreen/package-and-upload-artifact.sh
        env:
          NODE_JS_VERSION: ${node_js_version}
          DISTRO_ID_OVERRIDE: ${distro_id}
          PACKAGE_VARIANT: ${package_variant}
          ARTIFACT_URL_EXTRA_TAG: unsigned
          DOCKERHUB_USERNAME: ${dockerhub_username}
          DOCKERHUB_PASSWORD: ${dockerhub_password}
  sign_artifact:
    - command: expansions.write
      type: setup
      params:
        file: tmp/expansions.yaml
        redacted: true
    - command: subprocess.exec
      params:
        working_dir: src
        binary: bash .evergreen/sign-packaged-artifact.sh
        env:
          NODE_JS_VERSION: ${node_js_version}
          DISTRO_ID_OVERRIDE: ${distro_id}
          PACKAGE_VARIANT: ${package_variant}
          MACOS_NOTARY_KEY: ${macos_notary_key}
          MACOS_NOTARY_SECRET: ${macos_notary_secret}
          REQUESTER: ${requester}
  verify_artifact:
    - command: expansions.write
      type: setup
      params:
        file: tmp/expansions.yaml
        redacted: true
    - command: shell.exec
      params:
        working_dir: src
        shell: bash
        script: |
          set -e
          .evergreen/verify-packaged-artifact.sh
  put_artifact_url:
    - command: s3.put
      params:
        aws_key: ${aws_key}
        aws_secret: ${aws_secret}
        local_file: artifact-url.txt
        remote_file: mongosh/binaries/${revision}/${revision_order_id}/artifact-url-${package_variant}-${signature_tag}.txt
        bucket: mciuploads
        permissions: public-read
        content_type: application/x-gzip
  get_artifact_url:
    - command: s3.get
      type: setup
      params:
        aws_key: ${aws_key}
        aws_secret: ${aws_secret}
        local_file: artifact-url.txt
        remote_file: mongosh/binaries/${revision}/${revision_order_id}/artifact-url-${package_variant}-${signature_tag}.txt
        bucket: mciuploads

  write_preload_script:
    - command: shell.exec
      # silent: true
      type: setup
      params:
        working_dir: src
        shell: bash
        env:
          connectivity_test_atlas_username: ${connectivity_test_atlas_username}
          connectivity_test_atlas_password: ${connectivity_test_atlas_password}
          connectivity_test_atlas_hostname: ${connectivity_test_atlas_hostname}
        script: |
          set -e
          .evergreen/create-preload-script.sh
  spawn_host:
    - command: host.create
      type: setup
      params:
        provider: ec2
        distro: ${distro}
        security_group_ids:
          - sg-097bff6dd0d1d31d0 # Magic string that's needed for SSH'ing.
    - command: host.list
      type: setup
      params:
        num_hosts: 1
        path: buildhosts.yml # Write the host information to disk.
        timeout_seconds: 1200
        wait: true
  run_pkg_tests_through_ssh:
    - command: shell.exec
      # silent: true
      type: setup
      params:
        working_dir: src
        shell: bash
        env:
          __project_aws_ssh_key_value: ${__project_aws_ssh_key_value}
        script: |
          set -e
          .evergreen/setup-ssh-key.sh
    - command: subprocess.exec
      params:
        working_dir: src
        binary: bash .evergreen/run-on-ssh-host.sh
        env:
          ADMIN_USER_NAME: ${admin_user_name}
          ONHOST_SCRIPT_PATH: ${onhost_script_path}
          PRELOAD_SCRIPT_PATH: ${preload_script_path}
  test_artifact_docker:
    - command: shell.exec
      type: setup
      params:
        working_dir: src
        shell: bash
        env:
          NODE_JS_VERSION: ${node_js_version}
          DOCKERHUB_USERNAME: ${dockerhub_username}
          DOCKERHUB_PASSWORD: ${dockerhub_password}
        script: |
          set -e
          set -x
          {
          . .evergreen/setup-env.sh
          . preload.sh
          ./scripts/docker/build.sh ${dockerfile}
          }
    - command: shell.exec
      params:
        working_dir: src
        shell: bash
        env:
          NODE_JS_VERSION: ${node_js_version}
          DOCKERHUB_USERNAME: ${dockerhub_username}
          DOCKERHUB_PASSWORD: ${dockerhub_password}
        script: |
          set -e
          set -x
          {
          . .evergreen/setup-env.sh
          . preload.sh
          ./scripts/docker/run.sh ${dockerfile} --smokeTests
          }
  test_artifact_macos:
    - command: shell.exec
      type: setup
      params:
        working_dir: src
        shell: bash
        script: |
          set -e
          set -x
          {
          . preload.sh
          curl -sSfL "$ARTIFACT_URL" > mongosh.zip
          unzip mongosh.zip
          }
    - command: shell.exec
      params:
        working_dir: src
        shell: bash
        env:
          MONGOSH_NO_AUTOMATIC_ENCRYPTION_SUPPORT: ${no_automatic_encryption_support|}
        script: |
          set -e
          set -x
          {
          system_profiler SPSoftwareDataType # for debugging
          . preload.sh
          ./mongosh-*/bin/mongosh --smokeTests
          }
  test_artifact_rpmextract:
    - command: shell.exec
      type: setup
      params:
        working_dir: src
        shell: bash
        script: |
          set -e
          set -x
          {
          . preload.sh
          curl -sSfL "$ARTIFACT_URL" > mongosh.rpm
          rpm2cpio mongosh.rpm | cpio -idmv
          }
    - command: shell.exec
      params:
        working_dir: src
        shell: bash
        env:
          MONGOSH_NO_AUTOMATIC_ENCRYPTION_SUPPORT: ${no_automatic_encryption_support|}
        script: |
          set -e
          set -x
          {
          . preload.sh
          ./usr/bin/mongosh --smokeTests
          }
  test_artifact_debextract:
    - command: shell.exec
      type: setup
      params:
        working_dir: src
        shell: bash
        script: |
          set -e
          set -x
          {
          . preload.sh
          curl -sSfL "$ARTIFACT_URL" > mongosh.deb
          dpkg -x mongosh.deb .
          }
    - command: shell.exec
      params:
        working_dir: src
        shell: bash
        env:
          MONGOSH_NO_AUTOMATIC_ENCRYPTION_SUPPORT: ${no_automatic_encryption_support|}
        script: |
          set -e
          set -x
          {
          . preload.sh
          ./usr/bin/mongosh --smokeTests
          }

  generate_license_and_vulnerability_report:
    - command: shell.exec
      params:
        working_dir: src
        shell: bash
        env:
          NODE_JS_VERSION: ${node_js_version}
          EVERGREEN_IS_PATCH: ${is_patch}
          SNYK_TOKEN: ${snyk_token}
          EVERGREEN_TASK_URL: https://evergreen.mongodb.com/task/${task_id}
          JIRA_API_TOKEN: ${jira_api_token}
        script: |
          set -e
          source .evergreen/setup-env.sh

          # validate licenses, we first remove THIRD_PARTY_NOTICES.md, so we are sure
          # that we would only upload the newly generated file in case of success.
          rm THIRD_PARTY_NOTICES.md
          npm run update-third-party-notices

          # generate vulnerability report
          set +e
          npm run generate-vulnerability-report
          return_code=$?
          set -e

          # if on main and not triggered by a tag, also create a ticket for each vulnerability found
          if [[ "${requester}" == "commit" ]]; then
            export JIRA_BASE_URL="https://jira.mongodb.org"
            export JIRA_PROJECT="MONGOSH"
            export JIRA_VULNERABILITY_BUILD_INFO="- [Evergreen task|$EVERGREEN_TASK_URL]"
            npm run create-vulnerability-tickets
          else
            cat .sbom/vulnerability-report.md
          fi

          if [[ "${is_patch}" != "true" ]]; then
            # Run `snyk monitor` to keep `main` tracked
            npx snyk monitor --org=dcd6db53-1532-4e65-beca-55db83f2cd52 --file=package-lock.json
            # Fails if the report failed and is not a patch, including during releases:
            exit $return_code
          fi

    - command: s3.put
      params:
        aws_key: ${aws_key}
        aws_secret: ${aws_secret}
        bucket: mciuploads
        permissions: private
        visibility: signed
        local_file: src/.sbom/dependencies.json
        remote_file: ${project}/${revision}_${revision_order_id}/dependencies.json
        content_type: application/json
        optional: true
    - command: s3.put
      params:
        aws_key: ${aws_key}
        aws_secret: ${aws_secret}
        bucket: mciuploads
        permissions: private
        visibility: signed
        local_file: src/.sbom/snyk-test-result.json
        remote_file: ${project}/${revision}_${revision_order_id}/snyk-test-result.json
        content_type: application/json
        optional: true
    - command: s3.put
      params:
        aws_key: ${aws_key}
        aws_secret: ${aws_secret}
        bucket: mciuploads
        permissions: private
        visibility: signed
        local_file: src/.sbom/snyk-test-result.html
        remote_file: ${project}/${revision}_${revision_order_id}/snyk-test-result.html
        content_type: text/html
        optional: true
    - command: s3.put
      params:
        aws_key: ${aws_key}
        aws_secret: ${aws_secret}
        bucket: mciuploads
        permissions: private
        visibility: signed
        local_file: src/.sbom/vulnerability-report.md
        remote_file: ${project}/${revision}_${revision_order_id}/vulnerability-report.md
        content_type: text/markdown
        optional: true
    - command: s3.put
      params:
        aws_key: ${aws_key}
        aws_secret: ${aws_secret}
        bucket: mciuploads
        permissions: private
        visibility: signed
        local_file: src/THIRD_PARTY_NOTICES.md
        remote_file: ${project}/${revision}_${revision_order_id}/THIRD_PARTY_NOTICES.md
        content_type: text/markdown
        optional: true

  papertrail_trace:
    - command: shell.exec
      params:
        working_dir: src
        shell: bash
        script: |
          set -e
          set -x
          ls -lh dist/
          if [ x"${triggered_by_git_tag}" == x"" ]; then
            tag=$(git describe --tags --always --dirty)
          else
            tag="${triggered_by_git_tag}"
          fi
          echo "Setting version for papertrail to $tag, with product ${product}"
          version="$(echo $tag | sed -e 's/^[vr]//')"
          cat <<EOT > trace-expansions.yml
          release_version: "$version"
          EOT
          cat trace-expansions.yml
    - command: expansions.update
      params:
        file: src/trace-expansions.yml
    - command: papertrail.trace
      params:
        key_id: ${papertrail_key_id}
        secret_key: ${papertrail_secret_key}
        product: ${product}
        version: ${release_version}
        filenames:
          - "src/dist/*"

  release_draft:
    - command: expansions.write
      type: system
      params:
        file: tmp/expansions.yaml
        redacted: true
    - command: ec2.assume_role
      params:
        role_arn: "arn:aws:iam::119629040606:role/s3-access.cdn-origin-compass"
    - command: shell.exec
      params:
        working_dir: src
        shell: bash
        env:
          DOWNLOAD_CENTER_AWS_KEY_ARTIFACTS: ${AWS_ACCESS_KEY_ID}
          DOWNLOAD_CENTER_AWS_SECRET_ARTIFACTS: ${AWS_SECRET_ACCESS_KEY}
          DOWNLOAD_CENTER_AWS_SESSION_TOKEN_ARTIFACTS: ${AWS_SESSION_TOKEN}
        script: |
          set -e
          {
          export NODE_JS_VERSION=${node_js_version}
          source .evergreen/setup-env.sh
          npm run evergreen-release draft
          git add .
          git commit --no-allow-empty -m "chore(release): bump to prepare for mongosh release"
          }

  release_publish_download_and_list_artifacts:
    - command: expansions.write
      type: system
      params:
        file: tmp/expansions.yaml
        redacted: true
    - command: shell.exec
      params:
        working_dir: src
        shell: bash
        env:
          node_js_version: ${node_js_version}
        script: |
          set -e
          .evergreen/run-evergreen-release.sh download-and-list-artifacts
    - command: shell.exec
      params:
        working_dir: src
        shell: bash
        script: |
          set -e
          set -x
          ls -lh dist/
          cat -n dist/SHASUMS1.txt
          cat -n dist/SHASUMS256.txt

  release_publish_dry_run:
    - command: expansions.write
      type: system
      params:
        file: tmp/expansions.yaml
        redacted: true
    - command: ec2.assume_role
      params:
        role_arn: "arn:aws:iam::119629040606:role/s3-access.cdn-origin-compass"
    - command: shell.exec
      # silent: true
      params:
        working_dir: src
        shell: bash
        env:
          devtoolsbot_npm_token: ${devtoolsbot_npm_token}
          node_js_version: ${node_js_version}
          DOWNLOAD_CENTER_AWS_KEY_ARTIFACTS: ${AWS_ACCESS_KEY_ID}
          DOWNLOAD_CENTER_AWS_SECRET_ARTIFACTS: ${AWS_SECRET_ACCESS_KEY}
          DOWNLOAD_CENTER_AWS_SESSION_TOKEN_ARTIFACTS: ${AWS_SESSION_TOKEN}
        script: |
          set -e
          .evergreen/run-evergreen-release.sh publish -- --dry-run

  release_publish:
    - command: expansions.write
      type: system
      params:
        file: tmp/expansions.yaml
        redacted: true
    - command: ec2.assume_role
      params:
        role_arn: "arn:aws:iam::119629040606:role/s3-access.cdn-origin-compass"
    - command: shell.exec
      # silent: true
      params:
        working_dir: src
        shell: bash
        env:
          devtoolsbot_npm_token: ${devtoolsbot_npm_token}
          node_js_version: ${node_js_version}
          DOWNLOAD_CENTER_AWS_KEY_ARTIFACTS: ${AWS_ACCESS_KEY_ID}
          DOWNLOAD_CENTER_AWS_SECRET_ARTIFACTS: ${AWS_SECRET_ACCESS_KEY}
          DOWNLOAD_CENTER_AWS_SESSION_TOKEN_ARTIFACTS: ${AWS_SESSION_TOKEN}
        script: |
          set -e
          .evergreen/run-evergreen-release.sh publish

  run_perf_tests:
    - command: shell.exec
      params:
        working_dir: src
        shell: bash
        script: |
          set -e
          set -x
          npx -y mongodb-runner exec -t standalone --version=7.0.x-enterprise -- \
            sh -c 'MONGOSH_SMOKE_TEST_SERVER="$MONGODB_URI" ./dist/mongosh --perfTests > perf_results.json'
        env:
          DISTRO_ID: ${distro_id}
    - command: shell.exec
      params:
        script: |
          # We use the requester expansion to determine whether the data is from a mainline evergreen run or not
          if [ "${requester}" == "commit" ]; then
            is_mainline=true
          else
            is_mainline=false
          fi

          # Parse the username out of the order_id. Patches append the username. The Signal Processing Service (SPS) endpoint does not need the other information.
          parsed_order_id=$(echo "${revision_order_id}" | awk -F'_' '{print $NF}')

          # Submit the performance data to the SPS endpoint
          response=$(curl -s -w "\nHTTP_STATUS:%{http_code}" -X 'POST' \
            "https://performance-monitoring-api.corp.mongodb.com/raw_perf_results/cedar_report?project=${project_id}&version=${version_id}&variant=${build_variant}&order=$parsed_order_id&task_name=${task_name}&task_id=${task_id}&execution=${execution}&mainline=$is_mainline" \
            -H 'accept: application/json' \
            -H 'Content-Type: application/json' \
            -d @src/perf_results.json)

          http_status=$(echo "$response" | grep "HTTP_STATUS" | awk -F':' '{print $2}')
          response_body=$(echo "$response" | sed '/HTTP_STATUS/d')

          # We want to throw an error if the data was not successfully submitted
          if [ "$http_status" -ne 200 ]; then
            echo "Error: Received HTTP status $http_status"
            echo "Response Body: $response_body"
            exit 1
          fi

          echo "Response Body: $response_body"
          echo "HTTP Status: $http_status"
          
# Tasks will show up as the individual blocks in the Evergreen UI that can
# pass or fail.
#
# Current tasks:
#   compile_ts - Do the initial compilation of TS sources.
#   check - Performs linter and dependency checks.
#   check_coverage - Performs coverage check by merging all NYC outputs first
#   test_{version} - Runs all tests, against a specified mongod version.
#   test_vscode - Run the vscode extension integration tests.
#   test_connectivity - Runs extra connectivity tests.
#   test_apistrict - Runs shell API and CLI tests with --apiStrict --apiDeprecationErrors.
#   compile_artifact - Compile the release binary.
#   package_artifact - Upload the release binary together with other files to S3.
#   sign_artifact - Get a package file from S3, sign it, put it back into S3.
#   test_linux_artifact - Test that the built artifact works where we expect it to.
#   release_publish - Publishes the npm packages and uploads the tarballs.
#   generate_license_and_vulnerability_report - Generates a report of vulnerabilities affecting the bundled application.
#   pkg_test_* - Run tests on the release packages
tasks:
  - name: compile_ts
    commands:
      - func: checkout
      - func: compile_ts
        vars:
          node_js_version: "20.19.5"

  - name: check
    depends_on:
      - name: compile_ts
        variant: linux_compile
    commands:
      - func: checkout
      - func: install
        vars:
          node_js_version: "20.19.5"
      - func: check
        vars:
          node_js_version: "20.19.5"

  - name: check_coverage
    depends_on:
      - name: test_arg_parser
        variant: darwin-n20
      - name: test_async_rewriter2
        variant: darwin-n20
      - name: test_autocomplete
        variant: darwin-n20
      - name: test_browser_repl
        variant: darwin-n20
      - name: test_browser_runtime_core
        variant: darwin-n20
      - name: test_browser_runtime_electron
        variant: darwin-n20
      - name: test_build
        variant: darwin-n20
      - name: test_cli_repl
        variant: darwin-n20
      - name: test_e2e_tests
        variant: darwin-n20
      - name: test_editor
        variant: darwin-n20
      - name: test_errors
        variant: darwin-n20
      - name: test_history
        variant: darwin-n20
      - name: test_i18n
        variant: darwin-n20
      - name: test_js_multiline_to_singleline
        variant: darwin-n20
      - name: test_logging
        variant: darwin-n20
      - name: test_node_runtime_worker_thread
        variant: darwin-n20
      - name: test_service_provider_core
        variant: darwin-n20
      - name: test_service_provider_node_driver
        variant: darwin-n20
      - name: test_shell_api
        variant: darwin-n20
      - name: test_shell_bson
        variant: darwin-n20
      - name: test_shell_evaluator
        variant: darwin-n20
      - name: test_snippet_manager
        variant: darwin-n20
      - name: test_types
        variant: darwin-n20
      - name: test_cli_repl
        variant: tests_darwin-m60xc_n20
      - name: test_e2e_tests
        variant: tests_darwin-m60xc_n20
      - name: test_node_runtime_worker_thread
        variant: tests_darwin-m60xc_n20
      - name: test_service_provider_node_driver
        variant: tests_darwin-m60xc_n20
      - name: test_shell_api
        variant: tests_darwin-m60xc_n20
      - name: test_cli_repl
        variant: tests_darwin-m60xe_n20
      - name: test_e2e_tests
        variant: tests_darwin-m60xe_n20
      - name: test_node_runtime_worker_thread
        variant: tests_darwin-m60xe_n20
      - name: test_service_provider_node_driver
        variant: tests_darwin-m60xe_n20
      - name: test_shell_api
        variant: tests_darwin-m60xe_n20
      - name: test_cli_repl
        variant: tests_darwin-m70xc_n20
      - name: test_e2e_tests
        variant: tests_darwin-m70xc_n20
      - name: test_node_runtime_worker_thread
        variant: tests_darwin-m70xc_n20
      - name: test_service_provider_node_driver
        variant: tests_darwin-m70xc_n20
      - name: test_shell_api
        variant: tests_darwin-m70xc_n20
      - name: test_cli_repl
        variant: tests_darwin-m70xe_n20
      - name: test_e2e_tests
        variant: tests_darwin-m70xe_n20
      - name: test_node_runtime_worker_thread
        variant: tests_darwin-m70xe_n20
      - name: test_service_provider_node_driver
        variant: tests_darwin-m70xe_n20
      - name: test_shell_api
        variant: tests_darwin-m70xe_n20
      - name: test_cli_repl
        variant: tests_darwin-m80xc_n20
      - name: test_e2e_tests
        variant: tests_darwin-m80xc_n20
      - name: test_node_runtime_worker_thread
        variant: tests_darwin-m80xc_n20
      - name: test_service_provider_node_driver
        variant: tests_darwin-m80xc_n20
      - name: test_shell_api
        variant: tests_darwin-m80xc_n20
      - name: test_cli_repl
        variant: tests_darwin-m80xe_n20
      - name: test_e2e_tests
        variant: tests_darwin-m80xe_n20
      - name: test_node_runtime_worker_thread
        variant: tests_darwin-m80xe_n20
      - name: test_service_provider_node_driver
        variant: tests_darwin-m80xe_n20
      - name: test_shell_api
        variant: tests_darwin-m80xe_n20
      - name: test_cli_repl
        variant: tests_darwin-m82xc_n20
      - name: test_e2e_tests
        variant: tests_darwin-m82xc_n20
      - name: test_node_runtime_worker_thread
        variant: tests_darwin-m82xc_n20
      - name: test_service_provider_node_driver
        variant: tests_darwin-m82xc_n20
      - name: test_shell_api
        variant: tests_darwin-m82xc_n20
      - name: test_cli_repl
        variant: tests_darwin-m82xe_n20
      - name: test_e2e_tests
        variant: tests_darwin-m82xe_n20
      - name: test_node_runtime_worker_thread
        variant: tests_darwin-m82xe_n20
      - name: test_service_provider_node_driver
        variant: tests_darwin-m82xe_n20
      - name: test_shell_api
        variant: tests_darwin-m82xe_n20
      - name: test_cli_repl
        variant: tests_darwin-mlatest_n20
      - name: test_e2e_tests
        variant: tests_darwin-mlatest_n20
      - name: test_node_runtime_worker_thread
        variant: tests_darwin-mlatest_n20
      - name: test_service_provider_node_driver
        variant: tests_darwin-mlatest_n20
      - name: test_shell_api
        variant: tests_darwin-mlatest_n20
      - name: test_arg_parser
        variant: linux-n20
      - name: test_async_rewriter2
        variant: linux-n20
      - name: test_autocomplete
        variant: linux-n20
      - name: test_browser_runtime_core
        variant: linux-n20
      - name: test_browser_runtime_electron
        variant: linux-n20
      - name: test_build
        variant: linux-n20
      - name: test_cli_repl
        variant: linux-n20
      - name: test_e2e_tests
        variant: linux-n20
      - name: test_editor
        variant: linux-n20
      - name: test_errors
        variant: linux-n20
      - name: test_history
        variant: linux-n20
      - name: test_i18n
        variant: linux-n20
      - name: test_java_shell
        variant: linux-n20
      - name: test_js_multiline_to_singleline
        variant: linux-n20
      - name: test_logging
        variant: linux-n20
      - name: test_node_runtime_worker_thread
        variant: linux-n20
      - name: test_service_provider_core
        variant: linux-n20
      - name: test_service_provider_node_driver
        variant: linux-n20
      - name: test_shell_api
        variant: linux-n20
      - name: test_shell_bson
        variant: linux-n20
      - name: test_shell_evaluator
        variant: linux-n20
      - name: test_snippet_manager
        variant: linux-n20
      - name: test_types
        variant: linux-n20
      - name: test_cli_repl
        variant: tests_linux-m42xc_n20
      - name: test_e2e_tests
        variant: tests_linux-m42xc_n20
      - name: test_java_shell
        variant: tests_linux-m42xc_n20
      - name: test_node_runtime_worker_thread
        variant: tests_linux-m42xc_n20
      - name: test_service_provider_node_driver
        variant: tests_linux-m42xc_n20
      - name: test_shell_api
        variant: tests_linux-m42xc_n20
      - name: test_cli_repl
        variant: tests_linux-m44xc_n20
      - name: test_e2e_tests
        variant: tests_linux-m44xc_n20
      - name: test_java_shell
        variant: tests_linux-m44xc_n20
      - name: test_node_runtime_worker_thread
        variant: tests_linux-m44xc_n20
      - name: test_service_provider_node_driver
        variant: tests_linux-m44xc_n20
      - name: test_shell_api
        variant: tests_linux-m44xc_n20
      - name: test_cli_repl
        variant: tests_linux-m44xe_n20
      - name: test_e2e_tests
        variant: tests_linux-m44xe_n20
      - name: test_java_shell
        variant: tests_linux-m44xe_n20
      - name: test_node_runtime_worker_thread
        variant: tests_linux-m44xe_n20
      - name: test_service_provider_node_driver
        variant: tests_linux-m44xe_n20
      - name: test_shell_api
        variant: tests_linux-m44xe_n20
      - name: test_cli_repl
        variant: tests_linux-m50xc_n20
      - name: test_e2e_tests
        variant: tests_linux-m50xc_n20
      - name: test_java_shell
        variant: tests_linux-m50xc_n20
      - name: test_node_runtime_worker_thread
        variant: tests_linux-m50xc_n20
      - name: test_service_provider_node_driver
        variant: tests_linux-m50xc_n20
      - name: test_shell_api
        variant: tests_linux-m50xc_n20
      - name: test_cli_repl
        variant: tests_linux-m50xe_n20
      - name: test_e2e_tests
        variant: tests_linux-m50xe_n20
      - name: test_java_shell
        variant: tests_linux-m50xe_n20
      - name: test_node_runtime_worker_thread
        variant: tests_linux-m50xe_n20
      - name: test_service_provider_node_driver
        variant: tests_linux-m50xe_n20
      - name: test_shell_api
        variant: tests_linux-m50xe_n20
      - name: test_cli_repl
        variant: tests_linux-m60xc_n20
      - name: test_e2e_tests
        variant: tests_linux-m60xc_n20
      - name: test_java_shell
        variant: tests_linux-m60xc_n20
      - name: test_node_runtime_worker_thread
        variant: tests_linux-m60xc_n20
      - name: test_service_provider_node_driver
        variant: tests_linux-m60xc_n20
      - name: test_shell_api
        variant: tests_linux-m60xc_n20
      - name: test_cli_repl
        variant: tests_linux-m60xe_n20
      - name: test_e2e_tests
        variant: tests_linux-m60xe_n20
      - name: test_java_shell
        variant: tests_linux-m60xe_n20
      - name: test_node_runtime_worker_thread
        variant: tests_linux-m60xe_n20
      - name: test_service_provider_node_driver
        variant: tests_linux-m60xe_n20
      - name: test_shell_api
        variant: tests_linux-m60xe_n20
      - name: test_cli_repl
        variant: tests_linux-m70xc_n20
      - name: test_e2e_tests
        variant: tests_linux-m70xc_n20
      - name: test_java_shell
        variant: tests_linux-m70xc_n20
      - name: test_node_runtime_worker_thread
        variant: tests_linux-m70xc_n20
      - name: test_service_provider_node_driver
        variant: tests_linux-m70xc_n20
      - name: test_shell_api
        variant: tests_linux-m70xc_n20
      - name: test_cli_repl
        variant: tests_linux-m70xe_n20
      - name: test_e2e_tests
        variant: tests_linux-m70xe_n20
      - name: test_java_shell
        variant: tests_linux-m70xe_n20
      - name: test_node_runtime_worker_thread
        variant: tests_linux-m70xe_n20
      - name: test_service_provider_node_driver
        variant: tests_linux-m70xe_n20
      - name: test_shell_api
        variant: tests_linux-m70xe_n20
      - name: test_cli_repl
        variant: tests_linux-m80xc_n20
      - name: test_e2e_tests
        variant: tests_linux-m80xc_n20
      - name: test_java_shell
        variant: tests_linux-m80xc_n20
      - name: test_node_runtime_worker_thread
        variant: tests_linux-m80xc_n20
      - name: test_service_provider_node_driver
        variant: tests_linux-m80xc_n20
      - name: test_shell_api
        variant: tests_linux-m80xc_n20
      - name: test_cli_repl
        variant: tests_linux-m80xe_n20
      - name: test_e2e_tests
        variant: tests_linux-m80xe_n20
      - name: test_java_shell
        variant: tests_linux-m80xe_n20
      - name: test_node_runtime_worker_thread
        variant: tests_linux-m80xe_n20
      - name: test_service_provider_node_driver
        variant: tests_linux-m80xe_n20
      - name: test_shell_api
        variant: tests_linux-m80xe_n20
      - name: test_cli_repl
        variant: tests_linux-m82xc_n20
      - name: test_e2e_tests
        variant: tests_linux-m82xc_n20
      - name: test_java_shell
        variant: tests_linux-m82xc_n20
      - name: test_node_runtime_worker_thread
        variant: tests_linux-m82xc_n20
      - name: test_service_provider_node_driver
        variant: tests_linux-m82xc_n20
      - name: test_shell_api
        variant: tests_linux-m82xc_n20
      - name: test_cli_repl
        variant: tests_linux-m82xe_n20
      - name: test_e2e_tests
        variant: tests_linux-m82xe_n20
      - name: test_java_shell
        variant: tests_linux-m82xe_n20
      - name: test_node_runtime_worker_thread
        variant: tests_linux-m82xe_n20
      - name: test_service_provider_node_driver
        variant: tests_linux-m82xe_n20
      - name: test_shell_api
        variant: tests_linux-m82xe_n20
      - name: test_cli_repl
        variant: tests_linux-mlatest_n20
      - name: test_e2e_tests
        variant: tests_linux-mlatest_n20
      - name: test_java_shell
        variant: tests_linux-mlatest_n20
      - name: test_node_runtime_worker_thread
        variant: tests_linux-mlatest_n20
      - name: test_service_provider_node_driver
        variant: tests_linux-mlatest_n20
      - name: test_shell_api
        variant: tests_linux-mlatest_n20
      - name: test_arg_parser
        variant: win32-n20
      - name: test_async_rewriter2
        variant: win32-n20
      - name: test_autocomplete
        variant: win32-n20
      - name: test_browser_runtime_core
        variant: win32-n20
      - name: test_browser_runtime_electron
        variant: win32-n20
      - name: test_build
        variant: win32-n20
      - name: test_cli_repl
        variant: win32-n20
      - name: test_e2e_tests
        variant: win32-n20
      - name: test_editor
        variant: win32-n20
      - name: test_errors
        variant: win32-n20
      - name: test_history
        variant: win32-n20
      - name: test_i18n
        variant: win32-n20
      - name: test_js_multiline_to_singleline
        variant: win32-n20
      - name: test_logging
        variant: win32-n20
      - name: test_node_runtime_worker_thread
        variant: win32-n20
      - name: test_service_provider_core
        variant: win32-n20
      - name: test_service_provider_node_driver
        variant: win32-n20
      - name: test_shell_api
        variant: win32-n20
      - name: test_shell_bson
        variant: win32-n20
      - name: test_shell_evaluator
        variant: win32-n20
      - name: test_snippet_manager
        variant: win32-n20
      - name: test_types
        variant: win32-n20
      - name: test_cli_repl
        variant: tests_win32-m42xc_n20
      - name: test_e2e_tests
        variant: tests_win32-m42xc_n20
      - name: test_node_runtime_worker_thread
        variant: tests_win32-m42xc_n20
      - name: test_service_provider_node_driver
        variant: tests_win32-m42xc_n20
      - name: test_shell_api
        variant: tests_win32-m42xc_n20
      - name: test_cli_repl
        variant: tests_win32-m42xe_n20
      - name: test_e2e_tests
        variant: tests_win32-m42xe_n20
      - name: test_node_runtime_worker_thread
        variant: tests_win32-m42xe_n20
      - name: test_service_provider_node_driver
        variant: tests_win32-m42xe_n20
      - name: test_shell_api
        variant: tests_win32-m42xe_n20
      - name: test_cli_repl
        variant: tests_win32-m44xc_n20
      - name: test_e2e_tests
        variant: tests_win32-m44xc_n20
      - name: test_node_runtime_worker_thread
        variant: tests_win32-m44xc_n20
      - name: test_service_provider_node_driver
        variant: tests_win32-m44xc_n20
      - name: test_shell_api
        variant: tests_win32-m44xc_n20
      - name: test_cli_repl
        variant: tests_win32-m44xe_n20
      - name: test_e2e_tests
        variant: tests_win32-m44xe_n20
      - name: test_node_runtime_worker_thread
        variant: tests_win32-m44xe_n20
      - name: test_service_provider_node_driver
        variant: tests_win32-m44xe_n20
      - name: test_shell_api
        variant: tests_win32-m44xe_n20
      - name: test_cli_repl
        variant: tests_win32-m50xc_n20
      - name: test_e2e_tests
        variant: tests_win32-m50xc_n20
      - name: test_node_runtime_worker_thread
        variant: tests_win32-m50xc_n20
      - name: test_service_provider_node_driver
        variant: tests_win32-m50xc_n20
      - name: test_shell_api
        variant: tests_win32-m50xc_n20
      - name: test_cli_repl
        variant: tests_win32-m50xe_n20
      - name: test_e2e_tests
        variant: tests_win32-m50xe_n20
      - name: test_node_runtime_worker_thread
        variant: tests_win32-m50xe_n20
      - name: test_service_provider_node_driver
        variant: tests_win32-m50xe_n20
      - name: test_shell_api
        variant: tests_win32-m50xe_n20
      - name: test_cli_repl
        variant: tests_win32-m60xc_n20
      - name: test_e2e_tests
        variant: tests_win32-m60xc_n20
      - name: test_node_runtime_worker_thread
        variant: tests_win32-m60xc_n20
      - name: test_service_provider_node_driver
        variant: tests_win32-m60xc_n20
      - name: test_shell_api
        variant: tests_win32-m60xc_n20
      - name: test_cli_repl
        variant: tests_win32-m60xe_n20
      - name: test_e2e_tests
        variant: tests_win32-m60xe_n20
      - name: test_node_runtime_worker_thread
        variant: tests_win32-m60xe_n20
      - name: test_service_provider_node_driver
        variant: tests_win32-m60xe_n20
      - name: test_shell_api
        variant: tests_win32-m60xe_n20
      - name: test_cli_repl
        variant: tests_win32-m70xc_n20
      - name: test_e2e_tests
        variant: tests_win32-m70xc_n20
      - name: test_node_runtime_worker_thread
        variant: tests_win32-m70xc_n20
      - name: test_service_provider_node_driver
        variant: tests_win32-m70xc_n20
      - name: test_shell_api
        variant: tests_win32-m70xc_n20
      - name: test_cli_repl
        variant: tests_win32-m70xe_n20
      - name: test_e2e_tests
        variant: tests_win32-m70xe_n20
      - name: test_node_runtime_worker_thread
        variant: tests_win32-m70xe_n20
      - name: test_service_provider_node_driver
        variant: tests_win32-m70xe_n20
      - name: test_shell_api
        variant: tests_win32-m70xe_n20
      - name: test_cli_repl
        variant: tests_win32-m80xc_n20
      - name: test_e2e_tests
        variant: tests_win32-m80xc_n20
      - name: test_node_runtime_worker_thread
        variant: tests_win32-m80xc_n20
      - name: test_service_provider_node_driver
        variant: tests_win32-m80xc_n20
      - name: test_shell_api
        variant: tests_win32-m80xc_n20
      - name: test_cli_repl
        variant: tests_win32-m80xe_n20
      - name: test_e2e_tests
        variant: tests_win32-m80xe_n20
      - name: test_node_runtime_worker_thread
        variant: tests_win32-m80xe_n20
      - name: test_service_provider_node_driver
        variant: tests_win32-m80xe_n20
      - name: test_shell_api
        variant: tests_win32-m80xe_n20
      - name: test_cli_repl
        variant: tests_win32-m82xc_n20
      - name: test_e2e_tests
        variant: tests_win32-m82xc_n20
      - name: test_node_runtime_worker_thread
        variant: tests_win32-m82xc_n20
      - name: test_service_provider_node_driver
        variant: tests_win32-m82xc_n20
      - name: test_shell_api
        variant: tests_win32-m82xc_n20
      - name: test_cli_repl
        variant: tests_win32-m82xe_n20
      - name: test_e2e_tests
        variant: tests_win32-m82xe_n20
      - name: test_node_runtime_worker_thread
        variant: tests_win32-m82xe_n20
      - name: test_service_provider_node_driver
        variant: tests_win32-m82xe_n20
      - name: test_shell_api
        variant: tests_win32-m82xe_n20
      - name: test_cli_repl
        variant: tests_win32-mlatest_n20
      - name: test_e2e_tests
        variant: tests_win32-mlatest_n20
      - name: test_node_runtime_worker_thread
        variant: tests_win32-mlatest_n20
      - name: test_service_provider_node_driver
        variant: tests_win32-mlatest_n20
      - name: test_shell_api
        variant: tests_win32-mlatest_n20
    commands:
      - func: checkout
      - func: install
        vars:
          node_js_version: "20.19.5"
      - func: check_coverage
        vars:
          node_js_version: "20.19.5"

  ###
  # UNIT TESTS
  # E.g. test_m60xc_n20 stands for mongod 6.0.x, community edition, Node.js 20
  ###
  - name: test_arg_parser
    tags: ["assigned_to_jira_team_mongosh_mongosh","unit-test"]
    depends_on:
      - name: compile_ts
        variant: linux_compile
    commands:
      - func: checkout
      - func: install
        vars:
          node_js_version: ${node_js_version}
          puppeteer_skip_download: "true"
      - func: test
        vars:
          mongosh_server_test_version: ${mongosh_server_test_version}
          node_js_version: ${node_js_version}
          mongosh_skip_node_version_check: ${mongosh_skip_node_version_check}
          mongosh_test_id: "arg_parser"
          mongosh_run_only_in_package: "arg-parser"
          task_name: ${task_name}
  - name: test_async_rewriter2
    tags: ["assigned_to_jira_team_mongosh_mongosh","unit-test"]
    depends_on:
      - name: compile_ts
        variant: linux_compile
    commands:
      - func: checkout
      - func: install
        vars:
          node_js_version: ${node_js_version}
          puppeteer_skip_download: "true"
      - func: test
        vars:
          mongosh_server_test_version: ${mongosh_server_test_version}
          node_js_version: ${node_js_version}
          mongosh_skip_node_version_check: ${mongosh_skip_node_version_check}
          mongosh_test_id: "async_rewriter2"
          mongosh_run_only_in_package: "async-rewriter2"
          task_name: ${task_name}
  - name: test_autocomplete
    tags: ["assigned_to_jira_team_mongosh_mongosh","unit-test"]
    depends_on:
      - name: compile_ts
        variant: linux_compile
    commands:
      - func: checkout
      - func: install
        vars:
          node_js_version: ${node_js_version}
          puppeteer_skip_download: "true"
      - func: test
        vars:
          mongosh_server_test_version: ${mongosh_server_test_version}
          node_js_version: ${node_js_version}
          mongosh_skip_node_version_check: ${mongosh_skip_node_version_check}
          mongosh_test_id: "autocomplete"
          mongosh_run_only_in_package: "autocomplete"
          task_name: ${task_name}
  - name: test_browser_repl
    tags: ["assigned_to_jira_team_mongosh_mongosh","unit-test"]
    depends_on:
      - name: compile_ts
        variant: linux_compile
    commands:
      - func: checkout
      - func: install
        vars:
          node_js_version: ${node_js_version}
          puppeteer_skip_download: "false"
      - func: test
        vars:
          mongosh_server_test_version: ${mongosh_server_test_version}
          node_js_version: ${node_js_version}
          mongosh_skip_node_version_check: ${mongosh_skip_node_version_check}
          mongosh_test_id: "browser_repl"
          mongosh_run_only_in_package: "browser-repl"
          task_name: ${task_name}
  - name: test_browser_runtime_core
    tags: ["assigned_to_jira_team_mongosh_mongosh","unit-test"]
    depends_on:
      - name: compile_ts
        variant: linux_compile
    commands:
      - func: checkout
      - func: install
        vars:
          node_js_version: ${node_js_version}
          puppeteer_skip_download: "true"
      - func: test
        vars:
          mongosh_server_test_version: ${mongosh_server_test_version}
          node_js_version: ${node_js_version}
          mongosh_skip_node_version_check: ${mongosh_skip_node_version_check}
          mongosh_test_id: "browser_runtime_core"
          mongosh_run_only_in_package: "browser-runtime-core"
          task_name: ${task_name}
  - name: test_browser_runtime_electron
    tags: ["assigned_to_jira_team_mongosh_mongosh","unit-test"]
    depends_on:
      - name: compile_ts
        variant: linux_compile
    commands:
      - func: checkout
      - func: install
        vars:
          node_js_version: ${node_js_version}
          puppeteer_skip_download: "true"
      - func: test
        vars:
          mongosh_server_test_version: ${mongosh_server_test_version}
          node_js_version: ${node_js_version}
          mongosh_skip_node_version_check: ${mongosh_skip_node_version_check}
          mongosh_test_id: "browser_runtime_electron"
          mongosh_run_only_in_package: "browser-runtime-electron"
          task_name: ${task_name}
  - name: test_build
    tags: ["assigned_to_jira_team_mongosh_mongosh","unit-test"]
    depends_on:
      - name: compile_ts
        variant: linux_compile
    commands:
      - func: checkout
      - func: install
        vars:
          node_js_version: ${node_js_version}
          puppeteer_skip_download: "true"
      - func: test
        vars:
          mongosh_server_test_version: ${mongosh_server_test_version}
          node_js_version: ${node_js_version}
          mongosh_skip_node_version_check: ${mongosh_skip_node_version_check}
          mongosh_test_id: "build"
          mongosh_run_only_in_package: "build"
          task_name: ${task_name}
  - name: test_cli_repl
    tags: ["assigned_to_jira_team_mongosh_mongosh","unit-test"]
    depends_on:
      - name: compile_ts
        variant: linux_compile
    commands:
      - func: checkout
      - func: install
        vars:
          node_js_version: ${node_js_version}
          puppeteer_skip_download: "true"
      - func: test
        vars:
          mongosh_server_test_version: ${mongosh_server_test_version}
          node_js_version: ${node_js_version}
          mongosh_skip_node_version_check: ${mongosh_skip_node_version_check}
          mongosh_test_id: "cli_repl"
          mongosh_run_only_in_package: "cli-repl"
          task_name: ${task_name}
  - name: test_connectivity_tests
    tags: ["assigned_to_jira_team_mongosh_mongosh","unit-test"]
    depends_on:
      - name: compile_ts
        variant: linux_compile
    commands:
      - func: checkout
      - func: install
        vars:
          node_js_version: ${node_js_version}
          puppeteer_skip_download: "true"
      - func: test
        vars:
          mongosh_server_test_version: ${mongosh_server_test_version}
          node_js_version: ${node_js_version}
          mongosh_skip_node_version_check: ${mongosh_skip_node_version_check}
          mongosh_test_id: "connectivity_tests"
          mongosh_run_only_in_package: "connectivity-tests"
          task_name: ${task_name}
  - name: test_e2e_tests
    tags: ["assigned_to_jira_team_mongosh_mongosh","unit-test"]
    depends_on:
      - name: compile_ts
        variant: linux_compile
    commands:
      - func: checkout
      - func: install
        vars:
          node_js_version: ${node_js_version}
          puppeteer_skip_download: "true"
      - func: test
        vars:
          mongosh_server_test_version: ${mongosh_server_test_version}
          node_js_version: ${node_js_version}
          mongosh_skip_node_version_check: ${mongosh_skip_node_version_check}
          mongosh_test_id: "e2e_tests"
          mongosh_run_only_in_package: "e2e-tests"
          task_name: ${task_name}
  - name: test_editor
    tags: ["assigned_to_jira_team_mongosh_mongosh","unit-test"]
    depends_on:
      - name: compile_ts
        variant: linux_compile
    commands:
      - func: checkout
      - func: install
        vars:
          node_js_version: ${node_js_version}
          puppeteer_skip_download: "true"
      - func: test
        vars:
          mongosh_server_test_version: ${mongosh_server_test_version}
          node_js_version: ${node_js_version}
          mongosh_skip_node_version_check: ${mongosh_skip_node_version_check}
          mongosh_test_id: "editor"
          mongosh_run_only_in_package: "editor"
          task_name: ${task_name}
  - name: test_errors
    tags: ["assigned_to_jira_team_mongosh_mongosh","unit-test"]
    depends_on:
      - name: compile_ts
        variant: linux_compile
    commands:
      - func: checkout
      - func: install
        vars:
          node_js_version: ${node_js_version}
          puppeteer_skip_download: "true"
      - func: test
        vars:
          mongosh_server_test_version: ${mongosh_server_test_version}
          node_js_version: ${node_js_version}
          mongosh_skip_node_version_check: ${mongosh_skip_node_version_check}
          mongosh_test_id: "errors"
          mongosh_run_only_in_package: "errors"
          task_name: ${task_name}
  - name: test_history
    tags: ["assigned_to_jira_team_mongosh_mongosh","unit-test"]
    depends_on:
      - name: compile_ts
        variant: linux_compile
    commands:
      - func: checkout
      - func: install
        vars:
          node_js_version: ${node_js_version}
          puppeteer_skip_download: "true"
      - func: test
        vars:
          mongosh_server_test_version: ${mongosh_server_test_version}
          node_js_version: ${node_js_version}
          mongosh_skip_node_version_check: ${mongosh_skip_node_version_check}
          mongosh_test_id: "history"
          mongosh_run_only_in_package: "history"
          task_name: ${task_name}
  - name: test_i18n
    tags: ["assigned_to_jira_team_mongosh_mongosh","unit-test"]
    depends_on:
      - name: compile_ts
        variant: linux_compile
    commands:
      - func: checkout
      - func: install
        vars:
          node_js_version: ${node_js_version}
          puppeteer_skip_download: "true"
      - func: test
        vars:
          mongosh_server_test_version: ${mongosh_server_test_version}
          node_js_version: ${node_js_version}
          mongosh_skip_node_version_check: ${mongosh_skip_node_version_check}
          mongosh_test_id: "i18n"
          mongosh_run_only_in_package: "i18n"
          task_name: ${task_name}
  - name: test_java_shell
    tags: ["assigned_to_jira_team_mongosh_mongosh","unit-test"]
    depends_on:
      - name: compile_ts
        variant: linux_compile
    commands:
      - func: checkout
      - func: install
        vars:
          node_js_version: ${node_js_version}
          puppeteer_skip_download: "true"
      - func: test
        vars:
          mongosh_server_test_version: ${mongosh_server_test_version}
          node_js_version: ${node_js_version}
          mongosh_skip_node_version_check: ${mongosh_skip_node_version_check}
          mongosh_test_id: "java_shell"
          mongosh_run_only_in_package: "java-shell"
          task_name: ${task_name}
  - name: test_js_multiline_to_singleline
    tags: ["assigned_to_jira_team_mongosh_mongosh","unit-test"]
    depends_on:
      - name: compile_ts
        variant: linux_compile
    commands:
      - func: checkout
      - func: install
        vars:
          node_js_version: ${node_js_version}
          puppeteer_skip_download: "true"
      - func: test
        vars:
          mongosh_server_test_version: ${mongosh_server_test_version}
          node_js_version: ${node_js_version}
          mongosh_skip_node_version_check: ${mongosh_skip_node_version_check}
          mongosh_test_id: "js_multiline_to_singleline"
          mongosh_run_only_in_package: "js-multiline-to-singleline"
          task_name: ${task_name}
  - name: test_logging
    tags: ["assigned_to_jira_team_mongosh_mongosh","unit-test"]
    depends_on:
      - name: compile_ts
        variant: linux_compile
    commands:
      - func: checkout
      - func: install
        vars:
          node_js_version: ${node_js_version}
          puppeteer_skip_download: "true"
      - func: test
        vars:
          mongosh_server_test_version: ${mongosh_server_test_version}
          node_js_version: ${node_js_version}
          mongosh_skip_node_version_check: ${mongosh_skip_node_version_check}
          mongosh_test_id: "logging"
          mongosh_run_only_in_package: "logging"
          task_name: ${task_name}
  - name: test_mongosh
    tags: ["assigned_to_jira_team_mongosh_mongosh","unit-test"]
    depends_on:
      - name: compile_ts
        variant: linux_compile
    commands:
      - func: checkout
      - func: install
        vars:
          node_js_version: ${node_js_version}
          puppeteer_skip_download: "true"
      - func: test
        vars:
          mongosh_server_test_version: ${mongosh_server_test_version}
          node_js_version: ${node_js_version}
          mongosh_skip_node_version_check: ${mongosh_skip_node_version_check}
          mongosh_test_id: "mongosh"
          mongosh_run_only_in_package: "mongosh"
          task_name: ${task_name}
  - name: test_node_runtime_worker_thread
    tags: ["assigned_to_jira_team_mongosh_mongosh","unit-test"]
    depends_on:
      - name: compile_ts
        variant: linux_compile
    commands:
      - func: checkout
      - func: install
        vars:
          node_js_version: ${node_js_version}
          puppeteer_skip_download: "true"
      - func: test
        vars:
          mongosh_server_test_version: ${mongosh_server_test_version}
          node_js_version: ${node_js_version}
          mongosh_skip_node_version_check: ${mongosh_skip_node_version_check}
          mongosh_test_id: "node_runtime_worker_thread"
          mongosh_run_only_in_package: "node-runtime-worker-thread"
          task_name: ${task_name}
  - name: test_service_provider_core
    tags: ["assigned_to_jira_team_mongosh_mongosh","unit-test"]
    depends_on:
      - name: compile_ts
        variant: linux_compile
    commands:
      - func: checkout
      - func: install
        vars:
          node_js_version: ${node_js_version}
          puppeteer_skip_download: "true"
      - func: test
        vars:
          mongosh_server_test_version: ${mongosh_server_test_version}
          node_js_version: ${node_js_version}
          mongosh_skip_node_version_check: ${mongosh_skip_node_version_check}
          mongosh_test_id: "service_provider_core"
          mongosh_run_only_in_package: "service-provider-core"
          task_name: ${task_name}
  - name: test_service_provider_node_driver
    tags: ["assigned_to_jira_team_mongosh_mongosh","unit-test"]
    depends_on:
      - name: compile_ts
        variant: linux_compile
    commands:
      - func: checkout
      - func: install
        vars:
          node_js_version: ${node_js_version}
          puppeteer_skip_download: "true"
      - func: test
        vars:
          mongosh_server_test_version: ${mongosh_server_test_version}
          node_js_version: ${node_js_version}
          mongosh_skip_node_version_check: ${mongosh_skip_node_version_check}
          mongosh_test_id: "service_provider_node_driver"
          mongosh_run_only_in_package: "service-provider-node-driver"
          task_name: ${task_name}
  - name: test_shell_api
    tags: ["assigned_to_jira_team_mongosh_mongosh","unit-test"]
    depends_on:
      - name: compile_ts
        variant: linux_compile
    commands:
      - func: checkout
      - func: install
        vars:
          node_js_version: ${node_js_version}
          puppeteer_skip_download: "true"
      - func: test
        vars:
          mongosh_server_test_version: ${mongosh_server_test_version}
          node_js_version: ${node_js_version}
          mongosh_skip_node_version_check: ${mongosh_skip_node_version_check}
          mongosh_test_id: "shell_api"
          mongosh_run_only_in_package: "shell-api"
          task_name: ${task_name}
  - name: test_shell_bson
    tags: ["assigned_to_jira_team_mongosh_mongosh","unit-test"]
    depends_on:
      - name: compile_ts
        variant: linux_compile
    commands:
      - func: checkout
      - func: install
        vars:
          node_js_version: ${node_js_version}
          puppeteer_skip_download: "true"
      - func: test
        vars:
          mongosh_server_test_version: ${mongosh_server_test_version}
          node_js_version: ${node_js_version}
          mongosh_skip_node_version_check: ${mongosh_skip_node_version_check}
          mongosh_test_id: "shell_bson"
          mongosh_run_only_in_package: "shell-bson"
          task_name: ${task_name}
  - name: test_shell_evaluator
    tags: ["assigned_to_jira_team_mongosh_mongosh","unit-test"]
    depends_on:
      - name: compile_ts
        variant: linux_compile
    commands:
      - func: checkout
      - func: install
        vars:
          node_js_version: ${node_js_version}
          puppeteer_skip_download: "true"
      - func: test
        vars:
          mongosh_server_test_version: ${mongosh_server_test_version}
          node_js_version: ${node_js_version}
          mongosh_skip_node_version_check: ${mongosh_skip_node_version_check}
          mongosh_test_id: "shell_evaluator"
          mongosh_run_only_in_package: "shell-evaluator"
          task_name: ${task_name}
  - name: test_snippet_manager
    tags: ["assigned_to_jira_team_mongosh_mongosh","unit-test"]
    depends_on:
      - name: compile_ts
        variant: linux_compile
    commands:
      - func: checkout
      - func: install
        vars:
          node_js_version: ${node_js_version}
          puppeteer_skip_download: "true"
      - func: test
        vars:
          mongosh_server_test_version: ${mongosh_server_test_version}
          node_js_version: ${node_js_version}
          mongosh_skip_node_version_check: ${mongosh_skip_node_version_check}
          mongosh_test_id: "snippet_manager"
          mongosh_run_only_in_package: "snippet-manager"
          task_name: ${task_name}
  - name: test_types
    tags: ["assigned_to_jira_team_mongosh_mongosh","unit-test"]
    depends_on:
      - name: compile_ts
        variant: linux_compile
    commands:
      - func: checkout
      - func: install
        vars:
          node_js_version: ${node_js_version}
          puppeteer_skip_download: "true"
      - func: test
        vars:
          mongosh_server_test_version: ${mongosh_server_test_version}
          node_js_version: ${node_js_version}
          mongosh_skip_node_version_check: ${mongosh_skip_node_version_check}
          mongosh_test_id: "types"
          mongosh_run_only_in_package: "types"
          task_name: ${task_name}

  ###
  # INTEGRATION TESTS
  ###
  - name: test_vscode
    depends_on:
      - name: compile_ts
        variant: linux_compile
    commands:
      - func: checkout
      - func: install
        vars:
          node_js_version: "20.19.5"
      - func: test_vscode
        vars:
          task_name: ${task_name}
  - name: test_connectivity
    tags: ["extra-integration-test", "assigned_to_jira_team_mongosh_mongosh"]
    depends_on:
      - name: compile_ts
        variant: linux_compile
    commands:
      - func: checkout
      - func: install
        vars:
          node_js_version: "20.19.5"
      - func: test_connectivity
        vars:
          node_js_version: "20.19.5"
          task_name: ${task_name}
  - name: test_apistrict
    tags: ["extra-integration-test", "assigned_to_jira_team_mongosh_mongosh"]
    depends_on:
      - name: compile_ts
        variant: linux_compile
    commands:
      - func: checkout
      - func: install
        vars:
          node_js_version: "20.19.5"
      - func: test_apistrict
        vars:
          node_js_version: "20.19.5"
          mongosh_server_test_version: "latest-alpha-enterprise"
          mongosh_test_force_api_strict: "1"
          task_name: ${task_name}
  - name: compile_artifact
    tags: ["compile-artifact"]
    depends_on:
      - name: compile_ts
        variant: linux_compile
    commands:
      - func: checkout
      - func: install
        vars:
          node_js_version: "20.19.5"
      - func: compile_artifact
        vars:
          node_js_version: "20.19.5"
      - func: upload_compiled_artifact
        vars:
          node_js_version: "20.19.5"
      - func: upload_first_party_deps_list
        vars:
          node_js_version: "20.19.5"

  - name: generate_license_and_vulnerability_report
    tags: ["extra-integration-test"]
    depends_on:
      - name: compile_ts
        variant: linux_compile
    commands:
      - func: checkout
      - func: install
        vars:
          node_js_version: "20.19.5"
      - func: generate_license_and_vulnerability_report
        vars:
          node_js_version: "20.19.5"

  ###
  # E2E TESTS
  ###
  # Tests reuse the same compilation build variant, so we create those variations based on this.
  - name: e2e_tests_linux_x64
    tags: ["e2e-test", "assigned_to_jira_team_mongosh_mongosh"]
    depends_on:
      - name: compile_artifact
        variant: build_linux_x64
    commands:
      - func: checkout
      - func: install
        vars:
          node_js_version: ${node_js_version}
      - func: download_compiled_artifact
        vars:
          executable_os_id: linux-x64
      - func: run_e2e_tests
        vars:
          node_js_version: ${node_js_version}
          mongosh_server_test_version: ${mongosh_server_test_version}
          mongosh_test_e2e_force_fips: ${mongosh_test_e2e_force_fips}
  - name: e2e_tests_linux_x64_rhel8
    tags: ["e2e-test", "assigned_to_jira_team_mongosh_mongosh"]
    depends_on:
      - name: compile_artifact
        variant: build_linux_x64_rhel8
    commands:
      - func: checkout
      - func: install
        vars:
          node_js_version: ${node_js_version}
      - func: download_compiled_artifact
        vars:
          executable_os_id: linux-x64-rhel8
      - func: run_e2e_tests
        vars:
          node_js_version: ${node_js_version}
          mongosh_server_test_version: ${mongosh_server_test_version}
          mongosh_test_e2e_force_fips: ${mongosh_test_e2e_force_fips}
  - name: e2e_tests_linux_x64_openssl11
    tags: ["e2e-test", "assigned_to_jira_team_mongosh_mongosh"]
    depends_on:
      - name: compile_artifact
        variant: build_linux_x64_openssl11
    commands:
      - func: checkout
      - func: install
        vars:
          node_js_version: ${node_js_version}
      - func: download_compiled_artifact
        vars:
          executable_os_id: linux-x64-openssl11
      - func: run_e2e_tests
        vars:
          node_js_version: ${node_js_version}
          mongosh_server_test_version: ${mongosh_server_test_version}
          mongosh_test_e2e_force_fips: ${mongosh_test_e2e_force_fips}
  - name: e2e_tests_linux_x64_openssl11_rhel8
    tags: ["e2e-test", "assigned_to_jira_team_mongosh_mongosh"]
    depends_on:
      - name: compile_artifact
        variant: build_linux_x64_openssl11_rhel8
    commands:
      - func: checkout
      - func: install
        vars:
          node_js_version: ${node_js_version}
      - func: download_compiled_artifact
        vars:
          executable_os_id: linux-x64-openssl11-rhel8
      - func: run_e2e_tests
        vars:
          node_js_version: ${node_js_version}
          mongosh_server_test_version: ${mongosh_server_test_version}
          mongosh_test_e2e_force_fips: ${mongosh_test_e2e_force_fips}
  - name: e2e_tests_linux_x64_openssl3
    tags: ["e2e-test", "assigned_to_jira_team_mongosh_mongosh"]
    depends_on:
      - name: compile_artifact
        variant: build_linux_x64_openssl3
    commands:
      - func: checkout
      - func: install
        vars:
          node_js_version: ${node_js_version}
      - func: download_compiled_artifact
        vars:
          executable_os_id: linux-x64-openssl3
      - func: run_e2e_tests
        vars:
          node_js_version: ${node_js_version}
          mongosh_server_test_version: ${mongosh_server_test_version}
          mongosh_test_e2e_force_fips: ${mongosh_test_e2e_force_fips}
  - name: e2e_tests_linux_x64_openssl3_rhel8
    tags: ["e2e-test", "assigned_to_jira_team_mongosh_mongosh"]
    depends_on:
      - name: compile_artifact
        variant: build_linux_x64_openssl3_rhel8
    commands:
      - func: checkout
      - func: install
        vars:
          node_js_version: ${node_js_version}
      - func: download_compiled_artifact
        vars:
          executable_os_id: linux-x64-openssl3-rhel8
      - func: run_e2e_tests
        vars:
          node_js_version: ${node_js_version}
          mongosh_server_test_version: ${mongosh_server_test_version}
          mongosh_test_e2e_force_fips: ${mongosh_test_e2e_force_fips}
  - name: e2e_tests_linux_arm64
    tags: ["e2e-test", "assigned_to_jira_team_mongosh_mongosh"]
    depends_on:
      - name: compile_artifact
        variant: build_linux_arm64
    commands:
      - func: checkout
      - func: install
        vars:
          node_js_version: ${node_js_version}
      - func: download_compiled_artifact
        vars:
          executable_os_id: linux-arm64
      - func: run_e2e_tests
        vars:
          node_js_version: ${node_js_version}
          mongosh_server_test_version: ${mongosh_server_test_version}
          mongosh_test_e2e_force_fips: ${mongosh_test_e2e_force_fips}
  - name: e2e_tests_linux_arm64_openssl11
    tags: ["e2e-test", "assigned_to_jira_team_mongosh_mongosh"]
    depends_on:
      - name: compile_artifact
        variant: build_linux_arm64_openssl11
    commands:
      - func: checkout
      - func: install
        vars:
          node_js_version: ${node_js_version}
      - func: download_compiled_artifact
        vars:
          executable_os_id: linux-arm64-openssl11
      - func: run_e2e_tests
        vars:
          node_js_version: ${node_js_version}
          mongosh_server_test_version: ${mongosh_server_test_version}
          mongosh_test_e2e_force_fips: ${mongosh_test_e2e_force_fips}
  - name: e2e_tests_linux_arm64_openssl3
    tags: ["e2e-test", "assigned_to_jira_team_mongosh_mongosh"]
    depends_on:
      - name: compile_artifact
        variant: build_linux_arm64_openssl3
    commands:
      - func: checkout
      - func: install
        vars:
          node_js_version: ${node_js_version}
      - func: download_compiled_artifact
        vars:
          executable_os_id: linux-arm64-openssl3
      - func: run_e2e_tests
        vars:
          node_js_version: ${node_js_version}
          mongosh_server_test_version: ${mongosh_server_test_version}
          mongosh_test_e2e_force_fips: ${mongosh_test_e2e_force_fips}
  - name: e2e_tests_linux_ppc64le
    tags: ["e2e-test", "assigned_to_jira_team_mongosh_mongosh"]
    depends_on:
      - name: compile_artifact
        variant: build_linux_ppc64le
    commands:
      - func: checkout
      - func: install
        vars:
          node_js_version: ${node_js_version}
      - func: download_compiled_artifact
        vars:
          executable_os_id: linux-ppc64le
      - func: run_e2e_tests
        vars:
          node_js_version: ${node_js_version}
          mongosh_server_test_version: ${mongosh_server_test_version}
          mongosh_test_e2e_force_fips: ${mongosh_test_e2e_force_fips}
  - name: e2e_tests_linux_s390x
    tags: ["e2e-test", "assigned_to_jira_team_mongosh_mongosh"]
    depends_on:
      - name: compile_artifact
        variant: build_linux_s390x
    commands:
      - func: checkout
      - func: install
        vars:
          node_js_version: ${node_js_version}
      - func: download_compiled_artifact
        vars:
          executable_os_id: linux-s390x
      - func: run_e2e_tests
        vars:
          node_js_version: ${node_js_version}
          mongosh_server_test_version: ${mongosh_server_test_version}
          mongosh_test_e2e_force_fips: ${mongosh_test_e2e_force_fips}
  - name: e2e_tests_darwin
    tags: ["e2e-test", "assigned_to_jira_team_mongosh_mongosh"]
    depends_on:
      - name: compile_artifact
        variant: build_darwin
    commands:
      - func: checkout
      - func: install
        vars:
          node_js_version: ${node_js_version}
      - func: download_compiled_artifact
        vars:
          executable_os_id: darwin-x64
      - func: run_e2e_tests
        vars:
          node_js_version: ${node_js_version}
          mongosh_server_test_version: ${mongosh_server_test_version}
          mongosh_test_e2e_force_fips: ${mongosh_test_e2e_force_fips}
  - name: e2e_tests_darwin_arm64
    tags: ["e2e-test", "assigned_to_jira_team_mongosh_mongosh"]
    depends_on:
      - name: compile_artifact
        variant: build_darwin_arm64
    commands:
      - func: checkout
      - func: install
        vars:
          node_js_version: ${node_js_version}
      - func: download_compiled_artifact
        vars:
          executable_os_id: darwin-arm64
      - func: run_e2e_tests
        vars:
          node_js_version: ${node_js_version}
          mongosh_server_test_version: ${mongosh_server_test_version}
          mongosh_test_e2e_force_fips: ${mongosh_test_e2e_force_fips}
  - name: e2e_tests_win32
    tags: ["e2e-test", "assigned_to_jira_team_mongosh_mongosh"]
    depends_on:
      - name: compile_artifact
        variant: build_win32
    commands:
      - func: checkout
      - func: install
        vars:
          node_js_version: ${node_js_version}
      - func: download_compiled_artifact
        vars:
          executable_os_id: win32
      - func: run_e2e_tests
        vars:
          node_js_version: ${node_js_version}
          mongosh_server_test_version: ${mongosh_server_test_version}
          mongosh_test_e2e_force_fips: ${mongosh_test_e2e_force_fips}
  - name: perf_tests_linux_x64
    tags: ["perf-test"]
    depends_on:
      - name: compile_artifact
        variant: build_linux_x64
    commands:
      - func: checkout
      - func: install
        vars:
          node_js_version: "20.19.5"
      - func: download_compiled_artifact
        vars:
          executable_os_id: "linux-x64"
      - func: run_perf_tests

  ###
  # EXECUTABLE CONNECTIVITY TESTS
  ###
  - name: executable_connectivity_test_linux_x64_rocky8
    tags: ["connectivity-test"]
    depends_on:
      - name: compile_artifact
        variant: build_linux_x64
    commands:
      - func: checkout
      - func: install
        vars:
          node_js_version: "20.19.5"
      - func: download_compiled_artifact
        vars:
          executable_os_id: linux-x64
      - func: test_connectivity
        vars:
          node_js_version: "20.19.5"
          test_mongosh_executable: dist/mongosh
          kerberos_jumphost_dockerfile: "Dockerfile.rocky8"
          task_name: ${task_name}
  - name: executable_connectivity_test_linux_x64_ubuntu2004
    tags: ["connectivity-test"]
    depends_on:
      - name: compile_artifact
        variant: build_linux_x64
    commands:
      - func: checkout
      - func: install
        vars:
          node_js_version: "20.19.5"
      - func: download_compiled_artifact
        vars:
          executable_os_id: linux-x64
      - func: test_connectivity
        vars:
          node_js_version: "20.19.5"
          test_mongosh_executable: dist/mongosh
          kerberos_jumphost_dockerfile: "Dockerfile.ubuntu2004"
          task_name: ${task_name}
  - name: executable_connectivity_test_linux_x64_node20
    tags: ["connectivity-test"]
    depends_on:
      - name: compile_artifact
        variant: build_linux_x64
    commands:
      - func: checkout
      - func: install
        vars:
          node_js_version: "20.19.5"
      - func: download_compiled_artifact
        vars:
          executable_os_id: linux-x64
      - func: test_connectivity
        vars:
          node_js_version: "20.19.5"
          test_mongosh_executable: dist/mongosh
          kerberos_jumphost_dockerfile: "Dockerfile.node20"
          task_name: ${task_name}
  - name: executable_connectivity_test_linux_x64_rocky9
    tags: ["connectivity-test"]
    depends_on:
      - name: compile_artifact
        variant: build_linux_x64
    commands:
      - func: checkout
      - func: install
        vars:
          node_js_version: "20.19.5"
      - func: download_compiled_artifact
        vars:
          executable_os_id: linux-x64
      - func: test_connectivity
        vars:
          node_js_version: "20.19.5"
          test_mongosh_executable: dist/mongosh
          kerberos_jumphost_dockerfile: "Dockerfile.rocky9"
          task_name: ${task_name}
  - name: executable_connectivity_test_linux_x64_ubuntu2204
    tags: ["connectivity-test"]
    depends_on:
      - name: compile_artifact
        variant: build_linux_x64
    commands:
      - func: checkout
      - func: install
        vars:
          node_js_version: "20.19.5"
      - func: download_compiled_artifact
        vars:
          executable_os_id: linux-x64
      - func: test_connectivity
        vars:
          node_js_version: "20.19.5"
          test_mongosh_executable: dist/mongosh
          kerberos_jumphost_dockerfile: "Dockerfile.ubuntu2204"
          task_name: ${task_name}
  - name: executable_connectivity_test_linux_x64_openssl11_rocky8
    tags: ["connectivity-test"]
    depends_on:
      - name: compile_artifact
        variant: build_linux_x64_openssl11
    commands:
      - func: checkout
      - func: install
        vars:
          node_js_version: "20.19.5"
      - func: download_compiled_artifact
        vars:
          executable_os_id: linux-x64-openssl11
      - func: test_connectivity
        vars:
          node_js_version: "20.19.5"
          test_mongosh_executable: dist/mongosh
          kerberos_jumphost_dockerfile: "Dockerfile.rocky8"
          task_name: ${task_name}
  - name: executable_connectivity_test_linux_x64_openssl11_ubuntu2004
    tags: ["connectivity-test"]
    depends_on:
      - name: compile_artifact
        variant: build_linux_x64_openssl11
    commands:
      - func: checkout
      - func: install
        vars:
          node_js_version: "20.19.5"
      - func: download_compiled_artifact
        vars:
          executable_os_id: linux-x64-openssl11
      - func: test_connectivity
        vars:
          node_js_version: "20.19.5"
          test_mongosh_executable: dist/mongosh
          kerberos_jumphost_dockerfile: "Dockerfile.ubuntu2004"
          task_name: ${task_name}
  - name: executable_connectivity_test_linux_x64_openssl3_node20
    tags: ["connectivity-test"]
    depends_on:
      - name: compile_artifact
        variant: build_linux_x64_openssl3
    commands:
      - func: checkout
      - func: install
        vars:
          node_js_version: "20.19.5"
      - func: download_compiled_artifact
        vars:
          executable_os_id: linux-x64-openssl3
      - func: test_connectivity
        vars:
          node_js_version: "20.19.5"
          test_mongosh_executable: dist/mongosh
          kerberos_jumphost_dockerfile: "Dockerfile.node20"
          task_name: ${task_name}
  - name: executable_connectivity_test_linux_x64_openssl3_rocky9
    tags: ["connectivity-test"]
    depends_on:
      - name: compile_artifact
        variant: build_linux_x64_openssl3
    commands:
      - func: checkout
      - func: install
        vars:
          node_js_version: "20.19.5"
      - func: download_compiled_artifact
        vars:
          executable_os_id: linux-x64-openssl3
      - func: test_connectivity
        vars:
          node_js_version: "20.19.5"
          test_mongosh_executable: dist/mongosh
          kerberos_jumphost_dockerfile: "Dockerfile.rocky9"
          task_name: ${task_name}
  - name: executable_connectivity_test_linux_x64_openssl3_ubuntu2204
    tags: ["connectivity-test"]
    depends_on:
      - name: compile_artifact
        variant: build_linux_x64_openssl3
    commands:
      - func: checkout
      - func: install
        vars:
          node_js_version: "20.19.5"
      - func: download_compiled_artifact
        vars:
          executable_os_id: linux-x64-openssl3
      - func: test_connectivity
        vars:
          node_js_version: "20.19.5"
          test_mongosh_executable: dist/mongosh
          kerberos_jumphost_dockerfile: "Dockerfile.ubuntu2204"
          task_name: ${task_name}
  - name: executable_connectivity_test_linux_arm64_rocky8
    tags: ["connectivity-test"]
    depends_on:
      - name: compile_artifact
        variant: build_linux_arm64
    commands:
      - func: checkout
      - func: install
        vars:
          node_js_version: "20.19.5"
      - func: download_compiled_artifact
        vars:
          executable_os_id: linux-arm64
      - func: test_connectivity
        vars:
          node_js_version: "20.19.5"
          test_mongosh_executable: dist/mongosh
          kerberos_jumphost_dockerfile: "Dockerfile.rocky8"
          task_name: ${task_name}
  - name: executable_connectivity_test_linux_arm64_ubuntu2004
    tags: ["connectivity-test"]
    depends_on:
      - name: compile_artifact
        variant: build_linux_arm64
    commands:
      - func: checkout
      - func: install
        vars:
          node_js_version: "20.19.5"
      - func: download_compiled_artifact
        vars:
          executable_os_id: linux-arm64
      - func: test_connectivity
        vars:
          node_js_version: "20.19.5"
          test_mongosh_executable: dist/mongosh
          kerberos_jumphost_dockerfile: "Dockerfile.ubuntu2004"
          task_name: ${task_name}
  - name: executable_connectivity_test_linux_arm64_node20
    tags: ["connectivity-test"]
    depends_on:
      - name: compile_artifact
        variant: build_linux_arm64
    commands:
      - func: checkout
      - func: install
        vars:
          node_js_version: "20.19.5"
      - func: download_compiled_artifact
        vars:
          executable_os_id: linux-arm64
      - func: test_connectivity
        vars:
          node_js_version: "20.19.5"
          test_mongosh_executable: dist/mongosh
          kerberos_jumphost_dockerfile: "Dockerfile.node20"
          task_name: ${task_name}
  - name: executable_connectivity_test_linux_arm64_rocky9
    tags: ["connectivity-test"]
    depends_on:
      - name: compile_artifact
        variant: build_linux_arm64
    commands:
      - func: checkout
      - func: install
        vars:
          node_js_version: "20.19.5"
      - func: download_compiled_artifact
        vars:
          executable_os_id: linux-arm64
      - func: test_connectivity
        vars:
          node_js_version: "20.19.5"
          test_mongosh_executable: dist/mongosh
          kerberos_jumphost_dockerfile: "Dockerfile.rocky9"
          task_name: ${task_name}
  - name: executable_connectivity_test_linux_arm64_ubuntu2204
    tags: ["connectivity-test"]
    depends_on:
      - name: compile_artifact
        variant: build_linux_arm64
    commands:
      - func: checkout
      - func: install
        vars:
          node_js_version: "20.19.5"
      - func: download_compiled_artifact
        vars:
          executable_os_id: linux-arm64
      - func: test_connectivity
        vars:
          node_js_version: "20.19.5"
          test_mongosh_executable: dist/mongosh
          kerberos_jumphost_dockerfile: "Dockerfile.ubuntu2204"
          task_name: ${task_name}
  - name: executable_connectivity_test_linux_arm64_openssl11_rocky8
    tags: ["connectivity-test"]
    depends_on:
      - name: compile_artifact
        variant: build_linux_arm64_openssl11
    commands:
      - func: checkout
      - func: install
        vars:
          node_js_version: "20.19.5"
      - func: download_compiled_artifact
        vars:
          executable_os_id: linux-arm64-openssl11
      - func: test_connectivity
        vars:
          node_js_version: "20.19.5"
          test_mongosh_executable: dist/mongosh
          kerberos_jumphost_dockerfile: "Dockerfile.rocky8"
          task_name: ${task_name}
  - name: executable_connectivity_test_linux_arm64_openssl11_ubuntu2004
    tags: ["connectivity-test"]
    depends_on:
      - name: compile_artifact
        variant: build_linux_arm64_openssl11
    commands:
      - func: checkout
      - func: install
        vars:
          node_js_version: "20.19.5"
      - func: download_compiled_artifact
        vars:
          executable_os_id: linux-arm64-openssl11
      - func: test_connectivity
        vars:
          node_js_version: "20.19.5"
          test_mongosh_executable: dist/mongosh
          kerberos_jumphost_dockerfile: "Dockerfile.ubuntu2004"
          task_name: ${task_name}
  - name: executable_connectivity_test_linux_arm64_openssl3_node20
    tags: ["connectivity-test"]
    depends_on:
      - name: compile_artifact
        variant: build_linux_arm64_openssl3
    commands:
      - func: checkout
      - func: install
        vars:
          node_js_version: "20.19.5"
      - func: download_compiled_artifact
        vars:
          executable_os_id: linux-arm64-openssl3
      - func: test_connectivity
        vars:
          node_js_version: "20.19.5"
          test_mongosh_executable: dist/mongosh
          kerberos_jumphost_dockerfile: "Dockerfile.node20"
          task_name: ${task_name}
  - name: executable_connectivity_test_linux_arm64_openssl3_rocky9
    tags: ["connectivity-test"]
    depends_on:
      - name: compile_artifact
        variant: build_linux_arm64_openssl3
    commands:
      - func: checkout
      - func: install
        vars:
          node_js_version: "20.19.5"
      - func: download_compiled_artifact
        vars:
          executable_os_id: linux-arm64-openssl3
      - func: test_connectivity
        vars:
          node_js_version: "20.19.5"
          test_mongosh_executable: dist/mongosh
          kerberos_jumphost_dockerfile: "Dockerfile.rocky9"
          task_name: ${task_name}
  - name: executable_connectivity_test_linux_arm64_openssl3_ubuntu2204
    tags: ["connectivity-test"]
    depends_on:
      - name: compile_artifact
        variant: build_linux_arm64_openssl3
    commands:
      - func: checkout
      - func: install
        vars:
          node_js_version: "20.19.5"
      - func: download_compiled_artifact
        vars:
          executable_os_id: linux-arm64-openssl3
      - func: test_connectivity
        vars:
          node_js_version: "20.19.5"
          test_mongosh_executable: dist/mongosh
          kerberos_jumphost_dockerfile: "Dockerfile.ubuntu2204"
          task_name: ${task_name}

  ###
  # PACKAGING
  ###
  - name: add_crypt_shared_and_sbom_darwin_x64
    tags: ["add-sbom-task"]
    depends_on:
      - name: compile_artifact
        variant: build_darwin
    commands:
      - func: checkout
      - func: install
        vars:
          node_js_version: "20.19.5"
      - func: download_compiled_artifact
        vars:
          executable_os_id: darwin-x64
      - func: add_crypt_shared_and_sbom
        vars:
          package_variant: darwin-x64
          executable_os_id: darwin-x64
      - func: upload_sbom
        vars:
          executable_os_id: darwin-x64
          extra_upload_tag: -darwin-x64-sbom
      - func: upload_compiled_artifact
        vars:
          executable_os_id: darwin-x64
          extra_upload_tag: -darwin-x64-complete
  - name: package_artifact_darwin_x64
    depends_on:
      - name: add_crypt_shared_and_sbom_darwin_x64
        variant: linux_package
    commands:
      - func: checkout
      - func: install
        vars:
          node_js_version: "20.19.5"
      - func: download_compiled_artifact
        vars:
          executable_os_id: darwin-x64
          extra_upload_tag: -darwin-x64-complete
      - func: package_artifact
        vars:
          node_js_version: "20.19.5"
          package_variant: darwin-x64
          executable_os_id: darwin-x64
      - func: put_artifact_url
        vars:
          package_variant: darwin-x64
          signature_tag: unsigned
  - name: sign_artifact_darwin_x64
    depends_on:
      - name: package_artifact_darwin_x64
        variant: "*"
    commands:
      - func: checkout
      - func: install
        vars:
          node_js_version: "20.19.5"
      - func: get_artifact_url
        vars:
          package_variant: darwin-x64
          signature_tag: unsigned
      - func: sign_artifact
        vars:
          node_js_version: "20.19.5"
          package_variant: darwin-x64
      - func: papertrail_trace
        vars:
          product: "mongosh-dev"
      - func: put_artifact_url
        vars:
          package_variant: darwin-x64
          signature_tag: signed
  - name: verify_artifact_darwin_x64
    tags: ["smoke-test"]
    depends_on:
      - name: sign_artifact_darwin_x64
        variant: "*"
    commands:
      - func: checkout
      - func: get_artifact_url
        vars:
          package_variant: darwin-x64
          signature_tag: signed
      - func: verify_artifact
  - name: add_crypt_shared_and_sbom_darwin_arm64
    tags: ["add-sbom-task"]
    depends_on:
      - name: compile_artifact
        variant: build_darwin_arm64
    commands:
      - func: checkout
      - func: install
        vars:
          node_js_version: "20.19.5"
      - func: download_compiled_artifact
        vars:
          executable_os_id: darwin-arm64
      - func: add_crypt_shared_and_sbom
        vars:
          package_variant: darwin-arm64
          executable_os_id: darwin-arm64
      - func: upload_sbom
        vars:
          executable_os_id: darwin-arm64
          extra_upload_tag: -darwin-arm64-sbom
      - func: upload_compiled_artifact
        vars:
          executable_os_id: darwin-arm64
          extra_upload_tag: -darwin-arm64-complete
  - name: package_artifact_darwin_arm64
    depends_on:
      - name: add_crypt_shared_and_sbom_darwin_arm64
        variant: linux_package
    commands:
      - func: checkout
      - func: install
        vars:
          node_js_version: "20.19.5"
      - func: download_compiled_artifact
        vars:
          executable_os_id: darwin-arm64
          extra_upload_tag: -darwin-arm64-complete
      - func: package_artifact
        vars:
          node_js_version: "20.19.5"
          package_variant: darwin-arm64
          executable_os_id: darwin-arm64
      - func: put_artifact_url
        vars:
          package_variant: darwin-arm64
          signature_tag: unsigned
  - name: sign_artifact_darwin_arm64
    depends_on:
      - name: package_artifact_darwin_arm64
        variant: "*"
    commands:
      - func: checkout
      - func: install
        vars:
          node_js_version: "20.19.5"
      - func: get_artifact_url
        vars:
          package_variant: darwin-arm64
          signature_tag: unsigned
      - func: sign_artifact
        vars:
          node_js_version: "20.19.5"
          package_variant: darwin-arm64
      - func: papertrail_trace
        vars:
          product: "mongosh-dev"
      - func: put_artifact_url
        vars:
          package_variant: darwin-arm64
          signature_tag: signed
  - name: verify_artifact_darwin_arm64
    tags: ["smoke-test"]
    depends_on:
      - name: sign_artifact_darwin_arm64
        variant: "*"
    commands:
      - func: checkout
      - func: get_artifact_url
        vars:
          package_variant: darwin-arm64
          signature_tag: signed
      - func: verify_artifact
  - name: add_crypt_shared_and_sbom_linux_x64
    tags: ["add-sbom-task"]
    depends_on:
      - name: compile_artifact
        variant: build_linux_x64
    commands:
      - func: checkout
      - func: install
        vars:
          node_js_version: "20.19.5"
      - func: download_compiled_artifact
        vars:
          executable_os_id: linux-x64
      - func: add_crypt_shared_and_sbom
        vars:
          package_variant: linux-x64
          executable_os_id: linux-x64
      - func: upload_sbom
        vars:
          executable_os_id: linux-x64
          extra_upload_tag: -linux-x64-sbom
      - func: upload_compiled_artifact
        vars:
          executable_os_id: linux-x64
          extra_upload_tag: -linux-x64-complete
  - name: package_artifact_linux_x64
    depends_on:
      - name: add_crypt_shared_and_sbom_linux_x64
        variant: linux_package
    commands:
      - func: checkout
      - func: install
        vars:
          node_js_version: "20.19.5"
      - func: download_compiled_artifact
        vars:
          executable_os_id: linux-x64
          extra_upload_tag: -linux-x64-complete
      - func: package_artifact
        vars:
          node_js_version: "20.19.5"
          package_variant: linux-x64
          executable_os_id: linux-x64
      - func: put_artifact_url
        vars:
          package_variant: linux-x64
          signature_tag: unsigned
  - name: sign_artifact_linux_x64
    depends_on:
      - name: package_artifact_linux_x64
        variant: "*"
    commands:
      - func: checkout
      - func: install
        vars:
          node_js_version: "20.19.5"
      - func: get_artifact_url
        vars:
          package_variant: linux-x64
          signature_tag: unsigned
      - func: sign_artifact
        vars:
          node_js_version: "20.19.5"
          package_variant: linux-x64
      - func: papertrail_trace
        vars:
          product: "mongosh-dev"
      - func: put_artifact_url
        vars:
          package_variant: linux-x64
          signature_tag: signed
  - name: verify_artifact_linux_x64
    tags: ["smoke-test"]
    depends_on:
      - name: sign_artifact_linux_x64
        variant: "*"
    commands:
      - func: checkout
      - func: get_artifact_url
        vars:
          package_variant: linux-x64
          signature_tag: signed
      - func: verify_artifact
  - name: add_crypt_shared_and_sbom_deb_x64
    tags: ["add-sbom-task"]
    depends_on:
      - name: compile_artifact
        variant: build_linux_x64
    commands:
      - func: checkout
      - func: install
        vars:
          node_js_version: "20.19.5"
      - func: download_compiled_artifact
        vars:
          executable_os_id: linux-x64
      - func: add_crypt_shared_and_sbom
        vars:
          package_variant: deb-x64
          executable_os_id: linux-x64
      - func: upload_sbom
        vars:
          executable_os_id: linux-x64
          extra_upload_tag: -deb-x64-sbom
      - func: upload_compiled_artifact
        vars:
          executable_os_id: linux-x64
          extra_upload_tag: -deb-x64-complete
  - name: package_artifact_deb_x64
    depends_on:
      - name: add_crypt_shared_and_sbom_deb_x64
        variant: linux_package
    commands:
      - func: checkout
      - func: install
        vars:
          node_js_version: "20.19.5"
      - func: download_compiled_artifact
        vars:
          executable_os_id: linux-x64
          extra_upload_tag: -deb-x64-complete
      - func: package_artifact
        vars:
          node_js_version: "20.19.5"
          package_variant: deb-x64
          executable_os_id: linux-x64
      - func: put_artifact_url
        vars:
          package_variant: deb-x64
          signature_tag: unsigned
  - name: sign_artifact_deb_x64
    depends_on:
      - name: package_artifact_deb_x64
        variant: "*"
    commands:
      - func: checkout
      - func: install
        vars:
          node_js_version: "20.19.5"
      - func: get_artifact_url
        vars:
          package_variant: deb-x64
          signature_tag: unsigned
      - func: sign_artifact
        vars:
          node_js_version: "20.19.5"
          package_variant: deb-x64
      - func: papertrail_trace
        vars:
          product: "mongosh-dev"
      - func: put_artifact_url
        vars:
          package_variant: deb-x64
          signature_tag: signed
  - name: verify_artifact_deb_x64
    tags: ["smoke-test"]
    depends_on:
      - name: sign_artifact_deb_x64
        variant: "*"
    commands:
      - func: checkout
      - func: get_artifact_url
        vars:
          package_variant: deb-x64
          signature_tag: signed
      - func: verify_artifact
  - name: add_crypt_shared_and_sbom_rpm_x64
    tags: ["add-sbom-task"]
    depends_on:
      - name: compile_artifact
        variant: build_linux_x64
    commands:
      - func: checkout
      - func: install
        vars:
          node_js_version: "20.19.5"
      - func: download_compiled_artifact
        vars:
          executable_os_id: linux-x64
      - func: add_crypt_shared_and_sbom
        vars:
          package_variant: rpm-x64
          executable_os_id: linux-x64
      - func: upload_sbom
        vars:
          executable_os_id: linux-x64
          extra_upload_tag: -rpm-x64-sbom
      - func: upload_compiled_artifact
        vars:
          executable_os_id: linux-x64
          extra_upload_tag: -rpm-x64-complete
  - name: package_artifact_rpm_x64
    depends_on:
      - name: add_crypt_shared_and_sbom_rpm_x64
        variant: linux_package
    commands:
      - func: checkout
      - func: install
        vars:
          node_js_version: "20.19.5"
      - func: download_compiled_artifact
        vars:
          executable_os_id: linux-x64
          extra_upload_tag: -rpm-x64-complete
      - func: package_artifact
        vars:
          node_js_version: "20.19.5"
          package_variant: rpm-x64
          executable_os_id: linux-x64
      - func: put_artifact_url
        vars:
          package_variant: rpm-x64
          signature_tag: unsigned
  - name: sign_artifact_rpm_x64
    depends_on:
      - name: package_artifact_rpm_x64
        variant: "*"
    commands:
      - func: checkout
      - func: install
        vars:
          node_js_version: "20.19.5"
      - func: get_artifact_url
        vars:
          package_variant: rpm-x64
          signature_tag: unsigned
      - func: sign_artifact
        vars:
          node_js_version: "20.19.5"
          package_variant: rpm-x64
      - func: papertrail_trace
        vars:
          product: "mongosh-dev"
      - func: put_artifact_url
        vars:
          package_variant: rpm-x64
          signature_tag: signed
  - name: verify_artifact_rpm_x64
    tags: ["smoke-test"]
    depends_on:
      - name: sign_artifact_rpm_x64
        variant: "*"
    commands:
      - func: checkout
      - func: get_artifact_url
        vars:
          package_variant: rpm-x64
          signature_tag: signed
      - func: verify_artifact
  - name: add_crypt_shared_and_sbom_linux_x64_openssl11
    tags: ["add-sbom-task"]
    depends_on:
      - name: compile_artifact
        variant: build_linux_x64_openssl11
    commands:
      - func: checkout
      - func: install
        vars:
          node_js_version: "20.19.5"
      - func: download_compiled_artifact
        vars:
          executable_os_id: linux-x64-openssl11
      - func: add_crypt_shared_and_sbom
        vars:
          package_variant: linux-x64-openssl11
          executable_os_id: linux-x64-openssl11
      - func: upload_sbom
        vars:
          executable_os_id: linux-x64-openssl11
          extra_upload_tag: -linux-x64-openssl11-sbom
      - func: upload_compiled_artifact
        vars:
          executable_os_id: linux-x64-openssl11
          extra_upload_tag: -linux-x64-openssl11-complete
  - name: package_artifact_linux_x64_openssl11
    depends_on:
      - name: add_crypt_shared_and_sbom_linux_x64_openssl11
        variant: linux_package
    commands:
      - func: checkout
      - func: install
        vars:
          node_js_version: "20.19.5"
      - func: download_compiled_artifact
        vars:
          executable_os_id: linux-x64-openssl11
          extra_upload_tag: -linux-x64-openssl11-complete
      - func: package_artifact
        vars:
          node_js_version: "20.19.5"
          package_variant: linux-x64-openssl11
          executable_os_id: linux-x64-openssl11
      - func: put_artifact_url
        vars:
          package_variant: linux-x64-openssl11
          signature_tag: unsigned
  - name: sign_artifact_linux_x64_openssl11
    depends_on:
      - name: package_artifact_linux_x64_openssl11
        variant: "*"
    commands:
      - func: checkout
      - func: install
        vars:
          node_js_version: "20.19.5"
      - func: get_artifact_url
        vars:
          package_variant: linux-x64-openssl11
          signature_tag: unsigned
      - func: sign_artifact
        vars:
          node_js_version: "20.19.5"
          package_variant: linux-x64-openssl11
      - func: papertrail_trace
        vars:
          product: "mongosh-dev"
      - func: put_artifact_url
        vars:
          package_variant: linux-x64-openssl11
          signature_tag: signed
  - name: verify_artifact_linux_x64_openssl11
    tags: ["smoke-test"]
    depends_on:
      - name: sign_artifact_linux_x64_openssl11
        variant: "*"
    commands:
      - func: checkout
      - func: get_artifact_url
        vars:
          package_variant: linux-x64-openssl11
          signature_tag: signed
      - func: verify_artifact
  - name: add_crypt_shared_and_sbom_deb_x64_openssl11
    tags: ["add-sbom-task"]
    depends_on:
      - name: compile_artifact
        variant: build_linux_x64_openssl11
    commands:
      - func: checkout
      - func: install
        vars:
          node_js_version: "20.19.5"
      - func: download_compiled_artifact
        vars:
          executable_os_id: linux-x64-openssl11
      - func: add_crypt_shared_and_sbom
        vars:
          package_variant: deb-x64-openssl11
          executable_os_id: linux-x64-openssl11
      - func: upload_sbom
        vars:
          executable_os_id: linux-x64-openssl11
          extra_upload_tag: -deb-x64-openssl11-sbom
      - func: upload_compiled_artifact
        vars:
          executable_os_id: linux-x64-openssl11
          extra_upload_tag: -deb-x64-openssl11-complete
  - name: package_artifact_deb_x64_openssl11
    depends_on:
      - name: add_crypt_shared_and_sbom_deb_x64_openssl11
        variant: linux_package
    commands:
      - func: checkout
      - func: install
        vars:
          node_js_version: "20.19.5"
      - func: download_compiled_artifact
        vars:
          executable_os_id: linux-x64-openssl11
          extra_upload_tag: -deb-x64-openssl11-complete
      - func: package_artifact
        vars:
          node_js_version: "20.19.5"
          package_variant: deb-x64-openssl11
          executable_os_id: linux-x64-openssl11
      - func: put_artifact_url
        vars:
          package_variant: deb-x64-openssl11
          signature_tag: unsigned
  - name: sign_artifact_deb_x64_openssl11
    depends_on:
      - name: package_artifact_deb_x64_openssl11
        variant: "*"
    commands:
      - func: checkout
      - func: install
        vars:
          node_js_version: "20.19.5"
      - func: get_artifact_url
        vars:
          package_variant: deb-x64-openssl11
          signature_tag: unsigned
      - func: sign_artifact
        vars:
          node_js_version: "20.19.5"
          package_variant: deb-x64-openssl11
      - func: papertrail_trace
        vars:
          product: "mongosh-dev"
      - func: put_artifact_url
        vars:
          package_variant: deb-x64-openssl11
          signature_tag: signed
  - name: verify_artifact_deb_x64_openssl11
    tags: ["smoke-test"]
    depends_on:
      - name: sign_artifact_deb_x64_openssl11
        variant: "*"
    commands:
      - func: checkout
      - func: get_artifact_url
        vars:
          package_variant: deb-x64-openssl11
          signature_tag: signed
      - func: verify_artifact
  - name: add_crypt_shared_and_sbom_rpm_x64_openssl11
    tags: ["add-sbom-task"]
    depends_on:
      - name: compile_artifact
        variant: build_linux_x64_openssl11
    commands:
      - func: checkout
      - func: install
        vars:
          node_js_version: "20.19.5"
      - func: download_compiled_artifact
        vars:
          executable_os_id: linux-x64-openssl11
      - func: add_crypt_shared_and_sbom
        vars:
          package_variant: rpm-x64-openssl11
          executable_os_id: linux-x64-openssl11
      - func: upload_sbom
        vars:
          executable_os_id: linux-x64-openssl11
          extra_upload_tag: -rpm-x64-openssl11-sbom
      - func: upload_compiled_artifact
        vars:
          executable_os_id: linux-x64-openssl11
          extra_upload_tag: -rpm-x64-openssl11-complete
  - name: package_artifact_rpm_x64_openssl11
    depends_on:
      - name: add_crypt_shared_and_sbom_rpm_x64_openssl11
        variant: linux_package
    commands:
      - func: checkout
      - func: install
        vars:
          node_js_version: "20.19.5"
      - func: download_compiled_artifact
        vars:
          executable_os_id: linux-x64-openssl11
          extra_upload_tag: -rpm-x64-openssl11-complete
      - func: package_artifact
        vars:
          node_js_version: "20.19.5"
          package_variant: rpm-x64-openssl11
          executable_os_id: linux-x64-openssl11
      - func: put_artifact_url
        vars:
          package_variant: rpm-x64-openssl11
          signature_tag: unsigned
  - name: sign_artifact_rpm_x64_openssl11
    depends_on:
      - name: package_artifact_rpm_x64_openssl11
        variant: "*"
    commands:
      - func: checkout
      - func: install
        vars:
          node_js_version: "20.19.5"
      - func: get_artifact_url
        vars:
          package_variant: rpm-x64-openssl11
          signature_tag: unsigned
      - func: sign_artifact
        vars:
          node_js_version: "20.19.5"
          package_variant: rpm-x64-openssl11
      - func: papertrail_trace
        vars:
          product: "mongosh-dev"
      - func: put_artifact_url
        vars:
          package_variant: rpm-x64-openssl11
          signature_tag: signed
  - name: verify_artifact_rpm_x64_openssl11
    tags: ["smoke-test"]
    depends_on:
      - name: sign_artifact_rpm_x64_openssl11
        variant: "*"
    commands:
      - func: checkout
      - func: get_artifact_url
        vars:
          package_variant: rpm-x64-openssl11
          signature_tag: signed
      - func: verify_artifact
  - name: add_crypt_shared_and_sbom_linux_x64_openssl3
    tags: ["add-sbom-task"]
    depends_on:
      - name: compile_artifact
        variant: build_linux_x64_openssl3
    commands:
      - func: checkout
      - func: install
        vars:
          node_js_version: "20.19.5"
      - func: download_compiled_artifact
        vars:
          executable_os_id: linux-x64-openssl3
      - func: add_crypt_shared_and_sbom
        vars:
          package_variant: linux-x64-openssl3
          executable_os_id: linux-x64-openssl3
      - func: upload_sbom
        vars:
          executable_os_id: linux-x64-openssl3
          extra_upload_tag: -linux-x64-openssl3-sbom
      - func: upload_compiled_artifact
        vars:
          executable_os_id: linux-x64-openssl3
          extra_upload_tag: -linux-x64-openssl3-complete
  - name: package_artifact_linux_x64_openssl3
    depends_on:
      - name: add_crypt_shared_and_sbom_linux_x64_openssl3
        variant: linux_package
    commands:
      - func: checkout
      - func: install
        vars:
          node_js_version: "20.19.5"
      - func: download_compiled_artifact
        vars:
          executable_os_id: linux-x64-openssl3
          extra_upload_tag: -linux-x64-openssl3-complete
      - func: package_artifact
        vars:
          node_js_version: "20.19.5"
          package_variant: linux-x64-openssl3
          executable_os_id: linux-x64-openssl3
      - func: put_artifact_url
        vars:
          package_variant: linux-x64-openssl3
          signature_tag: unsigned
  - name: sign_artifact_linux_x64_openssl3
    depends_on:
      - name: package_artifact_linux_x64_openssl3
        variant: "*"
    commands:
      - func: checkout
      - func: install
        vars:
          node_js_version: "20.19.5"
      - func: get_artifact_url
        vars:
          package_variant: linux-x64-openssl3
          signature_tag: unsigned
      - func: sign_artifact
        vars:
          node_js_version: "20.19.5"
          package_variant: linux-x64-openssl3
      - func: papertrail_trace
        vars:
          product: "mongosh-dev"
      - func: put_artifact_url
        vars:
          package_variant: linux-x64-openssl3
          signature_tag: signed
  - name: verify_artifact_linux_x64_openssl3
    tags: ["smoke-test"]
    depends_on:
      - name: sign_artifact_linux_x64_openssl3
        variant: "*"
    commands:
      - func: checkout
      - func: get_artifact_url
        vars:
          package_variant: linux-x64-openssl3
          signature_tag: signed
      - func: verify_artifact
  - name: add_crypt_shared_and_sbom_deb_x64_openssl3
    tags: ["add-sbom-task"]
    depends_on:
      - name: compile_artifact
        variant: build_linux_x64_openssl3
    commands:
      - func: checkout
      - func: install
        vars:
          node_js_version: "20.19.5"
      - func: download_compiled_artifact
        vars:
          executable_os_id: linux-x64-openssl3
      - func: add_crypt_shared_and_sbom
        vars:
          package_variant: deb-x64-openssl3
          executable_os_id: linux-x64-openssl3
      - func: upload_sbom
        vars:
          executable_os_id: linux-x64-openssl3
          extra_upload_tag: -deb-x64-openssl3-sbom
      - func: upload_compiled_artifact
        vars:
          executable_os_id: linux-x64-openssl3
          extra_upload_tag: -deb-x64-openssl3-complete
  - name: package_artifact_deb_x64_openssl3
    depends_on:
      - name: add_crypt_shared_and_sbom_deb_x64_openssl3
        variant: linux_package
    commands:
      - func: checkout
      - func: install
        vars:
          node_js_version: "20.19.5"
      - func: download_compiled_artifact
        vars:
          executable_os_id: linux-x64-openssl3
          extra_upload_tag: -deb-x64-openssl3-complete
      - func: package_artifact
        vars:
          node_js_version: "20.19.5"
          package_variant: deb-x64-openssl3
          executable_os_id: linux-x64-openssl3
      - func: put_artifact_url
        vars:
          package_variant: deb-x64-openssl3
          signature_tag: unsigned
  - name: sign_artifact_deb_x64_openssl3
    depends_on:
      - name: package_artifact_deb_x64_openssl3
        variant: "*"
    commands:
      - func: checkout
      - func: install
        vars:
          node_js_version: "20.19.5"
      - func: get_artifact_url
        vars:
          package_variant: deb-x64-openssl3
          signature_tag: unsigned
      - func: sign_artifact
        vars:
          node_js_version: "20.19.5"
          package_variant: deb-x64-openssl3
      - func: papertrail_trace
        vars:
          product: "mongosh-dev"
      - func: put_artifact_url
        vars:
          package_variant: deb-x64-openssl3
          signature_tag: signed
  - name: verify_artifact_deb_x64_openssl3
    tags: ["smoke-test"]
    depends_on:
      - name: sign_artifact_deb_x64_openssl3
        variant: "*"
    commands:
      - func: checkout
      - func: get_artifact_url
        vars:
          package_variant: deb-x64-openssl3
          signature_tag: signed
      - func: verify_artifact
  - name: add_crypt_shared_and_sbom_rpm_x64_openssl3
    tags: ["add-sbom-task"]
    depends_on:
      - name: compile_artifact
        variant: build_linux_x64_openssl3
    commands:
      - func: checkout
      - func: install
        vars:
          node_js_version: "20.19.5"
      - func: download_compiled_artifact
        vars:
          executable_os_id: linux-x64-openssl3
      - func: add_crypt_shared_and_sbom
        vars:
          package_variant: rpm-x64-openssl3
          executable_os_id: linux-x64-openssl3
      - func: upload_sbom
        vars:
          executable_os_id: linux-x64-openssl3
          extra_upload_tag: -rpm-x64-openssl3-sbom
      - func: upload_compiled_artifact
        vars:
          executable_os_id: linux-x64-openssl3
          extra_upload_tag: -rpm-x64-openssl3-complete
  - name: package_artifact_rpm_x64_openssl3
    depends_on:
      - name: add_crypt_shared_and_sbom_rpm_x64_openssl3
        variant: linux_package
    commands:
      - func: checkout
      - func: install
        vars:
          node_js_version: "20.19.5"
      - func: download_compiled_artifact
        vars:
          executable_os_id: linux-x64-openssl3
          extra_upload_tag: -rpm-x64-openssl3-complete
      - func: package_artifact
        vars:
          node_js_version: "20.19.5"
          package_variant: rpm-x64-openssl3
          executable_os_id: linux-x64-openssl3
      - func: put_artifact_url
        vars:
          package_variant: rpm-x64-openssl3
          signature_tag: unsigned
  - name: sign_artifact_rpm_x64_openssl3
    depends_on:
      - name: package_artifact_rpm_x64_openssl3
        variant: "*"
    commands:
      - func: checkout
      - func: install
        vars:
          node_js_version: "20.19.5"
      - func: get_artifact_url
        vars:
          package_variant: rpm-x64-openssl3
          signature_tag: unsigned
      - func: sign_artifact
        vars:
          node_js_version: "20.19.5"
          package_variant: rpm-x64-openssl3
      - func: papertrail_trace
        vars:
          product: "mongosh-dev"
      - func: put_artifact_url
        vars:
          package_variant: rpm-x64-openssl3
          signature_tag: signed
  - name: verify_artifact_rpm_x64_openssl3
    tags: ["smoke-test"]
    depends_on:
      - name: sign_artifact_rpm_x64_openssl3
        variant: "*"
    commands:
      - func: checkout
      - func: get_artifact_url
        vars:
          package_variant: rpm-x64-openssl3
          signature_tag: signed
      - func: verify_artifact
  - name: add_crypt_shared_and_sbom_linux_arm64
    tags: ["add-sbom-task"]
    depends_on:
      - name: compile_artifact
        variant: build_linux_arm64
    commands:
      - func: checkout
      - func: install
        vars:
          node_js_version: "20.19.5"
      - func: download_compiled_artifact
        vars:
          executable_os_id: linux-arm64
      - func: add_crypt_shared_and_sbom
        vars:
          package_variant: linux-arm64
          executable_os_id: linux-arm64
      - func: upload_sbom
        vars:
          executable_os_id: linux-arm64
          extra_upload_tag: -linux-arm64-sbom
      - func: upload_compiled_artifact
        vars:
          executable_os_id: linux-arm64
          extra_upload_tag: -linux-arm64-complete
  - name: package_artifact_linux_arm64
    depends_on:
      - name: add_crypt_shared_and_sbom_linux_arm64
        variant: linux_package
    commands:
      - func: checkout
      - func: install
        vars:
          node_js_version: "20.19.5"
      - func: download_compiled_artifact
        vars:
          executable_os_id: linux-arm64
          extra_upload_tag: -linux-arm64-complete
      - func: package_artifact
        vars:
          node_js_version: "20.19.5"
          package_variant: linux-arm64
          executable_os_id: linux-arm64
      - func: put_artifact_url
        vars:
          package_variant: linux-arm64
          signature_tag: unsigned
  - name: sign_artifact_linux_arm64
    depends_on:
      - name: package_artifact_linux_arm64
        variant: "*"
    commands:
      - func: checkout
      - func: install
        vars:
          node_js_version: "20.19.5"
      - func: get_artifact_url
        vars:
          package_variant: linux-arm64
          signature_tag: unsigned
      - func: sign_artifact
        vars:
          node_js_version: "20.19.5"
          package_variant: linux-arm64
      - func: papertrail_trace
        vars:
          product: "mongosh-dev"
      - func: put_artifact_url
        vars:
          package_variant: linux-arm64
          signature_tag: signed
  - name: verify_artifact_linux_arm64
    tags: ["smoke-test"]
    depends_on:
      - name: sign_artifact_linux_arm64
        variant: "*"
    commands:
      - func: checkout
      - func: get_artifact_url
        vars:
          package_variant: linux-arm64
          signature_tag: signed
      - func: verify_artifact
  - name: add_crypt_shared_and_sbom_deb_arm64
    tags: ["add-sbom-task"]
    depends_on:
      - name: compile_artifact
        variant: build_linux_arm64
    commands:
      - func: checkout
      - func: install
        vars:
          node_js_version: "20.19.5"
      - func: download_compiled_artifact
        vars:
          executable_os_id: linux-arm64
      - func: add_crypt_shared_and_sbom
        vars:
          package_variant: deb-arm64
          executable_os_id: linux-arm64
      - func: upload_sbom
        vars:
          executable_os_id: linux-arm64
          extra_upload_tag: -deb-arm64-sbom
      - func: upload_compiled_artifact
        vars:
          executable_os_id: linux-arm64
          extra_upload_tag: -deb-arm64-complete
  - name: package_artifact_deb_arm64
    depends_on:
      - name: add_crypt_shared_and_sbom_deb_arm64
        variant: linux_package
    commands:
      - func: checkout
      - func: install
        vars:
          node_js_version: "20.19.5"
      - func: download_compiled_artifact
        vars:
          executable_os_id: linux-arm64
          extra_upload_tag: -deb-arm64-complete
      - func: package_artifact
        vars:
          node_js_version: "20.19.5"
          package_variant: deb-arm64
          executable_os_id: linux-arm64
      - func: put_artifact_url
        vars:
          package_variant: deb-arm64
          signature_tag: unsigned
  - name: sign_artifact_deb_arm64
    depends_on:
      - name: package_artifact_deb_arm64
        variant: "*"
    commands:
      - func: checkout
      - func: install
        vars:
          node_js_version: "20.19.5"
      - func: get_artifact_url
        vars:
          package_variant: deb-arm64
          signature_tag: unsigned
      - func: sign_artifact
        vars:
          node_js_version: "20.19.5"
          package_variant: deb-arm64
      - func: papertrail_trace
        vars:
          product: "mongosh-dev"
      - func: put_artifact_url
        vars:
          package_variant: deb-arm64
          signature_tag: signed
  - name: verify_artifact_deb_arm64
    tags: ["smoke-test"]
    depends_on:
      - name: sign_artifact_deb_arm64
        variant: "*"
    commands:
      - func: checkout
      - func: get_artifact_url
        vars:
          package_variant: deb-arm64
          signature_tag: signed
      - func: verify_artifact
  - name: add_crypt_shared_and_sbom_rpm_arm64
    tags: ["add-sbom-task"]
    depends_on:
      - name: compile_artifact
        variant: build_linux_arm64
    commands:
      - func: checkout
      - func: install
        vars:
          node_js_version: "20.19.5"
      - func: download_compiled_artifact
        vars:
          executable_os_id: linux-arm64
      - func: add_crypt_shared_and_sbom
        vars:
          package_variant: rpm-arm64
          executable_os_id: linux-arm64
      - func: upload_sbom
        vars:
          executable_os_id: linux-arm64
          extra_upload_tag: -rpm-arm64-sbom
      - func: upload_compiled_artifact
        vars:
          executable_os_id: linux-arm64
          extra_upload_tag: -rpm-arm64-complete
  - name: package_artifact_rpm_arm64
    depends_on:
      - name: add_crypt_shared_and_sbom_rpm_arm64
        variant: linux_package
    commands:
      - func: checkout
      - func: install
        vars:
          node_js_version: "20.19.5"
      - func: download_compiled_artifact
        vars:
          executable_os_id: linux-arm64
          extra_upload_tag: -rpm-arm64-complete
      - func: package_artifact
        vars:
          node_js_version: "20.19.5"
          package_variant: rpm-arm64
          executable_os_id: linux-arm64
      - func: put_artifact_url
        vars:
          package_variant: rpm-arm64
          signature_tag: unsigned
  - name: sign_artifact_rpm_arm64
    depends_on:
      - name: package_artifact_rpm_arm64
        variant: "*"
    commands:
      - func: checkout
      - func: install
        vars:
          node_js_version: "20.19.5"
      - func: get_artifact_url
        vars:
          package_variant: rpm-arm64
          signature_tag: unsigned
      - func: sign_artifact
        vars:
          node_js_version: "20.19.5"
          package_variant: rpm-arm64
      - func: papertrail_trace
        vars:
          product: "mongosh-dev"
      - func: put_artifact_url
        vars:
          package_variant: rpm-arm64
          signature_tag: signed
  - name: verify_artifact_rpm_arm64
    tags: ["smoke-test"]
    depends_on:
      - name: sign_artifact_rpm_arm64
        variant: "*"
    commands:
      - func: checkout
      - func: get_artifact_url
        vars:
          package_variant: rpm-arm64
          signature_tag: signed
      - func: verify_artifact
  - name: add_crypt_shared_and_sbom_linux_arm64_openssl11
    tags: ["add-sbom-task"]
    depends_on:
      - name: compile_artifact
        variant: build_linux_arm64_openssl11
    commands:
      - func: checkout
      - func: install
        vars:
          node_js_version: "20.19.5"
      - func: download_compiled_artifact
        vars:
          executable_os_id: linux-arm64-openssl11
      - func: add_crypt_shared_and_sbom
        vars:
          package_variant: linux-arm64-openssl11
          executable_os_id: linux-arm64-openssl11
      - func: upload_sbom
        vars:
          executable_os_id: linux-arm64-openssl11
          extra_upload_tag: -linux-arm64-openssl11-sbom
      - func: upload_compiled_artifact
        vars:
          executable_os_id: linux-arm64-openssl11
          extra_upload_tag: -linux-arm64-openssl11-complete
  - name: package_artifact_linux_arm64_openssl11
    depends_on:
      - name: add_crypt_shared_and_sbom_linux_arm64_openssl11
        variant: linux_package
    commands:
      - func: checkout
      - func: install
        vars:
          node_js_version: "20.19.5"
      - func: download_compiled_artifact
        vars:
          executable_os_id: linux-arm64-openssl11
          extra_upload_tag: -linux-arm64-openssl11-complete
      - func: package_artifact
        vars:
          node_js_version: "20.19.5"
          package_variant: linux-arm64-openssl11
          executable_os_id: linux-arm64-openssl11
      - func: put_artifact_url
        vars:
          package_variant: linux-arm64-openssl11
          signature_tag: unsigned
  - name: sign_artifact_linux_arm64_openssl11
    depends_on:
      - name: package_artifact_linux_arm64_openssl11
        variant: "*"
    commands:
      - func: checkout
      - func: install
        vars:
          node_js_version: "20.19.5"
      - func: get_artifact_url
        vars:
          package_variant: linux-arm64-openssl11
          signature_tag: unsigned
      - func: sign_artifact
        vars:
          node_js_version: "20.19.5"
          package_variant: linux-arm64-openssl11
      - func: papertrail_trace
        vars:
          product: "mongosh-dev"
      - func: put_artifact_url
        vars:
          package_variant: linux-arm64-openssl11
          signature_tag: signed
  - name: verify_artifact_linux_arm64_openssl11
    tags: ["smoke-test"]
    depends_on:
      - name: sign_artifact_linux_arm64_openssl11
        variant: "*"
    commands:
      - func: checkout
      - func: get_artifact_url
        vars:
          package_variant: linux-arm64-openssl11
          signature_tag: signed
      - func: verify_artifact
  - name: add_crypt_shared_and_sbom_deb_arm64_openssl11
    tags: ["add-sbom-task"]
    depends_on:
      - name: compile_artifact
        variant: build_linux_arm64_openssl11
    commands:
      - func: checkout
      - func: install
        vars:
          node_js_version: "20.19.5"
      - func: download_compiled_artifact
        vars:
          executable_os_id: linux-arm64-openssl11
      - func: add_crypt_shared_and_sbom
        vars:
          package_variant: deb-arm64-openssl11
          executable_os_id: linux-arm64-openssl11
      - func: upload_sbom
        vars:
          executable_os_id: linux-arm64-openssl11
          extra_upload_tag: -deb-arm64-openssl11-sbom
      - func: upload_compiled_artifact
        vars:
          executable_os_id: linux-arm64-openssl11
          extra_upload_tag: -deb-arm64-openssl11-complete
  - name: package_artifact_deb_arm64_openssl11
    depends_on:
      - name: add_crypt_shared_and_sbom_deb_arm64_openssl11
        variant: linux_package
    commands:
      - func: checkout
      - func: install
        vars:
          node_js_version: "20.19.5"
      - func: download_compiled_artifact
        vars:
          executable_os_id: linux-arm64-openssl11
          extra_upload_tag: -deb-arm64-openssl11-complete
      - func: package_artifact
        vars:
          node_js_version: "20.19.5"
          package_variant: deb-arm64-openssl11
          executable_os_id: linux-arm64-openssl11
      - func: put_artifact_url
        vars:
          package_variant: deb-arm64-openssl11
          signature_tag: unsigned
  - name: sign_artifact_deb_arm64_openssl11
    depends_on:
      - name: package_artifact_deb_arm64_openssl11
        variant: "*"
    commands:
      - func: checkout
      - func: install
        vars:
          node_js_version: "20.19.5"
      - func: get_artifact_url
        vars:
          package_variant: deb-arm64-openssl11
          signature_tag: unsigned
      - func: sign_artifact
        vars:
          node_js_version: "20.19.5"
          package_variant: deb-arm64-openssl11
      - func: papertrail_trace
        vars:
          product: "mongosh-dev"
      - func: put_artifact_url
        vars:
          package_variant: deb-arm64-openssl11
          signature_tag: signed
  - name: verify_artifact_deb_arm64_openssl11
    tags: ["smoke-test"]
    depends_on:
      - name: sign_artifact_deb_arm64_openssl11
        variant: "*"
    commands:
      - func: checkout
      - func: get_artifact_url
        vars:
          package_variant: deb-arm64-openssl11
          signature_tag: signed
      - func: verify_artifact
  - name: add_crypt_shared_and_sbom_rpm_arm64_openssl11
    tags: ["add-sbom-task"]
    depends_on:
      - name: compile_artifact
        variant: build_linux_arm64_openssl11
    commands:
      - func: checkout
      - func: install
        vars:
          node_js_version: "20.19.5"
      - func: download_compiled_artifact
        vars:
          executable_os_id: linux-arm64-openssl11
      - func: add_crypt_shared_and_sbom
        vars:
          package_variant: rpm-arm64-openssl11
          executable_os_id: linux-arm64-openssl11
      - func: upload_sbom
        vars:
          executable_os_id: linux-arm64-openssl11
          extra_upload_tag: -rpm-arm64-openssl11-sbom
      - func: upload_compiled_artifact
        vars:
          executable_os_id: linux-arm64-openssl11
          extra_upload_tag: -rpm-arm64-openssl11-complete
  - name: package_artifact_rpm_arm64_openssl11
    depends_on:
      - name: add_crypt_shared_and_sbom_rpm_arm64_openssl11
        variant: linux_package
    commands:
      - func: checkout
      - func: install
        vars:
          node_js_version: "20.19.5"
      - func: download_compiled_artifact
        vars:
          executable_os_id: linux-arm64-openssl11
          extra_upload_tag: -rpm-arm64-openssl11-complete
      - func: package_artifact
        vars:
          node_js_version: "20.19.5"
          package_variant: rpm-arm64-openssl11
          executable_os_id: linux-arm64-openssl11
      - func: put_artifact_url
        vars:
          package_variant: rpm-arm64-openssl11
          signature_tag: unsigned
  - name: sign_artifact_rpm_arm64_openssl11
    depends_on:
      - name: package_artifact_rpm_arm64_openssl11
        variant: "*"
    commands:
      - func: checkout
      - func: install
        vars:
          node_js_version: "20.19.5"
      - func: get_artifact_url
        vars:
          package_variant: rpm-arm64-openssl11
          signature_tag: unsigned
      - func: sign_artifact
        vars:
          node_js_version: "20.19.5"
          package_variant: rpm-arm64-openssl11
      - func: papertrail_trace
        vars:
          product: "mongosh-dev"
      - func: put_artifact_url
        vars:
          package_variant: rpm-arm64-openssl11
          signature_tag: signed
  - name: verify_artifact_rpm_arm64_openssl11
    tags: ["smoke-test"]
    depends_on:
      - name: sign_artifact_rpm_arm64_openssl11
        variant: "*"
    commands:
      - func: checkout
      - func: get_artifact_url
        vars:
          package_variant: rpm-arm64-openssl11
          signature_tag: signed
      - func: verify_artifact
  - name: add_crypt_shared_and_sbom_linux_arm64_openssl3
    tags: ["add-sbom-task"]
    depends_on:
      - name: compile_artifact
        variant: build_linux_arm64_openssl3
    commands:
      - func: checkout
      - func: install
        vars:
          node_js_version: "20.19.5"
      - func: download_compiled_artifact
        vars:
          executable_os_id: linux-arm64-openssl3
      - func: add_crypt_shared_and_sbom
        vars:
          package_variant: linux-arm64-openssl3
          executable_os_id: linux-arm64-openssl3
      - func: upload_sbom
        vars:
          executable_os_id: linux-arm64-openssl3
          extra_upload_tag: -linux-arm64-openssl3-sbom
      - func: upload_compiled_artifact
        vars:
          executable_os_id: linux-arm64-openssl3
          extra_upload_tag: -linux-arm64-openssl3-complete
  - name: package_artifact_linux_arm64_openssl3
    depends_on:
      - name: add_crypt_shared_and_sbom_linux_arm64_openssl3
        variant: linux_package
    commands:
      - func: checkout
      - func: install
        vars:
          node_js_version: "20.19.5"
      - func: download_compiled_artifact
        vars:
          executable_os_id: linux-arm64-openssl3
          extra_upload_tag: -linux-arm64-openssl3-complete
      - func: package_artifact
        vars:
          node_js_version: "20.19.5"
          package_variant: linux-arm64-openssl3
          executable_os_id: linux-arm64-openssl3
      - func: put_artifact_url
        vars:
          package_variant: linux-arm64-openssl3
          signature_tag: unsigned
  - name: sign_artifact_linux_arm64_openssl3
    depends_on:
      - name: package_artifact_linux_arm64_openssl3
        variant: "*"
    commands:
      - func: checkout
      - func: install
        vars:
          node_js_version: "20.19.5"
      - func: get_artifact_url
        vars:
          package_variant: linux-arm64-openssl3
          signature_tag: unsigned
      - func: sign_artifact
        vars:
          node_js_version: "20.19.5"
          package_variant: linux-arm64-openssl3
      - func: papertrail_trace
        vars:
          product: "mongosh-dev"
      - func: put_artifact_url
        vars:
          package_variant: linux-arm64-openssl3
          signature_tag: signed
  - name: verify_artifact_linux_arm64_openssl3
    tags: ["smoke-test"]
    depends_on:
      - name: sign_artifact_linux_arm64_openssl3
        variant: "*"
    commands:
      - func: checkout
      - func: get_artifact_url
        vars:
          package_variant: linux-arm64-openssl3
          signature_tag: signed
      - func: verify_artifact
  - name: add_crypt_shared_and_sbom_deb_arm64_openssl3
    tags: ["add-sbom-task"]
    depends_on:
      - name: compile_artifact
        variant: build_linux_arm64_openssl3
    commands:
      - func: checkout
      - func: install
        vars:
          node_js_version: "20.19.5"
      - func: download_compiled_artifact
        vars:
          executable_os_id: linux-arm64-openssl3
      - func: add_crypt_shared_and_sbom
        vars:
          package_variant: deb-arm64-openssl3
          executable_os_id: linux-arm64-openssl3
      - func: upload_sbom
        vars:
          executable_os_id: linux-arm64-openssl3
          extra_upload_tag: -deb-arm64-openssl3-sbom
      - func: upload_compiled_artifact
        vars:
          executable_os_id: linux-arm64-openssl3
          extra_upload_tag: -deb-arm64-openssl3-complete
  - name: package_artifact_deb_arm64_openssl3
    depends_on:
      - name: add_crypt_shared_and_sbom_deb_arm64_openssl3
        variant: linux_package
    commands:
      - func: checkout
      - func: install
        vars:
          node_js_version: "20.19.5"
      - func: download_compiled_artifact
        vars:
          executable_os_id: linux-arm64-openssl3
          extra_upload_tag: -deb-arm64-openssl3-complete
      - func: package_artifact
        vars:
          node_js_version: "20.19.5"
          package_variant: deb-arm64-openssl3
          executable_os_id: linux-arm64-openssl3
      - func: put_artifact_url
        vars:
          package_variant: deb-arm64-openssl3
          signature_tag: unsigned
  - name: sign_artifact_deb_arm64_openssl3
    depends_on:
      - name: package_artifact_deb_arm64_openssl3
        variant: "*"
    commands:
      - func: checkout
      - func: install
        vars:
          node_js_version: "20.19.5"
      - func: get_artifact_url
        vars:
          package_variant: deb-arm64-openssl3
          signature_tag: unsigned
      - func: sign_artifact
        vars:
          node_js_version: "20.19.5"
          package_variant: deb-arm64-openssl3
      - func: papertrail_trace
        vars:
          product: "mongosh-dev"
      - func: put_artifact_url
        vars:
          package_variant: deb-arm64-openssl3
          signature_tag: signed
  - name: verify_artifact_deb_arm64_openssl3
    tags: ["smoke-test"]
    depends_on:
      - name: sign_artifact_deb_arm64_openssl3
        variant: "*"
    commands:
      - func: checkout
      - func: get_artifact_url
        vars:
          package_variant: deb-arm64-openssl3
          signature_tag: signed
      - func: verify_artifact
  - name: add_crypt_shared_and_sbom_rpm_arm64_openssl3
    tags: ["add-sbom-task"]
    depends_on:
      - name: compile_artifact
        variant: build_linux_arm64_openssl3
    commands:
      - func: checkout
      - func: install
        vars:
          node_js_version: "20.19.5"
      - func: download_compiled_artifact
        vars:
          executable_os_id: linux-arm64-openssl3
      - func: add_crypt_shared_and_sbom
        vars:
          package_variant: rpm-arm64-openssl3
          executable_os_id: linux-arm64-openssl3
      - func: upload_sbom
        vars:
          executable_os_id: linux-arm64-openssl3
          extra_upload_tag: -rpm-arm64-openssl3-sbom
      - func: upload_compiled_artifact
        vars:
          executable_os_id: linux-arm64-openssl3
          extra_upload_tag: -rpm-arm64-openssl3-complete
  - name: package_artifact_rpm_arm64_openssl3
    depends_on:
      - name: add_crypt_shared_and_sbom_rpm_arm64_openssl3
        variant: linux_package
    commands:
      - func: checkout
      - func: install
        vars:
          node_js_version: "20.19.5"
      - func: download_compiled_artifact
        vars:
          executable_os_id: linux-arm64-openssl3
          extra_upload_tag: -rpm-arm64-openssl3-complete
      - func: package_artifact
        vars:
          node_js_version: "20.19.5"
          package_variant: rpm-arm64-openssl3
          executable_os_id: linux-arm64-openssl3
      - func: put_artifact_url
        vars:
          package_variant: rpm-arm64-openssl3
          signature_tag: unsigned
  - name: sign_artifact_rpm_arm64_openssl3
    depends_on:
      - name: package_artifact_rpm_arm64_openssl3
        variant: "*"
    commands:
      - func: checkout
      - func: install
        vars:
          node_js_version: "20.19.5"
      - func: get_artifact_url
        vars:
          package_variant: rpm-arm64-openssl3
          signature_tag: unsigned
      - func: sign_artifact
        vars:
          node_js_version: "20.19.5"
          package_variant: rpm-arm64-openssl3
      - func: papertrail_trace
        vars:
          product: "mongosh-dev"
      - func: put_artifact_url
        vars:
          package_variant: rpm-arm64-openssl3
          signature_tag: signed
  - name: verify_artifact_rpm_arm64_openssl3
    tags: ["smoke-test"]
    depends_on:
      - name: sign_artifact_rpm_arm64_openssl3
        variant: "*"
    commands:
      - func: checkout
      - func: get_artifact_url
        vars:
          package_variant: rpm-arm64-openssl3
          signature_tag: signed
      - func: verify_artifact
  - name: add_crypt_shared_and_sbom_linux_ppc64le
    tags: ["add-sbom-task"]
    depends_on:
      - name: compile_artifact
        variant: build_linux_ppc64le
    commands:
      - func: checkout
      - func: install
        vars:
          node_js_version: "20.19.5"
      - func: download_compiled_artifact
        vars:
          executable_os_id: linux-ppc64le
      - func: add_crypt_shared_and_sbom
        vars:
          package_variant: linux-ppc64le
          executable_os_id: linux-ppc64le
      - func: upload_sbom
        vars:
          executable_os_id: linux-ppc64le
          extra_upload_tag: -linux-ppc64le-sbom
      - func: upload_compiled_artifact
        vars:
          executable_os_id: linux-ppc64le
          extra_upload_tag: -linux-ppc64le-complete
  - name: package_artifact_linux_ppc64le
    depends_on:
      - name: add_crypt_shared_and_sbom_linux_ppc64le
        variant: linux_package
    commands:
      - func: checkout
      - func: install
        vars:
          node_js_version: "20.19.5"
      - func: download_compiled_artifact
        vars:
          executable_os_id: linux-ppc64le
          extra_upload_tag: -linux-ppc64le-complete
      - func: package_artifact
        vars:
          node_js_version: "20.19.5"
          package_variant: linux-ppc64le
          executable_os_id: linux-ppc64le
      - func: put_artifact_url
        vars:
          package_variant: linux-ppc64le
          signature_tag: unsigned
  - name: sign_artifact_linux_ppc64le
    depends_on:
      - name: package_artifact_linux_ppc64le
        variant: "*"
    commands:
      - func: checkout
      - func: install
        vars:
          node_js_version: "20.19.5"
      - func: get_artifact_url
        vars:
          package_variant: linux-ppc64le
          signature_tag: unsigned
      - func: sign_artifact
        vars:
          node_js_version: "20.19.5"
          package_variant: linux-ppc64le
      - func: papertrail_trace
        vars:
          product: "mongosh-dev"
      - func: put_artifact_url
        vars:
          package_variant: linux-ppc64le
          signature_tag: signed
  - name: verify_artifact_linux_ppc64le
    tags: ["smoke-test"]
    depends_on:
      - name: sign_artifact_linux_ppc64le
        variant: "*"
    commands:
      - func: checkout
      - func: get_artifact_url
        vars:
          package_variant: linux-ppc64le
          signature_tag: signed
      - func: verify_artifact
  - name: add_crypt_shared_and_sbom_rpm_ppc64le
    tags: ["add-sbom-task"]
    depends_on:
      - name: compile_artifact
        variant: build_linux_ppc64le
    commands:
      - func: checkout
      - func: install
        vars:
          node_js_version: "20.19.5"
      - func: download_compiled_artifact
        vars:
          executable_os_id: linux-ppc64le
      - func: add_crypt_shared_and_sbom
        vars:
          package_variant: rpm-ppc64le
          executable_os_id: linux-ppc64le
      - func: upload_sbom
        vars:
          executable_os_id: linux-ppc64le
          extra_upload_tag: -rpm-ppc64le-sbom
      - func: upload_compiled_artifact
        vars:
          executable_os_id: linux-ppc64le
          extra_upload_tag: -rpm-ppc64le-complete
  - name: package_artifact_rpm_ppc64le
    depends_on:
      - name: add_crypt_shared_and_sbom_rpm_ppc64le
        variant: linux_package
    commands:
      - func: checkout
      - func: install
        vars:
          node_js_version: "20.19.5"
      - func: download_compiled_artifact
        vars:
          executable_os_id: linux-ppc64le
          extra_upload_tag: -rpm-ppc64le-complete
      - func: package_artifact
        vars:
          node_js_version: "20.19.5"
          package_variant: rpm-ppc64le
          executable_os_id: linux-ppc64le
      - func: put_artifact_url
        vars:
          package_variant: rpm-ppc64le
          signature_tag: unsigned
  - name: sign_artifact_rpm_ppc64le
    depends_on:
      - name: package_artifact_rpm_ppc64le
        variant: "*"
    commands:
      - func: checkout
      - func: install
        vars:
          node_js_version: "20.19.5"
      - func: get_artifact_url
        vars:
          package_variant: rpm-ppc64le
          signature_tag: unsigned
      - func: sign_artifact
        vars:
          node_js_version: "20.19.5"
          package_variant: rpm-ppc64le
      - func: papertrail_trace
        vars:
          product: "mongosh-dev"
      - func: put_artifact_url
        vars:
          package_variant: rpm-ppc64le
          signature_tag: signed
  - name: verify_artifact_rpm_ppc64le
    tags: ["smoke-test"]
    depends_on:
      - name: sign_artifact_rpm_ppc64le
        variant: "*"
    commands:
      - func: checkout
      - func: get_artifact_url
        vars:
          package_variant: rpm-ppc64le
          signature_tag: signed
      - func: verify_artifact
  - name: add_crypt_shared_and_sbom_linux_s390x
    tags: ["add-sbom-task"]
    depends_on:
      - name: compile_artifact
        variant: build_linux_s390x
    commands:
      - func: checkout
      - func: install
        vars:
          node_js_version: "20.19.5"
      - func: download_compiled_artifact
        vars:
          executable_os_id: linux-s390x
      - func: add_crypt_shared_and_sbom
        vars:
          package_variant: linux-s390x
          executable_os_id: linux-s390x
      - func: upload_sbom
        vars:
          executable_os_id: linux-s390x
          extra_upload_tag: -linux-s390x-sbom
      - func: upload_compiled_artifact
        vars:
          executable_os_id: linux-s390x
          extra_upload_tag: -linux-s390x-complete
  - name: package_artifact_linux_s390x
    depends_on:
      - name: add_crypt_shared_and_sbom_linux_s390x
        variant: linux_package
    commands:
      - func: checkout
      - func: install
        vars:
          node_js_version: "20.19.5"
      - func: download_compiled_artifact
        vars:
          executable_os_id: linux-s390x
          extra_upload_tag: -linux-s390x-complete
      - func: package_artifact
        vars:
          node_js_version: "20.19.5"
          package_variant: linux-s390x
          executable_os_id: linux-s390x
      - func: put_artifact_url
        vars:
          package_variant: linux-s390x
          signature_tag: unsigned
  - name: sign_artifact_linux_s390x
    depends_on:
      - name: package_artifact_linux_s390x
        variant: "*"
    commands:
      - func: checkout
      - func: install
        vars:
          node_js_version: "20.19.5"
      - func: get_artifact_url
        vars:
          package_variant: linux-s390x
          signature_tag: unsigned
      - func: sign_artifact
        vars:
          node_js_version: "20.19.5"
          package_variant: linux-s390x
      - func: papertrail_trace
        vars:
          product: "mongosh-dev"
      - func: put_artifact_url
        vars:
          package_variant: linux-s390x
          signature_tag: signed
  - name: verify_artifact_linux_s390x
    tags: ["smoke-test"]
    depends_on:
      - name: sign_artifact_linux_s390x
        variant: "*"
    commands:
      - func: checkout
      - func: get_artifact_url
        vars:
          package_variant: linux-s390x
          signature_tag: signed
      - func: verify_artifact
  - name: add_crypt_shared_and_sbom_rpm_s390x
    tags: ["add-sbom-task"]
    depends_on:
      - name: compile_artifact
        variant: build_linux_s390x
    commands:
      - func: checkout
      - func: install
        vars:
          node_js_version: "20.19.5"
      - func: download_compiled_artifact
        vars:
          executable_os_id: linux-s390x
      - func: add_crypt_shared_and_sbom
        vars:
          package_variant: rpm-s390x
          executable_os_id: linux-s390x
      - func: upload_sbom
        vars:
          executable_os_id: linux-s390x
          extra_upload_tag: -rpm-s390x-sbom
      - func: upload_compiled_artifact
        vars:
          executable_os_id: linux-s390x
          extra_upload_tag: -rpm-s390x-complete
  - name: package_artifact_rpm_s390x
    depends_on:
      - name: add_crypt_shared_and_sbom_rpm_s390x
        variant: linux_package
    commands:
      - func: checkout
      - func: install
        vars:
          node_js_version: "20.19.5"
      - func: download_compiled_artifact
        vars:
          executable_os_id: linux-s390x
          extra_upload_tag: -rpm-s390x-complete
      - func: package_artifact
        vars:
          node_js_version: "20.19.5"
          package_variant: rpm-s390x
          executable_os_id: linux-s390x
      - func: put_artifact_url
        vars:
          package_variant: rpm-s390x
          signature_tag: unsigned
  - name: sign_artifact_rpm_s390x
    depends_on:
      - name: package_artifact_rpm_s390x
        variant: "*"
    commands:
      - func: checkout
      - func: install
        vars:
          node_js_version: "20.19.5"
      - func: get_artifact_url
        vars:
          package_variant: rpm-s390x
          signature_tag: unsigned
      - func: sign_artifact
        vars:
          node_js_version: "20.19.5"
          package_variant: rpm-s390x
      - func: papertrail_trace
        vars:
          product: "mongosh-dev"
      - func: put_artifact_url
        vars:
          package_variant: rpm-s390x
          signature_tag: signed
  - name: verify_artifact_rpm_s390x
    tags: ["smoke-test"]
    depends_on:
      - name: sign_artifact_rpm_s390x
        variant: "*"
    commands:
      - func: checkout
      - func: get_artifact_url
        vars:
          package_variant: rpm-s390x
          signature_tag: signed
      - func: verify_artifact
  - name: add_crypt_shared_and_sbom_win32_x64
    tags: ["add-sbom-task"]
    depends_on:
      - name: compile_artifact
        variant: build_win32
    commands:
      - func: checkout
      - func: install
        vars:
          node_js_version: "20.19.5"
      - func: download_compiled_artifact
        vars:
          executable_os_id: win32
      - func: add_crypt_shared_and_sbom
        vars:
          package_variant: win32-x64
          executable_os_id: win32
      - func: upload_sbom
        vars:
          executable_os_id: win32
          extra_upload_tag: -win32-x64-sbom
      - func: upload_compiled_artifact
        vars:
          executable_os_id: win32
          extra_upload_tag: -win32-x64-complete
  - name: package_artifact_win32_x64
    depends_on:
      - name: add_crypt_shared_and_sbom_win32_x64
        variant: linux_package
    commands:
      - func: checkout
      - func: install
        vars:
          node_js_version: "20.19.5"
      - func: download_compiled_artifact
        vars:
          executable_os_id: win32
          extra_upload_tag: -win32-x64-complete
      - func: package_artifact
        vars:
          node_js_version: "20.19.5"
          package_variant: win32-x64
          executable_os_id: win32
      - func: put_artifact_url
        vars:
          package_variant: win32-x64
          signature_tag: unsigned
  - name: sign_artifact_win32_x64
    depends_on:
      - name: package_artifact_win32_x64
        variant: "*"
    commands:
      - func: checkout
      - func: install
        vars:
          node_js_version: "20.19.5"
      - func: get_artifact_url
        vars:
          package_variant: win32-x64
          signature_tag: unsigned
      - func: sign_artifact
        vars:
          node_js_version: "20.19.5"
          package_variant: win32-x64
      - func: papertrail_trace
        vars:
          product: "mongosh-dev"
      - func: put_artifact_url
        vars:
          package_variant: win32-x64
          signature_tag: signed
  - name: verify_artifact_win32_x64
    tags: ["smoke-test"]
    depends_on:
      - name: sign_artifact_win32_x64
        variant: "*"
    commands:
      - func: checkout
      - func: get_artifact_url
        vars:
          package_variant: win32-x64
          signature_tag: signed
      - func: verify_artifact
  - name: add_crypt_shared_and_sbom_win32msi_x64
    tags: ["add-sbom-task"]
    depends_on:
      - name: compile_artifact
        variant: build_win32
    commands:
      - func: checkout
      - func: install
        vars:
          node_js_version: "20.19.5"
      - func: download_compiled_artifact
        vars:
          executable_os_id: win32
      - func: add_crypt_shared_and_sbom
        vars:
          package_variant: win32msi-x64
          executable_os_id: win32
      - func: upload_sbom
        vars:
          executable_os_id: win32
          extra_upload_tag: -win32msi-x64-sbom
      - func: upload_compiled_artifact
        vars:
          executable_os_id: win32
          extra_upload_tag: -win32msi-x64-complete
  - name: package_artifact_win32msi_x64
    depends_on:
      - name: add_crypt_shared_and_sbom_win32msi_x64
        variant: linux_package
    commands:
      - func: checkout
      - func: install
        vars:
          node_js_version: "20.19.5"
      - func: download_compiled_artifact
        vars:
          executable_os_id: win32
          extra_upload_tag: -win32msi-x64-complete
      - func: package_artifact
        vars:
          node_js_version: "20.19.5"
          package_variant: win32msi-x64
          executable_os_id: win32
      - func: put_artifact_url
        vars:
          package_variant: win32msi-x64
          signature_tag: unsigned
  - name: sign_artifact_win32msi_x64
    depends_on:
      - name: package_artifact_win32msi_x64
        variant: "*"
    commands:
      - func: checkout
      - func: install
        vars:
          node_js_version: "20.19.5"
      - func: get_artifact_url
        vars:
          package_variant: win32msi-x64
          signature_tag: unsigned
      - func: sign_artifact
        vars:
          node_js_version: "20.19.5"
          package_variant: win32msi-x64
      - func: papertrail_trace
        vars:
          product: "mongosh-dev"
      - func: put_artifact_url
        vars:
          package_variant: win32msi-x64
          signature_tag: signed
  - name: verify_artifact_win32msi_x64
    tags: ["smoke-test"]
    depends_on:
      - name: sign_artifact_win32msi_x64
        variant: "*"
    commands:
      - func: checkout
      - func: get_artifact_url
        vars:
          package_variant: win32msi-x64
          signature_tag: signed
      - func: verify_artifact

  ###
  # SMOKE TESTS
  ###
  - name: pkg_test_macos_darwin_x64
    tags: ["smoke-test"]
    depends_on:
      - name: sign_artifact_darwin_x64
        variant: "*"
    commands:
      - func: checkout
      - func: get_artifact_url
        vars:
          package_variant: darwin-x64
          signature_tag: signed
      - func: write_preload_script
      - func: test_artifact_macos
  - name: pkg_test_macos_darwin_arm64
    tags: ["smoke-test"]
    depends_on:
      - name: sign_artifact_darwin_arm64
        variant: "*"
    commands:
      - func: checkout
      - func: get_artifact_url
        vars:
          package_variant: darwin-arm64
          signature_tag: signed
      - func: write_preload_script
      - func: test_artifact_macos
  - name: pkg_test_docker_linux_x64_ubuntu20_04_tgz
    tags: ["smoke-test"]
    depends_on:
      - name: sign_artifact_linux_x64
        variant: "*"
    commands:
      - func: checkout
      - func: get_artifact_url
        vars:
          package_variant: linux-x64
          signature_tag: signed
      - func: write_preload_script
      - func: install
        vars:
          node_js_version: "20.19.5"
      - func: test_artifact_docker
        vars:
          node_js_version: "20.19.5"
          dockerfile: ubuntu20.04-tgz
          task_name: ${task_name}
  - name: pkg_test_docker_deb_x64_ubuntu18_04_deb
    tags: ["smoke-test"]
    depends_on:
      - name: sign_artifact_deb_x64
        variant: "*"
    commands:
      - func: checkout
      - func: get_artifact_url
        vars:
          package_variant: deb-x64
          signature_tag: signed
      - func: write_preload_script
      - func: install
        vars:
          node_js_version: "20.19.5"
      - func: test_artifact_docker
        vars:
          node_js_version: "20.19.5"
          dockerfile: ubuntu18.04-deb
          task_name: ${task_name}
  - name: pkg_test_docker_deb_x64_ubuntu20_04_deb
    tags: ["smoke-test"]
    depends_on:
      - name: sign_artifact_deb_x64
        variant: "*"
    commands:
      - func: checkout
      - func: get_artifact_url
        vars:
          package_variant: deb-x64
          signature_tag: signed
      - func: write_preload_script
      - func: install
        vars:
          node_js_version: "20.19.5"
      - func: test_artifact_docker
        vars:
          node_js_version: "20.19.5"
          dockerfile: ubuntu20.04-deb
          task_name: ${task_name}
  - name: pkg_test_docker_deb_x64_ubuntu22_04_deb
    tags: ["smoke-test"]
    depends_on:
      - name: sign_artifact_deb_x64
        variant: "*"
    commands:
      - func: checkout
      - func: get_artifact_url
        vars:
          package_variant: deb-x64
          signature_tag: signed
      - func: write_preload_script
      - func: install
        vars:
          node_js_version: "20.19.5"
      - func: test_artifact_docker
        vars:
          node_js_version: "20.19.5"
          dockerfile: ubuntu22.04-deb
          task_name: ${task_name}
  - name: pkg_test_docker_deb_x64_ubuntu22_04_nohome_deb
    tags: ["smoke-test"]
    depends_on:
      - name: sign_artifact_deb_x64
        variant: "*"
    commands:
      - func: checkout
      - func: get_artifact_url
        vars:
          package_variant: deb-x64
          signature_tag: signed
      - func: write_preload_script
      - func: install
        vars:
          node_js_version: "20.19.5"
      - func: test_artifact_docker
        vars:
          node_js_version: "20.19.5"
          dockerfile: ubuntu22.04-nohome-deb
          task_name: ${task_name}
  - name: pkg_test_docker_deb_x64_ubuntu22_04_qemu_deb
    tags: ["smoke-test"]
    depends_on:
      - name: sign_artifact_deb_x64
        variant: "*"
    commands:
      - func: checkout
      - func: get_artifact_url
        vars:
          package_variant: deb-x64
          signature_tag: signed
      - func: write_preload_script
      - func: install
        vars:
          node_js_version: "20.19.5"
      - func: test_artifact_docker
        vars:
          node_js_version: "20.19.5"
          dockerfile: ubuntu22.04-qemu-deb
          task_name: ${task_name}
  - name: pkg_test_docker_deb_x64_ubuntu24_04_deb
    tags: ["smoke-test"]
    depends_on:
      - name: sign_artifact_deb_x64
        variant: "*"
    commands:
      - func: checkout
      - func: get_artifact_url
        vars:
          package_variant: deb-x64
          signature_tag: signed
      - func: write_preload_script
      - func: install
        vars:
          node_js_version: "20.19.5"
      - func: test_artifact_docker
        vars:
          node_js_version: "20.19.5"
          dockerfile: ubuntu24.04-deb
          task_name: ${task_name}
  - name: pkg_test_docker_deb_x64_debian10_deb
    tags: ["smoke-test"]
    depends_on:
      - name: sign_artifact_deb_x64
        variant: "*"
    commands:
      - func: checkout
      - func: get_artifact_url
        vars:
          package_variant: deb-x64
          signature_tag: signed
      - func: write_preload_script
      - func: install
        vars:
          node_js_version: "20.19.5"
      - func: test_artifact_docker
        vars:
          node_js_version: "20.19.5"
          dockerfile: debian10-deb
          task_name: ${task_name}
  - name: pkg_test_docker_deb_x64_debian11_deb
    tags: ["smoke-test"]
    depends_on:
      - name: sign_artifact_deb_x64
        variant: "*"
    commands:
      - func: checkout
      - func: get_artifact_url
        vars:
          package_variant: deb-x64
          signature_tag: signed
      - func: write_preload_script
      - func: install
        vars:
          node_js_version: "20.19.5"
      - func: test_artifact_docker
        vars:
          node_js_version: "20.19.5"
          dockerfile: debian11-deb
          task_name: ${task_name}
  - name: pkg_test_docker_deb_x64_debian12_deb
    tags: ["smoke-test"]
    depends_on:
      - name: sign_artifact_deb_x64
        variant: "*"
    commands:
      - func: checkout
      - func: get_artifact_url
        vars:
          package_variant: deb-x64
          signature_tag: signed
      - func: write_preload_script
      - func: install
        vars:
          node_js_version: "20.19.5"
      - func: test_artifact_docker
        vars:
          node_js_version: "20.19.5"
          dockerfile: debian12-deb
          task_name: ${task_name}
  - name: pkg_test_docker_rpm_x64_centos7_rpm
    tags: ["smoke-test"]
    depends_on:
      - name: sign_artifact_rpm_x64
        variant: "*"
    commands:
      - func: checkout
      - func: get_artifact_url
        vars:
          package_variant: rpm-x64
          signature_tag: signed
      - func: write_preload_script
      - func: install
        vars:
          node_js_version: "20.19.5"
      - func: test_artifact_docker
        vars:
          node_js_version: "20.19.5"
          dockerfile: centos7-rpm
          task_name: ${task_name}
  - name: pkg_test_docker_rpm_x64_amazonlinux2_rpm
    tags: ["smoke-test"]
    depends_on:
      - name: sign_artifact_rpm_x64
        variant: "*"
    commands:
      - func: checkout
      - func: get_artifact_url
        vars:
          package_variant: rpm-x64
          signature_tag: signed
      - func: write_preload_script
      - func: install
        vars:
          node_js_version: "20.19.5"
      - func: test_artifact_docker
        vars:
          node_js_version: "20.19.5"
          dockerfile: amazonlinux2-rpm
          task_name: ${task_name}
  - name: pkg_test_docker_rpm_x64_amazonlinux2023_rpm
    tags: ["smoke-test"]
    depends_on:
      - name: sign_artifact_rpm_x64
        variant: "*"
    commands:
      - func: checkout
      - func: get_artifact_url
        vars:
          package_variant: rpm-x64
          signature_tag: signed
      - func: write_preload_script
      - func: install
        vars:
          node_js_version: "20.19.5"
      - func: test_artifact_docker
        vars:
          node_js_version: "20.19.5"
          dockerfile: amazonlinux2023-rpm
          task_name: ${task_name}
  - name: pkg_test_docker_rpm_x64_rocky8_rpm
    tags: ["smoke-test"]
    depends_on:
      - name: sign_artifact_rpm_x64
        variant: "*"
    commands:
      - func: checkout
      - func: get_artifact_url
        vars:
          package_variant: rpm-x64
          signature_tag: signed
      - func: write_preload_script
      - func: install
        vars:
          node_js_version: "20.19.5"
      - func: test_artifact_docker
        vars:
          node_js_version: "20.19.5"
          dockerfile: rocky8-rpm
          task_name: ${task_name}
  - name: pkg_test_docker_rpm_x64_rocky9_rpm
    tags: ["smoke-test"]
    depends_on:
      - name: sign_artifact_rpm_x64
        variant: "*"
    commands:
      - func: checkout
      - func: get_artifact_url
        vars:
          package_variant: rpm-x64
          signature_tag: signed
      - func: write_preload_script
      - func: install
        vars:
          node_js_version: "20.19.5"
      - func: test_artifact_docker
        vars:
          node_js_version: "20.19.5"
          dockerfile: rocky9-rpm
          task_name: ${task_name}
  - name: pkg_test_docker_rpm_x64_fedora34_rpm
    tags: ["smoke-test"]
    depends_on:
      - name: sign_artifact_rpm_x64
        variant: "*"
    commands:
      - func: checkout
      - func: get_artifact_url
        vars:
          package_variant: rpm-x64
          signature_tag: signed
      - func: write_preload_script
      - func: install
        vars:
          node_js_version: "20.19.5"
      - func: test_artifact_docker
        vars:
          node_js_version: "20.19.5"
          dockerfile: fedora34-rpm
          task_name: ${task_name}
  - name: pkg_test_docker_rpm_x64_suse12_rpm
    tags: ["smoke-test"]
    depends_on:
      - name: sign_artifact_rpm_x64
        variant: "*"
    commands:
      - func: checkout
      - func: get_artifact_url
        vars:
          package_variant: rpm-x64
          signature_tag: signed
      - func: write_preload_script
      - func: install
        vars:
          node_js_version: "20.19.5"
      - func: test_artifact_docker
        vars:
          node_js_version: "20.19.5"
          dockerfile: suse12-rpm
          task_name: ${task_name}
  - name: pkg_test_docker_rpm_x64_suse15_rpm
    tags: ["smoke-test"]
    depends_on:
      - name: sign_artifact_rpm_x64
        variant: "*"
    commands:
      - func: checkout
      - func: get_artifact_url
        vars:
          package_variant: rpm-x64
          signature_tag: signed
      - func: write_preload_script
      - func: install
        vars:
          node_js_version: "20.19.5"
      - func: test_artifact_docker
        vars:
          node_js_version: "20.19.5"
          dockerfile: suse15-rpm
          task_name: ${task_name}
  - name: pkg_test_docker_rpm_x64_oraclelinux9_rpm
    tags: ["smoke-test"]
    depends_on:
      - name: sign_artifact_rpm_x64
        variant: "*"
    commands:
      - func: checkout
      - func: get_artifact_url
        vars:
          package_variant: rpm-x64
          signature_tag: signed
      - func: write_preload_script
      - func: install
        vars:
          node_js_version: "20.19.5"
      - func: test_artifact_docker
        vars:
          node_js_version: "20.19.5"
          dockerfile: oraclelinux9-rpm
          task_name: ${task_name}
  - name: pkg_test_docker_deb_x64_openssl11_ubuntu20_04_deb
    tags: ["smoke-test"]
    depends_on:
      - name: sign_artifact_deb_x64_openssl11
        variant: "*"
    commands:
      - func: checkout
      - func: get_artifact_url
        vars:
          package_variant: deb-x64-openssl11
          signature_tag: signed
      - func: write_preload_script
      - func: install
        vars:
          node_js_version: "20.19.5"
      - func: test_artifact_docker
        vars:
          node_js_version: "20.19.5"
          dockerfile: ubuntu20.04-deb
          task_name: ${task_name}
  - name: pkg_test_docker_deb_x64_openssl11_debian10_deb
    tags: ["smoke-test"]
    depends_on:
      - name: sign_artifact_deb_x64_openssl11
        variant: "*"
    commands:
      - func: checkout
      - func: get_artifact_url
        vars:
          package_variant: deb-x64-openssl11
          signature_tag: signed
      - func: write_preload_script
      - func: install
        vars:
          node_js_version: "20.19.5"
      - func: test_artifact_docker
        vars:
          node_js_version: "20.19.5"
          dockerfile: debian10-deb
          task_name: ${task_name}
  - name: pkg_test_docker_deb_x64_openssl11_debian11_deb
    tags: ["smoke-test"]
    depends_on:
      - name: sign_artifact_deb_x64_openssl11
        variant: "*"
    commands:
      - func: checkout
      - func: get_artifact_url
        vars:
          package_variant: deb-x64-openssl11
          signature_tag: signed
      - func: write_preload_script
      - func: install
        vars:
          node_js_version: "20.19.5"
      - func: test_artifact_docker
        vars:
          node_js_version: "20.19.5"
          dockerfile: debian11-deb
          task_name: ${task_name}
  - name: pkg_test_docker_rpm_x64_openssl11_centos7_epel_rpm
    tags: ["smoke-test"]
    depends_on:
      - name: sign_artifact_rpm_x64_openssl11
        variant: "*"
    commands:
      - func: checkout
      - func: get_artifact_url
        vars:
          package_variant: rpm-x64-openssl11
          signature_tag: signed
      - func: write_preload_script
      - func: install
        vars:
          node_js_version: "20.19.5"
      - func: test_artifact_docker
        vars:
          node_js_version: "20.19.5"
          dockerfile: centos7-epel-rpm
          task_name: ${task_name}
  - name: pkg_test_docker_rpm_x64_openssl11_amazonlinux2_rpm
    tags: ["smoke-test"]
    depends_on:
      - name: sign_artifact_rpm_x64_openssl11
        variant: "*"
    commands:
      - func: checkout
      - func: get_artifact_url
        vars:
          package_variant: rpm-x64-openssl11
          signature_tag: signed
      - func: write_preload_script
      - func: install
        vars:
          node_js_version: "20.19.5"
      - func: test_artifact_docker
        vars:
          node_js_version: "20.19.5"
          dockerfile: amazonlinux2-rpm
          task_name: ${task_name}
  - name: pkg_test_docker_rpm_x64_openssl11_rocky8_rpm
    tags: ["smoke-test"]
    depends_on:
      - name: sign_artifact_rpm_x64_openssl11
        variant: "*"
    commands:
      - func: checkout
      - func: get_artifact_url
        vars:
          package_variant: rpm-x64-openssl11
          signature_tag: signed
      - func: write_preload_script
      - func: install
        vars:
          node_js_version: "20.19.5"
      - func: test_artifact_docker
        vars:
          node_js_version: "20.19.5"
          dockerfile: rocky8-rpm
          task_name: ${task_name}
  - name: pkg_test_docker_rpm_x64_openssl11_rocky9_rpm
    tags: ["smoke-test"]
    depends_on:
      - name: sign_artifact_rpm_x64_openssl11
        variant: "*"
    commands:
      - func: checkout
      - func: get_artifact_url
        vars:
          package_variant: rpm-x64-openssl11
          signature_tag: signed
      - func: write_preload_script
      - func: install
        vars:
          node_js_version: "20.19.5"
      - func: test_artifact_docker
        vars:
          node_js_version: "20.19.5"
          dockerfile: rocky9-rpm
          task_name: ${task_name}
  - name: pkg_test_docker_rpm_x64_openssl11_fedora34_rpm
    tags: ["smoke-test"]
    depends_on:
      - name: sign_artifact_rpm_x64_openssl11
        variant: "*"
    commands:
      - func: checkout
      - func: get_artifact_url
        vars:
          package_variant: rpm-x64-openssl11
          signature_tag: signed
      - func: write_preload_script
      - func: install
        vars:
          node_js_version: "20.19.5"
      - func: test_artifact_docker
        vars:
          node_js_version: "20.19.5"
          dockerfile: fedora34-rpm
          task_name: ${task_name}
  - name: pkg_test_docker_deb_x64_openssl3_ubuntu22_04_deb
    tags: ["smoke-test"]
    depends_on:
      - name: sign_artifact_deb_x64_openssl3
        variant: "*"
    commands:
      - func: checkout
      - func: get_artifact_url
        vars:
          package_variant: deb-x64-openssl3
          signature_tag: signed
      - func: write_preload_script
      - func: install
        vars:
          node_js_version: "20.19.5"
      - func: test_artifact_docker
        vars:
          node_js_version: "20.19.5"
          dockerfile: ubuntu22.04-deb
          task_name: ${task_name}
  - name: pkg_test_docker_deb_x64_openssl3_ubuntu22_04_fips_deb
    tags: ["smoke-test"]
    depends_on:
      - name: sign_artifact_deb_x64_openssl3
        variant: "*"
    commands:
      - func: checkout
      - func: get_artifact_url
        vars:
          package_variant: deb-x64-openssl3
          signature_tag: signed
      - func: write_preload_script
      - func: install
        vars:
          node_js_version: "20.19.5"
      - func: test_artifact_docker
        vars:
          node_js_version: "20.19.5"
          dockerfile: ubuntu22.04-fips-deb
          task_name: ${task_name}
  - name: pkg_test_docker_deb_x64_openssl3_debian12_deb
    tags: ["smoke-test"]
    depends_on:
      - name: sign_artifact_deb_x64_openssl3
        variant: "*"
    commands:
      - func: checkout
      - func: get_artifact_url
        vars:
          package_variant: deb-x64-openssl3
          signature_tag: signed
      - func: write_preload_script
      - func: install
        vars:
          node_js_version: "20.19.5"
      - func: test_artifact_docker
        vars:
          node_js_version: "20.19.5"
          dockerfile: debian12-deb
          task_name: ${task_name}
  - name: pkg_test_docker_rpm_x64_openssl3_rocky8_epel_rpm
    tags: ["smoke-test"]
    depends_on:
      - name: sign_artifact_rpm_x64_openssl3
        variant: "*"
    commands:
      - func: checkout
      - func: get_artifact_url
        vars:
          package_variant: rpm-x64-openssl3
          signature_tag: signed
      - func: write_preload_script
      - func: install
        vars:
          node_js_version: "20.19.5"
      - func: test_artifact_docker
        vars:
          node_js_version: "20.19.5"
          dockerfile: rocky8-epel-rpm
          task_name: ${task_name}
  - name: pkg_test_docker_rpm_x64_openssl3_rocky9_rpm
    tags: ["smoke-test"]
    depends_on:
      - name: sign_artifact_rpm_x64_openssl3
        variant: "*"
    commands:
      - func: checkout
      - func: get_artifact_url
        vars:
          package_variant: rpm-x64-openssl3
          signature_tag: signed
      - func: write_preload_script
      - func: install
        vars:
          node_js_version: "20.19.5"
      - func: test_artifact_docker
        vars:
          node_js_version: "20.19.5"
          dockerfile: rocky9-rpm
          task_name: ${task_name}
  - name: pkg_test_docker_rpm_x64_openssl3_rocky9_fips_rpm
    tags: ["smoke-test"]
    depends_on:
      - name: sign_artifact_rpm_x64_openssl3
        variant: "*"
    commands:
      - func: checkout
      - func: get_artifact_url
        vars:
          package_variant: rpm-x64-openssl3
          signature_tag: signed
      - func: write_preload_script
      - func: install
        vars:
          node_js_version: "20.19.5"
      - func: test_artifact_docker
        vars:
          node_js_version: "20.19.5"
          dockerfile: rocky9-fips-rpm
          task_name: ${task_name}
  - name: pkg_test_docker_rpm_x64_openssl3_amazonlinux2023_rpm
    tags: ["smoke-test"]
    depends_on:
      - name: sign_artifact_rpm_x64_openssl3
        variant: "*"
    commands:
      - func: checkout
      - func: get_artifact_url
        vars:
          package_variant: rpm-x64-openssl3
          signature_tag: signed
      - func: write_preload_script
      - func: install
        vars:
          node_js_version: "20.19.5"
      - func: test_artifact_docker
        vars:
          node_js_version: "20.19.5"
          dockerfile: amazonlinux2023-rpm
          task_name: ${task_name}
  - name: pkg_test_docker_linux_arm64_ubuntu20_04_tgz
    tags: ["smoke-test"]
    depends_on:
      - name: sign_artifact_linux_arm64
        variant: "*"
    commands:
      - func: checkout
      - func: get_artifact_url
        vars:
          package_variant: linux-arm64
          signature_tag: signed
      - func: write_preload_script
      - func: install
        vars:
          node_js_version: "20.19.5"
      - func: test_artifact_docker
        vars:
          node_js_version: "20.19.5"
          dockerfile: ubuntu20.04-tgz
          task_name: ${task_name}
  - name: pkg_test_docker_deb_arm64_ubuntu18_04_deb
    tags: ["smoke-test"]
    depends_on:
      - name: sign_artifact_deb_arm64
        variant: "*"
    commands:
      - func: checkout
      - func: get_artifact_url
        vars:
          package_variant: deb-arm64
          signature_tag: signed
      - func: write_preload_script
      - func: install
        vars:
          node_js_version: "20.19.5"
      - func: test_artifact_docker
        vars:
          node_js_version: "20.19.5"
          dockerfile: ubuntu18.04-deb
          task_name: ${task_name}
  - name: pkg_test_docker_deb_arm64_ubuntu20_04_deb
    tags: ["smoke-test"]
    depends_on:
      - name: sign_artifact_deb_arm64
        variant: "*"
    commands:
      - func: checkout
      - func: get_artifact_url
        vars:
          package_variant: deb-arm64
          signature_tag: signed
      - func: write_preload_script
      - func: install
        vars:
          node_js_version: "20.19.5"
      - func: test_artifact_docker
        vars:
          node_js_version: "20.19.5"
          dockerfile: ubuntu20.04-deb
          task_name: ${task_name}
  - name: pkg_test_docker_deb_arm64_ubuntu22_04_deb
    tags: ["smoke-test"]
    depends_on:
      - name: sign_artifact_deb_arm64
        variant: "*"
    commands:
      - func: checkout
      - func: get_artifact_url
        vars:
          package_variant: deb-arm64
          signature_tag: signed
      - func: write_preload_script
      - func: install
        vars:
          node_js_version: "20.19.5"
      - func: test_artifact_docker
        vars:
          node_js_version: "20.19.5"
          dockerfile: ubuntu22.04-deb
          task_name: ${task_name}
  - name: pkg_test_docker_deb_arm64_ubuntu22_04_nohome_deb
    tags: ["smoke-test"]
    depends_on:
      - name: sign_artifact_deb_arm64
        variant: "*"
    commands:
      - func: checkout
      - func: get_artifact_url
        vars:
          package_variant: deb-arm64
          signature_tag: signed
      - func: write_preload_script
      - func: install
        vars:
          node_js_version: "20.19.5"
      - func: test_artifact_docker
        vars:
          node_js_version: "20.19.5"
          dockerfile: ubuntu22.04-nohome-deb
          task_name: ${task_name}
  - name: pkg_test_docker_deb_arm64_ubuntu22_04_qemu_deb
    tags: ["smoke-test"]
    depends_on:
      - name: sign_artifact_deb_arm64
        variant: "*"
    commands:
      - func: checkout
      - func: get_artifact_url
        vars:
          package_variant: deb-arm64
          signature_tag: signed
      - func: write_preload_script
      - func: install
        vars:
          node_js_version: "20.19.5"
      - func: test_artifact_docker
        vars:
          node_js_version: "20.19.5"
          dockerfile: ubuntu22.04-qemu-deb
          task_name: ${task_name}
  - name: pkg_test_docker_deb_arm64_ubuntu24_04_deb
    tags: ["smoke-test"]
    depends_on:
      - name: sign_artifact_deb_arm64
        variant: "*"
    commands:
      - func: checkout
      - func: get_artifact_url
        vars:
          package_variant: deb-arm64
          signature_tag: signed
      - func: write_preload_script
      - func: install
        vars:
          node_js_version: "20.19.5"
      - func: test_artifact_docker
        vars:
          node_js_version: "20.19.5"
          dockerfile: ubuntu24.04-deb
          task_name: ${task_name}
  - name: pkg_test_docker_deb_arm64_debian10_deb
    tags: ["smoke-test"]
    depends_on:
      - name: sign_artifact_deb_arm64
        variant: "*"
    commands:
      - func: checkout
      - func: get_artifact_url
        vars:
          package_variant: deb-arm64
          signature_tag: signed
      - func: write_preload_script
      - func: install
        vars:
          node_js_version: "20.19.5"
      - func: test_artifact_docker
        vars:
          node_js_version: "20.19.5"
          dockerfile: debian10-deb
          task_name: ${task_name}
  - name: pkg_test_docker_deb_arm64_debian11_deb
    tags: ["smoke-test"]
    depends_on:
      - name: sign_artifact_deb_arm64
        variant: "*"
    commands:
      - func: checkout
      - func: get_artifact_url
        vars:
          package_variant: deb-arm64
          signature_tag: signed
      - func: write_preload_script
      - func: install
        vars:
          node_js_version: "20.19.5"
      - func: test_artifact_docker
        vars:
          node_js_version: "20.19.5"
          dockerfile: debian11-deb
          task_name: ${task_name}
  - name: pkg_test_docker_deb_arm64_debian12_deb
    tags: ["smoke-test"]
    depends_on:
      - name: sign_artifact_deb_arm64
        variant: "*"
    commands:
      - func: checkout
      - func: get_artifact_url
        vars:
          package_variant: deb-arm64
          signature_tag: signed
      - func: write_preload_script
      - func: install
        vars:
          node_js_version: "20.19.5"
      - func: test_artifact_docker
        vars:
          node_js_version: "20.19.5"
          dockerfile: debian12-deb
          task_name: ${task_name}
  - name: pkg_test_docker_rpm_arm64_rocky8_rpm
    tags: ["smoke-test"]
    depends_on:
      - name: sign_artifact_rpm_arm64
        variant: "*"
    commands:
      - func: checkout
      - func: get_artifact_url
        vars:
          package_variant: rpm-arm64
          signature_tag: signed
      - func: write_preload_script
      - func: install
        vars:
          node_js_version: "20.19.5"
      - func: test_artifact_docker
        vars:
          node_js_version: "20.19.5"
          dockerfile: rocky8-rpm
          task_name: ${task_name}
  - name: pkg_test_docker_rpm_arm64_rocky9_rpm
    tags: ["smoke-test"]
    depends_on:
      - name: sign_artifact_rpm_arm64
        variant: "*"
    commands:
      - func: checkout
      - func: get_artifact_url
        vars:
          package_variant: rpm-arm64
          signature_tag: signed
      - func: write_preload_script
      - func: install
        vars:
          node_js_version: "20.19.5"
      - func: test_artifact_docker
        vars:
          node_js_version: "20.19.5"
          dockerfile: rocky9-rpm
          task_name: ${task_name}
  - name: pkg_test_docker_rpm_arm64_fedora34_rpm
    tags: ["smoke-test"]
    depends_on:
      - name: sign_artifact_rpm_arm64
        variant: "*"
    commands:
      - func: checkout
      - func: get_artifact_url
        vars:
          package_variant: rpm-arm64
          signature_tag: signed
      - func: write_preload_script
      - func: install
        vars:
          node_js_version: "20.19.5"
      - func: test_artifact_docker
        vars:
          node_js_version: "20.19.5"
          dockerfile: fedora34-rpm
          task_name: ${task_name}
  - name: pkg_test_docker_rpm_arm64_amazonlinux2_rpm
    tags: ["smoke-test"]
    depends_on:
      - name: sign_artifact_rpm_arm64
        variant: "*"
    commands:
      - func: checkout
      - func: get_artifact_url
        vars:
          package_variant: rpm-arm64
          signature_tag: signed
      - func: write_preload_script
      - func: install
        vars:
          node_js_version: "20.19.5"
      - func: test_artifact_docker
        vars:
          node_js_version: "20.19.5"
          dockerfile: amazonlinux2-rpm
          task_name: ${task_name}
  - name: pkg_test_docker_rpm_arm64_amazonlinux2023_rpm
    tags: ["smoke-test"]
    depends_on:
      - name: sign_artifact_rpm_arm64
        variant: "*"
    commands:
      - func: checkout
      - func: get_artifact_url
        vars:
          package_variant: rpm-arm64
          signature_tag: signed
      - func: write_preload_script
      - func: install
        vars:
          node_js_version: "20.19.5"
      - func: test_artifact_docker
        vars:
          node_js_version: "20.19.5"
          dockerfile: amazonlinux2023-rpm
          task_name: ${task_name}
  - name: pkg_test_docker_deb_arm64_openssl11_ubuntu20_04_deb
    tags: ["smoke-test"]
    depends_on:
      - name: sign_artifact_deb_arm64_openssl11
        variant: "*"
    commands:
      - func: checkout
      - func: get_artifact_url
        vars:
          package_variant: deb-arm64-openssl11
          signature_tag: signed
      - func: write_preload_script
      - func: install
        vars:
          node_js_version: "20.19.5"
      - func: test_artifact_docker
        vars:
          node_js_version: "20.19.5"
          dockerfile: ubuntu20.04-deb
          task_name: ${task_name}
  - name: pkg_test_docker_deb_arm64_openssl11_debian10_deb
    tags: ["smoke-test"]
    depends_on:
      - name: sign_artifact_deb_arm64_openssl11
        variant: "*"
    commands:
      - func: checkout
      - func: get_artifact_url
        vars:
          package_variant: deb-arm64-openssl11
          signature_tag: signed
      - func: write_preload_script
      - func: install
        vars:
          node_js_version: "20.19.5"
      - func: test_artifact_docker
        vars:
          node_js_version: "20.19.5"
          dockerfile: debian10-deb
          task_name: ${task_name}
  - name: pkg_test_docker_deb_arm64_openssl11_debian11_deb
    tags: ["smoke-test"]
    depends_on:
      - name: sign_artifact_deb_arm64_openssl11
        variant: "*"
    commands:
      - func: checkout
      - func: get_artifact_url
        vars:
          package_variant: deb-arm64-openssl11
          signature_tag: signed
      - func: write_preload_script
      - func: install
        vars:
          node_js_version: "20.19.5"
      - func: test_artifact_docker
        vars:
          node_js_version: "20.19.5"
          dockerfile: debian11-deb
          task_name: ${task_name}
  - name: pkg_test_docker_rpm_arm64_openssl11_rocky8_rpm
    tags: ["smoke-test"]
    depends_on:
      - name: sign_artifact_rpm_arm64_openssl11
        variant: "*"
    commands:
      - func: checkout
      - func: get_artifact_url
        vars:
          package_variant: rpm-arm64-openssl11
          signature_tag: signed
      - func: write_preload_script
      - func: install
        vars:
          node_js_version: "20.19.5"
      - func: test_artifact_docker
        vars:
          node_js_version: "20.19.5"
          dockerfile: rocky8-rpm
          task_name: ${task_name}
  - name: pkg_test_docker_rpm_arm64_openssl11_rocky9_rpm
    tags: ["smoke-test"]
    depends_on:
      - name: sign_artifact_rpm_arm64_openssl11
        variant: "*"
    commands:
      - func: checkout
      - func: get_artifact_url
        vars:
          package_variant: rpm-arm64-openssl11
          signature_tag: signed
      - func: write_preload_script
      - func: install
        vars:
          node_js_version: "20.19.5"
      - func: test_artifact_docker
        vars:
          node_js_version: "20.19.5"
          dockerfile: rocky9-rpm
          task_name: ${task_name}
  - name: pkg_test_docker_rpm_arm64_openssl11_fedora34_rpm
    tags: ["smoke-test"]
    depends_on:
      - name: sign_artifact_rpm_arm64_openssl11
        variant: "*"
    commands:
      - func: checkout
      - func: get_artifact_url
        vars:
          package_variant: rpm-arm64-openssl11
          signature_tag: signed
      - func: write_preload_script
      - func: install
        vars:
          node_js_version: "20.19.5"
      - func: test_artifact_docker
        vars:
          node_js_version: "20.19.5"
          dockerfile: fedora34-rpm
          task_name: ${task_name}
  - name: pkg_test_docker_rpm_arm64_openssl11_amazonlinux2_rpm
    tags: ["smoke-test"]
    depends_on:
      - name: sign_artifact_rpm_arm64_openssl11
        variant: "*"
    commands:
      - func: checkout
      - func: get_artifact_url
        vars:
          package_variant: rpm-arm64-openssl11
          signature_tag: signed
      - func: write_preload_script
      - func: install
        vars:
          node_js_version: "20.19.5"
      - func: test_artifact_docker
        vars:
          node_js_version: "20.19.5"
          dockerfile: amazonlinux2-rpm
          task_name: ${task_name}
  - name: pkg_test_docker_deb_arm64_openssl3_ubuntu22_04_deb
    tags: ["smoke-test"]
    depends_on:
      - name: sign_artifact_deb_arm64_openssl3
        variant: "*"
    commands:
      - func: checkout
      - func: get_artifact_url
        vars:
          package_variant: deb-arm64-openssl3
          signature_tag: signed
      - func: write_preload_script
      - func: install
        vars:
          node_js_version: "20.19.5"
      - func: test_artifact_docker
        vars:
          node_js_version: "20.19.5"
          dockerfile: ubuntu22.04-deb
          task_name: ${task_name}
  - name: pkg_test_docker_deb_arm64_openssl3_ubuntu22_04_fips_deb
    tags: ["smoke-test"]
    depends_on:
      - name: sign_artifact_deb_arm64_openssl3
        variant: "*"
    commands:
      - func: checkout
      - func: get_artifact_url
        vars:
          package_variant: deb-arm64-openssl3
          signature_tag: signed
      - func: write_preload_script
      - func: install
        vars:
          node_js_version: "20.19.5"
      - func: test_artifact_docker
        vars:
          node_js_version: "20.19.5"
          dockerfile: ubuntu22.04-fips-deb
          task_name: ${task_name}
  - name: pkg_test_docker_deb_arm64_openssl3_debian12_deb
    tags: ["smoke-test"]
    depends_on:
      - name: sign_artifact_deb_arm64_openssl3
        variant: "*"
    commands:
      - func: checkout
      - func: get_artifact_url
        vars:
          package_variant: deb-arm64-openssl3
          signature_tag: signed
      - func: write_preload_script
      - func: install
        vars:
          node_js_version: "20.19.5"
      - func: test_artifact_docker
        vars:
          node_js_version: "20.19.5"
          dockerfile: debian12-deb
          task_name: ${task_name}
  - name: pkg_test_docker_rpm_arm64_openssl3_rocky8_epel_rpm
    tags: ["smoke-test"]
    depends_on:
      - name: sign_artifact_rpm_arm64_openssl3
        variant: "*"
    commands:
      - func: checkout
      - func: get_artifact_url
        vars:
          package_variant: rpm-arm64-openssl3
          signature_tag: signed
      - func: write_preload_script
      - func: install
        vars:
          node_js_version: "20.19.5"
      - func: test_artifact_docker
        vars:
          node_js_version: "20.19.5"
          dockerfile: rocky8-epel-rpm
          task_name: ${task_name}
  - name: pkg_test_docker_rpm_arm64_openssl3_rocky9_rpm
    tags: ["smoke-test"]
    depends_on:
      - name: sign_artifact_rpm_arm64_openssl3
        variant: "*"
    commands:
      - func: checkout
      - func: get_artifact_url
        vars:
          package_variant: rpm-arm64-openssl3
          signature_tag: signed
      - func: write_preload_script
      - func: install
        vars:
          node_js_version: "20.19.5"
      - func: test_artifact_docker
        vars:
          node_js_version: "20.19.5"
          dockerfile: rocky9-rpm
          task_name: ${task_name}
  - name: pkg_test_docker_rpm_arm64_openssl3_rocky9_fips_rpm
    tags: ["smoke-test"]
    depends_on:
      - name: sign_artifact_rpm_arm64_openssl3
        variant: "*"
    commands:
      - func: checkout
      - func: get_artifact_url
        vars:
          package_variant: rpm-arm64-openssl3
          signature_tag: signed
      - func: write_preload_script
      - func: install
        vars:
          node_js_version: "20.19.5"
      - func: test_artifact_docker
        vars:
          node_js_version: "20.19.5"
          dockerfile: rocky9-fips-rpm
          task_name: ${task_name}
  - name: pkg_test_docker_rpm_arm64_openssl3_amazonlinux2023_rpm
    tags: ["smoke-test"]
    depends_on:
      - name: sign_artifact_rpm_arm64_openssl3
        variant: "*"
    commands:
      - func: checkout
      - func: get_artifact_url
        vars:
          package_variant: rpm-arm64-openssl3
          signature_tag: signed
      - func: write_preload_script
      - func: install
        vars:
          node_js_version: "20.19.5"
      - func: test_artifact_docker
        vars:
          node_js_version: "20.19.5"
          dockerfile: amazonlinux2023-rpm
          task_name: ${task_name}
  - name: pkg_test_rpmextract_rpm_ppc64le
    tags: ["smoke-test"]
    depends_on:
      - name: sign_artifact_rpm_ppc64le
        variant: "*"
    commands:
      - func: checkout
      - func: get_artifact_url
        vars:
          package_variant: rpm-ppc64le
          signature_tag: signed
      - func: write_preload_script
      - func: test_artifact_rpmextract
  - name: pkg_test_rpmextract_rpm_s390x
    tags: ["smoke-test"]
    depends_on:
      - name: sign_artifact_rpm_s390x
        variant: "*"
    commands:
      - func: checkout
      - func: get_artifact_url
        vars:
          package_variant: rpm-s390x
          signature_tag: signed
      - func: write_preload_script
      - func: test_artifact_rpmextract
  - name: pkg_test_ssh_win32_x64
    tags: ["smoke-test"]
    depends_on:
      - name: sign_artifact_win32_x64
        variant: "*"
    commands:
      - func: checkout
      - func: get_artifact_url
        vars:
          package_variant: win32-x64
          signature_tag: signed
      - func: write_preload_script
      - func: spawn_host
        vars:
          distro: windows-vsCurrent-small
      - func: run_pkg_tests_through_ssh
        vars:
          admin_user_name: Administrator
          onhost_script_path: .evergreen/test-package-win32.sh
          preload_script_path: preload.sh
  - name: pkg_test_ssh_win32msi_x64
    tags: ["smoke-test"]
    depends_on:
      - name: sign_artifact_win32msi_x64
        variant: "*"
    commands:
      - func: checkout
      - func: get_artifact_url
        vars:
          package_variant: win32msi-x64
          signature_tag: signed
      - func: write_preload_script
      - func: spawn_host
        vars:
          distro: windows-vsCurrent-small
      - func: run_pkg_tests_through_ssh
        vars:
          admin_user_name: Administrator
          onhost_script_path: .evergreen/test-package-win32.sh
          preload_script_path: preload.sh
  - name: create_static_analysis_report
    tags: ["extra-integration-test"]
    depends_on:
      - name: ".compile-artifact"
        variant: "*"
    commands:
      - func: checkout
      - func: install
        vars:
          node_js_version: "20.19.5"
      - func: create_static_analysis_report
        vars:
          node_js_version: "20.19.5"

  ###
  # RELEASE TASKS
  ###
  - name: release_draft
    git_tag_only: true
    depends_on:
      - name: ".smoke-test"
        variant: "*"
      - name: ".extra-integration-test"
        variant: "*"
      - name: ".e2e-test"
        variant: "*"
      - name: ".connectivity-test"
        variant: "*"
      - name: check
        variant: "*"
      - name: ".unit-test"
        variant: "*"
    commands:
      - func: checkout
      - func: install
        vars:
          node_js_version: "20.19.5"
      - func: release_draft
        vars:
          node_js_version: "20.19.5"
  - name: release_publish_dry_run
    git_tag_only: true
    exec_timeout_secs: 86400
    depends_on:
      - name: release_draft
    commands:
      - func: checkout
      - func: install
        vars:
          node_js_version: "20.19.5"
      - func: release_publish_download_and_list_artifacts
        vars:
          node_js_version: "20.19.5"
      - func: papertrail_trace
        vars:
          product: "mongosh-draft"
      - func: release_publish_dry_run
        vars:
          node_js_version: "20.19.5"
  - name: release_publish
    tags: ["publish"]
    git_tag_only: true
    exec_timeout_secs: 86400
    depends_on:
      - name: compile_ts
        variant: linux_compile
    commands:
      - func: checkout_writeable
      - func: install
        vars:
          node_js_version: "20.19.5"
      - func: release_publish_download_and_list_artifacts
        vars:
          node_js_version: "20.19.5"
      - func: papertrail_trace
        vars:
          product: "mongosh"
      - func: release_publish
        vars:
          node_js_version: "20.19.5"

# Need to run builds for every possible build variant.
buildvariants:
  - name: darwin-n20
    display_name: "MacOS 14 arm64 n20 (Unit tests)"
    run_on: macos-14-arm64
    tags: []
    disable: false
    expansions:
      executable_os_id: darwin-arm64
      mongosh_server_test_version: ""
      node_js_version: "20.19.5"
      mongosh_skip_node_version_check: ""
    tasks:
      - name: test_arg_parser
      - name: test_async_rewriter2
      - name: test_autocomplete
      - name: test_browser_repl
      - name: test_browser_runtime_core
      - name: test_browser_runtime_electron
      - name: test_build
      - name: test_cli_repl
      - name: test_e2e_tests
      - name: test_editor
      - name: test_errors
      - name: test_history
      - name: test_i18n
      - name: test_js_multiline_to_singleline
      - name: test_logging
      - name: test_node_runtime_worker_thread
      - name: test_service_provider_core
      - name: test_service_provider_node_driver
      - name: test_shell_api
      - name: test_shell_bson
      - name: test_shell_evaluator
      - name: test_snippet_manager
      - name: test_types
  - name: tests_darwin-m60xc_n20
    display_name: "MacOS 14 arm64 m60xc n20 (Unit tests)"
    run_on: macos-14-arm64
    tags: []
    disable: false
    expansions:
      executable_os_id: darwin-arm64
      mongosh_server_test_version: "6.0.x"
      node_js_version: "20.19.5"
      mongosh_skip_node_version_check: ""
    tasks:
      - name: test_arg_parser
      - name: test_async_rewriter2
      - name: test_autocomplete
      - name: test_browser_repl
      - name: test_browser_runtime_core
      - name: test_browser_runtime_electron
      - name: test_build
      - name: test_cli_repl
      - name: test_e2e_tests
      - name: test_editor
      - name: test_errors
      - name: test_history
      - name: test_i18n
      - name: test_js_multiline_to_singleline
      - name: test_logging
      - name: test_node_runtime_worker_thread
      - name: test_service_provider_core
      - name: test_service_provider_node_driver
      - name: test_shell_api
      - name: test_shell_bson
      - name: test_shell_evaluator
      - name: test_snippet_manager
      - name: test_types
  - name: tests_darwin-m60xe_n20
    display_name: "MacOS 14 arm64 m60xe n20 (Unit tests)"
    run_on: macos-14-arm64
    tags: []
    disable: false
    expansions:
      executable_os_id: darwin-arm64
      mongosh_server_test_version: "6.0.x-enterprise"
      node_js_version: "20.19.5"
      mongosh_skip_node_version_check: ""
    tasks:
      - name: test_arg_parser
      - name: test_async_rewriter2
      - name: test_autocomplete
      - name: test_browser_repl
      - name: test_browser_runtime_core
      - name: test_browser_runtime_electron
      - name: test_build
      - name: test_cli_repl
      - name: test_e2e_tests
      - name: test_editor
      - name: test_errors
      - name: test_history
      - name: test_i18n
      - name: test_js_multiline_to_singleline
      - name: test_logging
      - name: test_node_runtime_worker_thread
      - name: test_service_provider_core
      - name: test_service_provider_node_driver
      - name: test_shell_api
      - name: test_shell_bson
      - name: test_shell_evaluator
      - name: test_snippet_manager
      - name: test_types
  - name: tests_darwin-m70xc_n20
    display_name: "MacOS 14 arm64 m70xc n20 (Unit tests)"
    run_on: macos-14-arm64
    tags: []
    disable: false
    expansions:
      executable_os_id: darwin-arm64
      mongosh_server_test_version: "7.0.x"
      node_js_version: "20.19.5"
      mongosh_skip_node_version_check: ""
    tasks:
      - name: test_arg_parser
      - name: test_async_rewriter2
      - name: test_autocomplete
      - name: test_browser_repl
      - name: test_browser_runtime_core
      - name: test_browser_runtime_electron
      - name: test_build
      - name: test_cli_repl
      - name: test_e2e_tests
      - name: test_editor
      - name: test_errors
      - name: test_history
      - name: test_i18n
      - name: test_js_multiline_to_singleline
      - name: test_logging
      - name: test_node_runtime_worker_thread
      - name: test_service_provider_core
      - name: test_service_provider_node_driver
      - name: test_shell_api
      - name: test_shell_bson
      - name: test_shell_evaluator
      - name: test_snippet_manager
      - name: test_types
  - name: tests_darwin-m70xe_n20
    display_name: "MacOS 14 arm64 m70xe n20 (Unit tests)"
    run_on: macos-14-arm64
    tags: []
    disable: false
    expansions:
      executable_os_id: darwin-arm64
      mongosh_server_test_version: "7.0.x-enterprise"
      node_js_version: "20.19.5"
      mongosh_skip_node_version_check: ""
    tasks:
      - name: test_arg_parser
      - name: test_async_rewriter2
      - name: test_autocomplete
      - name: test_browser_repl
      - name: test_browser_runtime_core
      - name: test_browser_runtime_electron
      - name: test_build
      - name: test_cli_repl
      - name: test_e2e_tests
      - name: test_editor
      - name: test_errors
      - name: test_history
      - name: test_i18n
      - name: test_js_multiline_to_singleline
      - name: test_logging
      - name: test_node_runtime_worker_thread
      - name: test_service_provider_core
      - name: test_service_provider_node_driver
      - name: test_shell_api
      - name: test_shell_bson
      - name: test_shell_evaluator
      - name: test_snippet_manager
      - name: test_types
  - name: tests_darwin-m80xc_n20
    display_name: "MacOS 14 arm64 m80xc n20 (Unit tests)"
    run_on: macos-14-arm64
    tags: []
    disable: false
    expansions:
      executable_os_id: darwin-arm64
      mongosh_server_test_version: "8.0.x"
      node_js_version: "20.19.5"
      mongosh_skip_node_version_check: ""
    tasks:
      - name: test_arg_parser
      - name: test_async_rewriter2
      - name: test_autocomplete
      - name: test_browser_repl
      - name: test_browser_runtime_core
      - name: test_browser_runtime_electron
      - name: test_build
      - name: test_cli_repl
      - name: test_e2e_tests
      - name: test_editor
      - name: test_errors
      - name: test_history
      - name: test_i18n
      - name: test_js_multiline_to_singleline
      - name: test_logging
      - name: test_node_runtime_worker_thread
      - name: test_service_provider_core
      - name: test_service_provider_node_driver
      - name: test_shell_api
      - name: test_shell_bson
      - name: test_shell_evaluator
      - name: test_snippet_manager
      - name: test_types
  - name: tests_darwin-m80xe_n20
    display_name: "MacOS 14 arm64 m80xe n20 (Unit tests)"
    run_on: macos-14-arm64
    tags: []
    disable: false
    expansions:
      executable_os_id: darwin-arm64
      mongosh_server_test_version: "8.0.x-enterprise"
      node_js_version: "20.19.5"
      mongosh_skip_node_version_check: ""
    tasks:
      - name: test_arg_parser
      - name: test_async_rewriter2
      - name: test_autocomplete
      - name: test_browser_repl
      - name: test_browser_runtime_core
      - name: test_browser_runtime_electron
      - name: test_build
      - name: test_cli_repl
      - name: test_e2e_tests
      - name: test_editor
      - name: test_errors
      - name: test_history
      - name: test_i18n
      - name: test_js_multiline_to_singleline
      - name: test_logging
      - name: test_node_runtime_worker_thread
      - name: test_service_provider_core
      - name: test_service_provider_node_driver
      - name: test_shell_api
      - name: test_shell_bson
      - name: test_shell_evaluator
      - name: test_snippet_manager
      - name: test_types
  - name: tests_darwin-m82xc_n20
    display_name: "MacOS 14 arm64 m82xc n20 (Unit tests)"
    run_on: macos-14-arm64
    tags: []
    disable: false
    expansions:
      executable_os_id: darwin-arm64
      mongosh_server_test_version: "8.2.0"
      node_js_version: "20.19.5"
      mongosh_skip_node_version_check: ""
    tasks:
      - name: test_arg_parser
      - name: test_async_rewriter2
      - name: test_autocomplete
      - name: test_browser_repl
      - name: test_browser_runtime_core
      - name: test_browser_runtime_electron
      - name: test_build
      - name: test_cli_repl
      - name: test_e2e_tests
      - name: test_editor
      - name: test_errors
      - name: test_history
      - name: test_i18n
      - name: test_js_multiline_to_singleline
      - name: test_logging
      - name: test_node_runtime_worker_thread
      - name: test_service_provider_core
      - name: test_service_provider_node_driver
      - name: test_shell_api
      - name: test_shell_bson
      - name: test_shell_evaluator
      - name: test_snippet_manager
      - name: test_types
  - name: tests_darwin-m82xe_n20
    display_name: "MacOS 14 arm64 m82xe n20 (Unit tests)"
    run_on: macos-14-arm64
    tags: []
    disable: false
    expansions:
      executable_os_id: darwin-arm64
      mongosh_server_test_version: "8.2.0-enterprise"
      node_js_version: "20.19.5"
      mongosh_skip_node_version_check: ""
    tasks:
      - name: test_arg_parser
      - name: test_async_rewriter2
      - name: test_autocomplete
      - name: test_browser_repl
      - name: test_browser_runtime_core
      - name: test_browser_runtime_electron
      - name: test_build
      - name: test_cli_repl
      - name: test_e2e_tests
      - name: test_editor
      - name: test_errors
      - name: test_history
      - name: test_i18n
      - name: test_js_multiline_to_singleline
      - name: test_logging
      - name: test_node_runtime_worker_thread
      - name: test_service_provider_core
      - name: test_service_provider_node_driver
      - name: test_shell_api
      - name: test_shell_bson
      - name: test_shell_evaluator
      - name: test_snippet_manager
      - name: test_types
  - name: tests_darwin-mlatest_n20
    display_name: "MacOS 14 arm64 mlatest n20 (Unit tests)"
    run_on: macos-14-arm64
    tags: ["mlatest"]
    disable: false
    expansions:
      executable_os_id: darwin-arm64
      mongosh_server_test_version: "latest-alpha-enterprise"
      node_js_version: "20.19.5"
      mongosh_skip_node_version_check: ""
    tasks:
      - name: test_arg_parser
      - name: test_async_rewriter2
      - name: test_autocomplete
      - name: test_browser_repl
      - name: test_browser_runtime_core
      - name: test_browser_runtime_electron
      - name: test_build
      - name: test_cli_repl
      - name: test_e2e_tests
      - name: test_editor
      - name: test_errors
      - name: test_history
      - name: test_i18n
      - name: test_js_multiline_to_singleline
      - name: test_logging
      - name: test_node_runtime_worker_thread
      - name: test_service_provider_core
      - name: test_service_provider_node_driver
      - name: test_shell_api
      - name: test_shell_bson
      - name: test_shell_evaluator
      - name: test_snippet_manager
      - name: test_types
  - name: linux-n20
    display_name: "Ubuntu 20.04 x64 n20 (Unit tests)"
    run_on: ubuntu2004-small
    tags: ["nightly-driver"]
    disable: false
    expansions:
      executable_os_id: darwin-arm64
      mongosh_server_test_version: ""
      node_js_version: "20.19.5"
      mongosh_skip_node_version_check: ""
    tasks:
      - name: test_arg_parser
      - name: test_async_rewriter2
      - name: test_autocomplete
      - name: test_browser_runtime_core
      - name: test_browser_runtime_electron
      - name: test_build
      - name: test_cli_repl
      - name: test_e2e_tests
      - name: test_editor
      - name: test_errors
      - name: test_history
      - name: test_i18n
      - name: test_java_shell
      - name: test_js_multiline_to_singleline
      - name: test_logging
      - name: test_node_runtime_worker_thread
      - name: test_service_provider_core
      - name: test_service_provider_node_driver
      - name: test_shell_api
      - name: test_shell_bson
      - name: test_shell_evaluator
      - name: test_snippet_manager
      - name: test_types
  - name: tests_linux-m42xc_n20
    display_name: "Ubuntu 20.04 x64 m42xc n20 (Unit tests)"
    run_on: ubuntu2004-small
    tags: ["nightly-driver"]
    disable: false
    expansions:
      executable_os_id: darwin-arm64
      mongosh_server_test_version: "4.2.x"
      node_js_version: "20.19.5"
      mongosh_skip_node_version_check: ""
    tasks:
      - name: test_arg_parser
      - name: test_async_rewriter2
      - name: test_autocomplete
      - name: test_browser_runtime_core
      - name: test_browser_runtime_electron
      - name: test_build
      - name: test_cli_repl
      - name: test_e2e_tests
      - name: test_editor
      - name: test_errors
      - name: test_history
      - name: test_i18n
      - name: test_java_shell
      - name: test_js_multiline_to_singleline
      - name: test_logging
      - name: test_node_runtime_worker_thread
      - name: test_service_provider_core
      - name: test_service_provider_node_driver
      - name: test_shell_api
      - name: test_shell_bson
      - name: test_shell_evaluator
      - name: test_snippet_manager
      - name: test_types
  - name: tests_linux-m44xc_n20
    display_name: "Ubuntu 20.04 x64 m44xc n20 (Unit tests)"
    run_on: ubuntu2004-small
    tags: ["nightly-driver"]
    disable: false
    expansions:
      executable_os_id: darwin-arm64
      mongosh_server_test_version: "4.4.x"
      node_js_version: "20.19.5"
      mongosh_skip_node_version_check: ""
    tasks:
      - name: test_arg_parser
      - name: test_async_rewriter2
      - name: test_autocomplete
      - name: test_browser_runtime_core
      - name: test_browser_runtime_electron
      - name: test_build
      - name: test_cli_repl
      - name: test_e2e_tests
      - name: test_editor
      - name: test_errors
      - name: test_history
      - name: test_i18n
      - name: test_java_shell
      - name: test_js_multiline_to_singleline
      - name: test_logging
      - name: test_node_runtime_worker_thread
      - name: test_service_provider_core
      - name: test_service_provider_node_driver
      - name: test_shell_api
      - name: test_shell_bson
      - name: test_shell_evaluator
      - name: test_snippet_manager
      - name: test_types
  - name: tests_linux-m44xe_n20
    display_name: "Ubuntu 20.04 x64 m44xe n20 (Unit tests)"
    run_on: ubuntu2004-small
    tags: ["nightly-driver"]
    disable: false
    expansions:
      executable_os_id: darwin-arm64
      mongosh_server_test_version: "4.4.x-enterprise"
      node_js_version: "20.19.5"
      mongosh_skip_node_version_check: ""
    tasks:
      - name: test_arg_parser
      - name: test_async_rewriter2
      - name: test_autocomplete
      - name: test_browser_runtime_core
      - name: test_browser_runtime_electron
      - name: test_build
      - name: test_cli_repl
      - name: test_e2e_tests
      - name: test_editor
      - name: test_errors
      - name: test_history
      - name: test_i18n
      - name: test_java_shell
      - name: test_js_multiline_to_singleline
      - name: test_logging
      - name: test_node_runtime_worker_thread
      - name: test_service_provider_core
      - name: test_service_provider_node_driver
      - name: test_shell_api
      - name: test_shell_bson
      - name: test_shell_evaluator
      - name: test_snippet_manager
      - name: test_types
  - name: tests_linux-m50xc_n20
    display_name: "Ubuntu 20.04 x64 m50xc n20 (Unit tests)"
    run_on: ubuntu2004-small
    tags: ["nightly-driver"]
    disable: false
    expansions:
      executable_os_id: darwin-arm64
      mongosh_server_test_version: "5.0.x"
      node_js_version: "20.19.5"
      mongosh_skip_node_version_check: ""
    tasks:
      - name: test_arg_parser
      - name: test_async_rewriter2
      - name: test_autocomplete
      - name: test_browser_runtime_core
      - name: test_browser_runtime_electron
      - name: test_build
      - name: test_cli_repl
      - name: test_e2e_tests
      - name: test_editor
      - name: test_errors
      - name: test_history
      - name: test_i18n
      - name: test_java_shell
      - name: test_js_multiline_to_singleline
      - name: test_logging
      - name: test_node_runtime_worker_thread
      - name: test_service_provider_core
      - name: test_service_provider_node_driver
      - name: test_shell_api
      - name: test_shell_bson
      - name: test_shell_evaluator
      - name: test_snippet_manager
      - name: test_types
  - name: tests_linux-m50xe_n20
    display_name: "Ubuntu 20.04 x64 m50xe n20 (Unit tests)"
    run_on: ubuntu2004-small
    tags: ["nightly-driver"]
    disable: false
    expansions:
      executable_os_id: darwin-arm64
      mongosh_server_test_version: "5.0.x-enterprise"
      node_js_version: "20.19.5"
      mongosh_skip_node_version_check: ""
    tasks:
      - name: test_arg_parser
      - name: test_async_rewriter2
      - name: test_autocomplete
      - name: test_browser_runtime_core
      - name: test_browser_runtime_electron
      - name: test_build
      - name: test_cli_repl
      - name: test_e2e_tests
      - name: test_editor
      - name: test_errors
      - name: test_history
      - name: test_i18n
      - name: test_java_shell
      - name: test_js_multiline_to_singleline
      - name: test_logging
      - name: test_node_runtime_worker_thread
      - name: test_service_provider_core
      - name: test_service_provider_node_driver
      - name: test_shell_api
      - name: test_shell_bson
      - name: test_shell_evaluator
      - name: test_snippet_manager
      - name: test_types
  - name: tests_linux-m60xc_n20
    display_name: "Ubuntu 20.04 x64 m60xc n20 (Unit tests)"
    run_on: ubuntu2004-small
    tags: ["nightly-driver"]
    disable: false
    expansions:
      executable_os_id: darwin-arm64
      mongosh_server_test_version: "6.0.x"
      node_js_version: "20.19.5"
      mongosh_skip_node_version_check: ""
    tasks:
      - name: test_arg_parser
      - name: test_async_rewriter2
      - name: test_autocomplete
      - name: test_browser_runtime_core
      - name: test_browser_runtime_electron
      - name: test_build
      - name: test_cli_repl
      - name: test_e2e_tests
      - name: test_editor
      - name: test_errors
      - name: test_history
      - name: test_i18n
      - name: test_java_shell
      - name: test_js_multiline_to_singleline
      - name: test_logging
      - name: test_node_runtime_worker_thread
      - name: test_service_provider_core
      - name: test_service_provider_node_driver
      - name: test_shell_api
      - name: test_shell_bson
      - name: test_shell_evaluator
      - name: test_snippet_manager
      - name: test_types
  - name: tests_linux-m60xe_n20
    display_name: "Ubuntu 20.04 x64 m60xe n20 (Unit tests)"
    run_on: ubuntu2004-small
    tags: ["nightly-driver"]
    disable: false
    expansions:
      executable_os_id: darwin-arm64
      mongosh_server_test_version: "6.0.x-enterprise"
      node_js_version: "20.19.5"
      mongosh_skip_node_version_check: ""
    tasks:
      - name: test_arg_parser
      - name: test_async_rewriter2
      - name: test_autocomplete
      - name: test_browser_runtime_core
      - name: test_browser_runtime_electron
      - name: test_build
      - name: test_cli_repl
      - name: test_e2e_tests
      - name: test_editor
      - name: test_errors
      - name: test_history
      - name: test_i18n
      - name: test_java_shell
      - name: test_js_multiline_to_singleline
      - name: test_logging
      - name: test_node_runtime_worker_thread
      - name: test_service_provider_core
      - name: test_service_provider_node_driver
      - name: test_shell_api
      - name: test_shell_bson
      - name: test_shell_evaluator
      - name: test_snippet_manager
      - name: test_types
  - name: tests_linux-m70xc_n20
    display_name: "Ubuntu 20.04 x64 m70xc n20 (Unit tests)"
    run_on: ubuntu2004-small
    tags: ["nightly-driver"]
    disable: false
    expansions:
      executable_os_id: darwin-arm64
      mongosh_server_test_version: "7.0.x"
      node_js_version: "20.19.5"
      mongosh_skip_node_version_check: ""
    tasks:
      - name: test_arg_parser
      - name: test_async_rewriter2
      - name: test_autocomplete
      - name: test_browser_runtime_core
      - name: test_browser_runtime_electron
      - name: test_build
      - name: test_cli_repl
      - name: test_e2e_tests
      - name: test_editor
      - name: test_errors
      - name: test_history
      - name: test_i18n
      - name: test_java_shell
      - name: test_js_multiline_to_singleline
      - name: test_logging
      - name: test_node_runtime_worker_thread
      - name: test_service_provider_core
      - name: test_service_provider_node_driver
      - name: test_shell_api
      - name: test_shell_bson
      - name: test_shell_evaluator
      - name: test_snippet_manager
      - name: test_types
  - name: tests_linux-m70xe_n20
    display_name: "Ubuntu 20.04 x64 m70xe n20 (Unit tests)"
    run_on: ubuntu2004-small
    tags: ["nightly-driver"]
    disable: false
    expansions:
      executable_os_id: darwin-arm64
      mongosh_server_test_version: "7.0.x-enterprise"
      node_js_version: "20.19.5"
      mongosh_skip_node_version_check: ""
    tasks:
      - name: test_arg_parser
      - name: test_async_rewriter2
      - name: test_autocomplete
      - name: test_browser_runtime_core
      - name: test_browser_runtime_electron
      - name: test_build
      - name: test_cli_repl
      - name: test_e2e_tests
      - name: test_editor
      - name: test_errors
      - name: test_history
      - name: test_i18n
      - name: test_java_shell
      - name: test_js_multiline_to_singleline
      - name: test_logging
      - name: test_node_runtime_worker_thread
      - name: test_service_provider_core
      - name: test_service_provider_node_driver
      - name: test_shell_api
      - name: test_shell_bson
      - name: test_shell_evaluator
      - name: test_snippet_manager
      - name: test_types
  - name: tests_linux-m80xc_n20
    display_name: "Ubuntu 20.04 x64 m80xc n20 (Unit tests)"
    run_on: ubuntu2004-small
    tags: ["nightly-driver"]
    disable: false
    expansions:
      executable_os_id: darwin-arm64
      mongosh_server_test_version: "8.0.x"
      node_js_version: "20.19.5"
      mongosh_skip_node_version_check: ""
    tasks:
      - name: test_arg_parser
      - name: test_async_rewriter2
      - name: test_autocomplete
      - name: test_browser_runtime_core
      - name: test_browser_runtime_electron
      - name: test_build
      - name: test_cli_repl
      - name: test_e2e_tests
      - name: test_editor
      - name: test_errors
      - name: test_history
      - name: test_i18n
      - name: test_java_shell
      - name: test_js_multiline_to_singleline
      - name: test_logging
      - name: test_node_runtime_worker_thread
      - name: test_service_provider_core
      - name: test_service_provider_node_driver
      - name: test_shell_api
      - name: test_shell_bson
      - name: test_shell_evaluator
      - name: test_snippet_manager
      - name: test_types
  - name: tests_linux-m80xe_n20
    display_name: "Ubuntu 20.04 x64 m80xe n20 (Unit tests)"
    run_on: ubuntu2004-small
    tags: ["nightly-driver"]
    disable: false
    expansions:
      executable_os_id: darwin-arm64
      mongosh_server_test_version: "8.0.x-enterprise"
      node_js_version: "20.19.5"
      mongosh_skip_node_version_check: ""
    tasks:
      - name: test_arg_parser
      - name: test_async_rewriter2
      - name: test_autocomplete
      - name: test_browser_runtime_core
      - name: test_browser_runtime_electron
      - name: test_build
      - name: test_cli_repl
      - name: test_e2e_tests
      - name: test_editor
      - name: test_errors
      - name: test_history
      - name: test_i18n
      - name: test_java_shell
      - name: test_js_multiline_to_singleline
      - name: test_logging
      - name: test_node_runtime_worker_thread
      - name: test_service_provider_core
      - name: test_service_provider_node_driver
      - name: test_shell_api
      - name: test_shell_bson
      - name: test_shell_evaluator
      - name: test_snippet_manager
      - name: test_types
  - name: tests_linux-m82xc_n20
    display_name: "Ubuntu 20.04 x64 m82xc n20 (Unit tests)"
    run_on: ubuntu2004-small
    tags: ["nightly-driver"]
    disable: false
    expansions:
      executable_os_id: darwin-arm64
      mongosh_server_test_version: "8.2.0"
      node_js_version: "20.19.5"
      mongosh_skip_node_version_check: ""
    tasks:
      - name: test_arg_parser
      - name: test_async_rewriter2
      - name: test_autocomplete
      - name: test_browser_runtime_core
      - name: test_browser_runtime_electron
      - name: test_build
      - name: test_cli_repl
      - name: test_e2e_tests
      - name: test_editor
      - name: test_errors
      - name: test_history
      - name: test_i18n
      - name: test_java_shell
      - name: test_js_multiline_to_singleline
      - name: test_logging
      - name: test_node_runtime_worker_thread
      - name: test_service_provider_core
      - name: test_service_provider_node_driver
      - name: test_shell_api
      - name: test_shell_bson
      - name: test_shell_evaluator
      - name: test_snippet_manager
      - name: test_types
  - name: tests_linux-m82xe_n20
    display_name: "Ubuntu 20.04 x64 m82xe n20 (Unit tests)"
    run_on: ubuntu2004-small
    tags: ["nightly-driver"]
    disable: false
    expansions:
      executable_os_id: darwin-arm64
      mongosh_server_test_version: "8.2.0-enterprise"
      node_js_version: "20.19.5"
      mongosh_skip_node_version_check: ""
    tasks:
      - name: test_arg_parser
      - name: test_async_rewriter2
      - name: test_autocomplete
      - name: test_browser_runtime_core
      - name: test_browser_runtime_electron
      - name: test_build
      - name: test_cli_repl
      - name: test_e2e_tests
      - name: test_editor
      - name: test_errors
      - name: test_history
      - name: test_i18n
      - name: test_java_shell
      - name: test_js_multiline_to_singleline
      - name: test_logging
      - name: test_node_runtime_worker_thread
      - name: test_service_provider_core
      - name: test_service_provider_node_driver
      - name: test_shell_api
      - name: test_shell_bson
      - name: test_shell_evaluator
      - name: test_snippet_manager
      - name: test_types
  - name: tests_linux-mlatest_n20
    display_name: "Ubuntu 20.04 x64 mlatest n20 (Unit tests)"
    run_on: ubuntu2004-small
    tags: ["nightly-driver","mlatest"]
    disable: false
    expansions:
      executable_os_id: darwin-arm64
      mongosh_server_test_version: "latest-alpha-enterprise"
      node_js_version: "20.19.5"
      mongosh_skip_node_version_check: ""
    tasks:
      - name: test_arg_parser
      - name: test_async_rewriter2
      - name: test_autocomplete
      - name: test_browser_runtime_core
      - name: test_browser_runtime_electron
      - name: test_build
      - name: test_cli_repl
      - name: test_e2e_tests
      - name: test_editor
      - name: test_errors
      - name: test_history
      - name: test_i18n
      - name: test_java_shell
      - name: test_js_multiline_to_singleline
      - name: test_logging
      - name: test_node_runtime_worker_thread
      - name: test_service_provider_core
      - name: test_service_provider_node_driver
      - name: test_shell_api
      - name: test_shell_bson
      - name: test_shell_evaluator
      - name: test_snippet_manager
      - name: test_types
  - name: win32-n20
    display_name: "Windows n20 (Unit tests)"
    run_on: windows-vsCurrent-small
    tags: []
    disable: false
    expansions:
      executable_os_id: win32
      mongosh_server_test_version: ""
      node_js_version: "20.19.5"
      mongosh_skip_node_version_check: ""
    tasks:
      - name: test_arg_parser
      - name: test_async_rewriter2
      - name: test_autocomplete
      - name: test_browser_runtime_core
      - name: test_browser_runtime_electron
      - name: test_build
      - name: test_cli_repl
      - name: test_e2e_tests
      - name: test_editor
      - name: test_errors
      - name: test_history
      - name: test_i18n
      - name: test_js_multiline_to_singleline
      - name: test_logging
      - name: test_node_runtime_worker_thread
      - name: test_service_provider_core
      - name: test_service_provider_node_driver
      - name: test_shell_api
      - name: test_shell_bson
      - name: test_shell_evaluator
      - name: test_snippet_manager
      - name: test_types
  - name: tests_win32-m42xc_n20
    display_name: "Windows m42xc n20 (Unit tests)"
    run_on: windows-vsCurrent-small
    tags: []
    disable: false
    expansions:
      executable_os_id: win32
      mongosh_server_test_version: "4.2.x"
      node_js_version: "20.19.5"
      mongosh_skip_node_version_check: ""
    tasks:
      - name: test_arg_parser
      - name: test_async_rewriter2
      - name: test_autocomplete
      - name: test_browser_runtime_core
      - name: test_browser_runtime_electron
      - name: test_build
      - name: test_cli_repl
      - name: test_e2e_tests
      - name: test_editor
      - name: test_errors
      - name: test_history
      - name: test_i18n
      - name: test_js_multiline_to_singleline
      - name: test_logging
      - name: test_node_runtime_worker_thread
      - name: test_service_provider_core
      - name: test_service_provider_node_driver
      - name: test_shell_api
      - name: test_shell_bson
      - name: test_shell_evaluator
      - name: test_snippet_manager
      - name: test_types
  - name: tests_win32-m42xe_n20
    display_name: "Windows m42xe n20 (Unit tests)"
    run_on: windows-vsCurrent-small
    tags: []
    disable: false
    expansions:
      executable_os_id: win32
      mongosh_server_test_version: "4.2.x-enterprise"
      node_js_version: "20.19.5"
      mongosh_skip_node_version_check: ""
    tasks:
      - name: test_arg_parser
      - name: test_async_rewriter2
      - name: test_autocomplete
      - name: test_browser_runtime_core
      - name: test_browser_runtime_electron
      - name: test_build
      - name: test_cli_repl
      - name: test_e2e_tests
      - name: test_editor
      - name: test_errors
      - name: test_history
      - name: test_i18n
      - name: test_js_multiline_to_singleline
      - name: test_logging
      - name: test_node_runtime_worker_thread
      - name: test_service_provider_core
      - name: test_service_provider_node_driver
      - name: test_shell_api
      - name: test_shell_bson
      - name: test_shell_evaluator
      - name: test_snippet_manager
      - name: test_types
  - name: tests_win32-m44xc_n20
    display_name: "Windows m44xc n20 (Unit tests)"
    run_on: windows-vsCurrent-small
    tags: []
    disable: false
    expansions:
      executable_os_id: win32
      mongosh_server_test_version: "4.4.x"
      node_js_version: "20.19.5"
      mongosh_skip_node_version_check: ""
    tasks:
      - name: test_arg_parser
      - name: test_async_rewriter2
      - name: test_autocomplete
      - name: test_browser_runtime_core
      - name: test_browser_runtime_electron
      - name: test_build
      - name: test_cli_repl
      - name: test_e2e_tests
      - name: test_editor
      - name: test_errors
      - name: test_history
      - name: test_i18n
      - name: test_js_multiline_to_singleline
      - name: test_logging
      - name: test_node_runtime_worker_thread
      - name: test_service_provider_core
      - name: test_service_provider_node_driver
      - name: test_shell_api
      - name: test_shell_bson
      - name: test_shell_evaluator
      - name: test_snippet_manager
      - name: test_types
  - name: tests_win32-m44xe_n20
    display_name: "Windows m44xe n20 (Unit tests)"
    run_on: windows-vsCurrent-small
    tags: []
    disable: false
    expansions:
      executable_os_id: win32
      mongosh_server_test_version: "4.4.x-enterprise"
      node_js_version: "20.19.5"
      mongosh_skip_node_version_check: ""
    tasks:
      - name: test_arg_parser
      - name: test_async_rewriter2
      - name: test_autocomplete
      - name: test_browser_runtime_core
      - name: test_browser_runtime_electron
      - name: test_build
      - name: test_cli_repl
      - name: test_e2e_tests
      - name: test_editor
      - name: test_errors
      - name: test_history
      - name: test_i18n
      - name: test_js_multiline_to_singleline
      - name: test_logging
      - name: test_node_runtime_worker_thread
      - name: test_service_provider_core
      - name: test_service_provider_node_driver
      - name: test_shell_api
      - name: test_shell_bson
      - name: test_shell_evaluator
      - name: test_snippet_manager
      - name: test_types
  - name: tests_win32-m50xc_n20
    display_name: "Windows m50xc n20 (Unit tests)"
    run_on: windows-vsCurrent-small
    tags: []
    disable: false
    expansions:
      executable_os_id: win32
      mongosh_server_test_version: "5.0.x"
      node_js_version: "20.19.5"
      mongosh_skip_node_version_check: ""
    tasks:
      - name: test_arg_parser
      - name: test_async_rewriter2
      - name: test_autocomplete
      - name: test_browser_runtime_core
      - name: test_browser_runtime_electron
      - name: test_build
      - name: test_cli_repl
      - name: test_e2e_tests
      - name: test_editor
      - name: test_errors
      - name: test_history
      - name: test_i18n
      - name: test_js_multiline_to_singleline
      - name: test_logging
      - name: test_node_runtime_worker_thread
      - name: test_service_provider_core
      - name: test_service_provider_node_driver
      - name: test_shell_api
      - name: test_shell_bson
      - name: test_shell_evaluator
      - name: test_snippet_manager
      - name: test_types
  - name: tests_win32-m50xe_n20
    display_name: "Windows m50xe n20 (Unit tests)"
    run_on: windows-vsCurrent-small
    tags: []
    disable: false
    expansions:
      executable_os_id: win32
      mongosh_server_test_version: "5.0.x-enterprise"
      node_js_version: "20.19.5"
      mongosh_skip_node_version_check: ""
    tasks:
      - name: test_arg_parser
      - name: test_async_rewriter2
      - name: test_autocomplete
      - name: test_browser_runtime_core
      - name: test_browser_runtime_electron
      - name: test_build
      - name: test_cli_repl
      - name: test_e2e_tests
      - name: test_editor
      - name: test_errors
      - name: test_history
      - name: test_i18n
      - name: test_js_multiline_to_singleline
      - name: test_logging
      - name: test_node_runtime_worker_thread
      - name: test_service_provider_core
      - name: test_service_provider_node_driver
      - name: test_shell_api
      - name: test_shell_bson
      - name: test_shell_evaluator
      - name: test_snippet_manager
      - name: test_types
  - name: tests_win32-m60xc_n20
    display_name: "Windows m60xc n20 (Unit tests)"
    run_on: windows-vsCurrent-small
    tags: []
    disable: false
    expansions:
      executable_os_id: win32
      mongosh_server_test_version: "6.0.x"
      node_js_version: "20.19.5"
      mongosh_skip_node_version_check: ""
    tasks:
      - name: test_arg_parser
      - name: test_async_rewriter2
      - name: test_autocomplete
      - name: test_browser_runtime_core
      - name: test_browser_runtime_electron
      - name: test_build
      - name: test_cli_repl
      - name: test_e2e_tests
      - name: test_editor
      - name: test_errors
      - name: test_history
      - name: test_i18n
      - name: test_js_multiline_to_singleline
      - name: test_logging
      - name: test_node_runtime_worker_thread
      - name: test_service_provider_core
      - name: test_service_provider_node_driver
      - name: test_shell_api
      - name: test_shell_bson
      - name: test_shell_evaluator
      - name: test_snippet_manager
      - name: test_types
  - name: tests_win32-m60xe_n20
    display_name: "Windows m60xe n20 (Unit tests)"
    run_on: windows-vsCurrent-small
    tags: []
    disable: false
    expansions:
      executable_os_id: win32
      mongosh_server_test_version: "6.0.x-enterprise"
      node_js_version: "20.19.5"
      mongosh_skip_node_version_check: ""
    tasks:
      - name: test_arg_parser
      - name: test_async_rewriter2
      - name: test_autocomplete
      - name: test_browser_runtime_core
      - name: test_browser_runtime_electron
      - name: test_build
      - name: test_cli_repl
      - name: test_e2e_tests
      - name: test_editor
      - name: test_errors
      - name: test_history
      - name: test_i18n
      - name: test_js_multiline_to_singleline
      - name: test_logging
      - name: test_node_runtime_worker_thread
      - name: test_service_provider_core
      - name: test_service_provider_node_driver
      - name: test_shell_api
      - name: test_shell_bson
      - name: test_shell_evaluator
      - name: test_snippet_manager
      - name: test_types
  - name: tests_win32-m70xc_n20
    display_name: "Windows m70xc n20 (Unit tests)"
    run_on: windows-vsCurrent-small
    tags: []
    disable: false
    expansions:
      executable_os_id: win32
      mongosh_server_test_version: "7.0.x"
      node_js_version: "20.19.5"
      mongosh_skip_node_version_check: ""
    tasks:
      - name: test_arg_parser
      - name: test_async_rewriter2
      - name: test_autocomplete
      - name: test_browser_runtime_core
      - name: test_browser_runtime_electron
      - name: test_build
      - name: test_cli_repl
      - name: test_e2e_tests
      - name: test_editor
      - name: test_errors
      - name: test_history
      - name: test_i18n
      - name: test_js_multiline_to_singleline
      - name: test_logging
      - name: test_node_runtime_worker_thread
      - name: test_service_provider_core
      - name: test_service_provider_node_driver
      - name: test_shell_api
      - name: test_shell_bson
      - name: test_shell_evaluator
      - name: test_snippet_manager
      - name: test_types
  - name: tests_win32-m70xe_n20
    display_name: "Windows m70xe n20 (Unit tests)"
    run_on: windows-vsCurrent-small
    tags: []
    disable: false
    expansions:
      executable_os_id: win32
      mongosh_server_test_version: "7.0.x-enterprise"
      node_js_version: "20.19.5"
      mongosh_skip_node_version_check: ""
    tasks:
      - name: test_arg_parser
      - name: test_async_rewriter2
      - name: test_autocomplete
      - name: test_browser_runtime_core
      - name: test_browser_runtime_electron
      - name: test_build
      - name: test_cli_repl
      - name: test_e2e_tests
      - name: test_editor
      - name: test_errors
      - name: test_history
      - name: test_i18n
      - name: test_js_multiline_to_singleline
      - name: test_logging
      - name: test_node_runtime_worker_thread
      - name: test_service_provider_core
      - name: test_service_provider_node_driver
      - name: test_shell_api
      - name: test_shell_bson
      - name: test_shell_evaluator
      - name: test_snippet_manager
      - name: test_types
  - name: tests_win32-m80xc_n20
    display_name: "Windows m80xc n20 (Unit tests)"
    run_on: windows-vsCurrent-small
    tags: []
    disable: false
    expansions:
      executable_os_id: win32
      mongosh_server_test_version: "8.0.x"
      node_js_version: "20.19.5"
      mongosh_skip_node_version_check: ""
    tasks:
      - name: test_arg_parser
      - name: test_async_rewriter2
      - name: test_autocomplete
      - name: test_browser_runtime_core
      - name: test_browser_runtime_electron
      - name: test_build
      - name: test_cli_repl
      - name: test_e2e_tests
      - name: test_editor
      - name: test_errors
      - name: test_history
      - name: test_i18n
      - name: test_js_multiline_to_singleline
      - name: test_logging
      - name: test_node_runtime_worker_thread
      - name: test_service_provider_core
      - name: test_service_provider_node_driver
      - name: test_shell_api
      - name: test_shell_bson
      - name: test_shell_evaluator
      - name: test_snippet_manager
      - name: test_types
  - name: tests_win32-m80xe_n20
    display_name: "Windows m80xe n20 (Unit tests)"
    run_on: windows-vsCurrent-small
    tags: []
    disable: false
    expansions:
      executable_os_id: win32
      mongosh_server_test_version: "8.0.x-enterprise"
      node_js_version: "20.19.5"
      mongosh_skip_node_version_check: ""
    tasks:
      - name: test_arg_parser
      - name: test_async_rewriter2
      - name: test_autocomplete
      - name: test_browser_runtime_core
      - name: test_browser_runtime_electron
      - name: test_build
      - name: test_cli_repl
      - name: test_e2e_tests
      - name: test_editor
      - name: test_errors
      - name: test_history
      - name: test_i18n
      - name: test_js_multiline_to_singleline
      - name: test_logging
      - name: test_node_runtime_worker_thread
      - name: test_service_provider_core
      - name: test_service_provider_node_driver
      - name: test_shell_api
      - name: test_shell_bson
      - name: test_shell_evaluator
      - name: test_snippet_manager
      - name: test_types
  - name: tests_win32-m82xc_n20
    display_name: "Windows m82xc n20 (Unit tests)"
    run_on: windows-vsCurrent-small
    tags: []
    disable: false
    expansions:
      executable_os_id: win32
      mongosh_server_test_version: "8.2.0"
      node_js_version: "20.19.5"
      mongosh_skip_node_version_check: ""
    tasks:
      - name: test_arg_parser
      - name: test_async_rewriter2
      - name: test_autocomplete
      - name: test_browser_runtime_core
      - name: test_browser_runtime_electron
      - name: test_build
      - name: test_cli_repl
      - name: test_e2e_tests
      - name: test_editor
      - name: test_errors
      - name: test_history
      - name: test_i18n
      - name: test_js_multiline_to_singleline
      - name: test_logging
      - name: test_node_runtime_worker_thread
      - name: test_service_provider_core
      - name: test_service_provider_node_driver
      - name: test_shell_api
      - name: test_shell_bson
      - name: test_shell_evaluator
      - name: test_snippet_manager
      - name: test_types
  - name: tests_win32-m82xe_n20
    display_name: "Windows m82xe n20 (Unit tests)"
    run_on: windows-vsCurrent-small
    tags: []
    disable: false
    expansions:
      executable_os_id: win32
      mongosh_server_test_version: "8.2.0-enterprise"
      node_js_version: "20.19.5"
      mongosh_skip_node_version_check: ""
    tasks:
      - name: test_arg_parser
      - name: test_async_rewriter2
      - name: test_autocomplete
      - name: test_browser_runtime_core
      - name: test_browser_runtime_electron
      - name: test_build
      - name: test_cli_repl
      - name: test_e2e_tests
      - name: test_editor
      - name: test_errors
      - name: test_history
      - name: test_i18n
      - name: test_js_multiline_to_singleline
      - name: test_logging
      - name: test_node_runtime_worker_thread
      - name: test_service_provider_core
      - name: test_service_provider_node_driver
      - name: test_shell_api
      - name: test_shell_bson
      - name: test_shell_evaluator
      - name: test_snippet_manager
      - name: test_types
  - name: tests_win32-mlatest_n20
    display_name: "Windows mlatest n20 (Unit tests)"
    run_on: windows-vsCurrent-small
    tags: ["mlatest"]
    disable: false
    expansions:
      executable_os_id: win32
      mongosh_server_test_version: "latest-alpha-enterprise"
      node_js_version: "20.19.5"
      mongosh_skip_node_version_check: ""
    tasks:
      - name: test_arg_parser
      - name: test_async_rewriter2
      - name: test_autocomplete
      - name: test_browser_runtime_core
      - name: test_browser_runtime_electron
      - name: test_build
      - name: test_cli_repl
      - name: test_e2e_tests
      - name: test_editor
      - name: test_errors
      - name: test_history
      - name: test_i18n
      - name: test_js_multiline_to_singleline
      - name: test_logging
      - name: test_node_runtime_worker_thread
      - name: test_service_provider_core
      - name: test_service_provider_node_driver
      - name: test_shell_api
      - name: test_shell_bson
      - name: test_shell_evaluator
      - name: test_snippet_manager
      - name: test_types
  - name: darwin-n24
    display_name: "MacOS 14 arm64 n24 (Unit tests)"
    run_on: macos-14-arm64
    tags: []
    disable: true
    expansions:
      executable_os_id: darwin-arm64
      mongosh_server_test_version: ""
      node_js_version: "24.11.1"
      mongosh_skip_node_version_check: ""
    tasks:
      - name: test_arg_parser
      - name: test_async_rewriter2
      - name: test_autocomplete
      - name: test_browser_repl
      - name: test_browser_runtime_core
      - name: test_browser_runtime_electron
      - name: test_build
      - name: test_cli_repl
      - name: test_e2e_tests
      - name: test_editor
      - name: test_errors
      - name: test_history
      - name: test_i18n
      - name: test_js_multiline_to_singleline
      - name: test_logging
      - name: test_node_runtime_worker_thread
      - name: test_service_provider_core
      - name: test_service_provider_node_driver
      - name: test_shell_api
      - name: test_shell_bson
      - name: test_shell_evaluator
      - name: test_snippet_manager
      - name: test_types
  - name: tests_darwin-m60xc_n24
    display_name: "MacOS 14 arm64 m60xc n24 (Unit tests)"
    run_on: macos-14-arm64
    tags: []
    disable: true
    expansions:
      executable_os_id: darwin-arm64
      mongosh_server_test_version: "6.0.x"
      node_js_version: "24.11.1"
      mongosh_skip_node_version_check: ""
    tasks:
      - name: test_arg_parser
      - name: test_async_rewriter2
      - name: test_autocomplete
      - name: test_browser_repl
      - name: test_browser_runtime_core
      - name: test_browser_runtime_electron
      - name: test_build
      - name: test_cli_repl
      - name: test_e2e_tests
      - name: test_editor
      - name: test_errors
      - name: test_history
      - name: test_i18n
      - name: test_js_multiline_to_singleline
      - name: test_logging
      - name: test_node_runtime_worker_thread
      - name: test_service_provider_core
      - name: test_service_provider_node_driver
      - name: test_shell_api
      - name: test_shell_bson
      - name: test_shell_evaluator
      - name: test_snippet_manager
      - name: test_types
  - name: tests_darwin-m60xe_n24
    display_name: "MacOS 14 arm64 m60xe n24 (Unit tests)"
    run_on: macos-14-arm64
    tags: []
    disable: true
    expansions:
      executable_os_id: darwin-arm64
      mongosh_server_test_version: "6.0.x-enterprise"
      node_js_version: "24.11.1"
      mongosh_skip_node_version_check: ""
    tasks:
      - name: test_arg_parser
      - name: test_async_rewriter2
      - name: test_autocomplete
      - name: test_browser_repl
      - name: test_browser_runtime_core
      - name: test_browser_runtime_electron
      - name: test_build
      - name: test_cli_repl
      - name: test_e2e_tests
      - name: test_editor
      - name: test_errors
      - name: test_history
      - name: test_i18n
      - name: test_js_multiline_to_singleline
      - name: test_logging
      - name: test_node_runtime_worker_thread
      - name: test_service_provider_core
      - name: test_service_provider_node_driver
      - name: test_shell_api
      - name: test_shell_bson
      - name: test_shell_evaluator
      - name: test_snippet_manager
      - name: test_types
  - name: tests_darwin-m70xc_n24
    display_name: "MacOS 14 arm64 m70xc n24 (Unit tests)"
    run_on: macos-14-arm64
    tags: []
    disable: true
    expansions:
      executable_os_id: darwin-arm64
      mongosh_server_test_version: "7.0.x"
      node_js_version: "24.11.1"
      mongosh_skip_node_version_check: ""
    tasks:
      - name: test_arg_parser
      - name: test_async_rewriter2
      - name: test_autocomplete
      - name: test_browser_repl
      - name: test_browser_runtime_core
      - name: test_browser_runtime_electron
      - name: test_build
      - name: test_cli_repl
      - name: test_e2e_tests
      - name: test_editor
      - name: test_errors
      - name: test_history
      - name: test_i18n
      - name: test_js_multiline_to_singleline
      - name: test_logging
      - name: test_node_runtime_worker_thread
      - name: test_service_provider_core
      - name: test_service_provider_node_driver
      - name: test_shell_api
      - name: test_shell_bson
      - name: test_shell_evaluator
      - name: test_snippet_manager
      - name: test_types
  - name: tests_darwin-m70xe_n24
    display_name: "MacOS 14 arm64 m70xe n24 (Unit tests)"
    run_on: macos-14-arm64
    tags: []
    disable: true
    expansions:
      executable_os_id: darwin-arm64
      mongosh_server_test_version: "7.0.x-enterprise"
      node_js_version: "24.11.1"
      mongosh_skip_node_version_check: ""
    tasks:
      - name: test_arg_parser
      - name: test_async_rewriter2
      - name: test_autocomplete
      - name: test_browser_repl
      - name: test_browser_runtime_core
      - name: test_browser_runtime_electron
      - name: test_build
      - name: test_cli_repl
      - name: test_e2e_tests
      - name: test_editor
      - name: test_errors
      - name: test_history
      - name: test_i18n
      - name: test_js_multiline_to_singleline
      - name: test_logging
      - name: test_node_runtime_worker_thread
      - name: test_service_provider_core
      - name: test_service_provider_node_driver
      - name: test_shell_api
      - name: test_shell_bson
      - name: test_shell_evaluator
      - name: test_snippet_manager
      - name: test_types
  - name: tests_darwin-m80xc_n24
    display_name: "MacOS 14 arm64 m80xc n24 (Unit tests)"
    run_on: macos-14-arm64
    tags: []
    disable: true
    expansions:
      executable_os_id: darwin-arm64
      mongosh_server_test_version: "8.0.x"
      node_js_version: "24.11.1"
      mongosh_skip_node_version_check: ""
    tasks:
      - name: test_arg_parser
      - name: test_async_rewriter2
      - name: test_autocomplete
      - name: test_browser_repl
      - name: test_browser_runtime_core
      - name: test_browser_runtime_electron
      - name: test_build
      - name: test_cli_repl
      - name: test_e2e_tests
      - name: test_editor
      - name: test_errors
      - name: test_history
      - name: test_i18n
      - name: test_js_multiline_to_singleline
      - name: test_logging
      - name: test_node_runtime_worker_thread
      - name: test_service_provider_core
      - name: test_service_provider_node_driver
      - name: test_shell_api
      - name: test_shell_bson
      - name: test_shell_evaluator
      - name: test_snippet_manager
      - name: test_types
  - name: tests_darwin-m80xe_n24
    display_name: "MacOS 14 arm64 m80xe n24 (Unit tests)"
    run_on: macos-14-arm64
    tags: []
    disable: true
    expansions:
      executable_os_id: darwin-arm64
      mongosh_server_test_version: "8.0.x-enterprise"
      node_js_version: "24.11.1"
      mongosh_skip_node_version_check: ""
    tasks:
      - name: test_arg_parser
      - name: test_async_rewriter2
      - name: test_autocomplete
      - name: test_browser_repl
      - name: test_browser_runtime_core
      - name: test_browser_runtime_electron
      - name: test_build
      - name: test_cli_repl
      - name: test_e2e_tests
      - name: test_editor
      - name: test_errors
      - name: test_history
      - name: test_i18n
      - name: test_js_multiline_to_singleline
      - name: test_logging
      - name: test_node_runtime_worker_thread
      - name: test_service_provider_core
      - name: test_service_provider_node_driver
      - name: test_shell_api
      - name: test_shell_bson
      - name: test_shell_evaluator
      - name: test_snippet_manager
      - name: test_types
  - name: tests_darwin-m82xc_n24
    display_name: "MacOS 14 arm64 m82xc n24 (Unit tests)"
    run_on: macos-14-arm64
    tags: []
    disable: true
    expansions:
      executable_os_id: darwin-arm64
      mongosh_server_test_version: "8.2.0"
      node_js_version: "24.11.1"
      mongosh_skip_node_version_check: ""
    tasks:
      - name: test_arg_parser
      - name: test_async_rewriter2
      - name: test_autocomplete
      - name: test_browser_repl
      - name: test_browser_runtime_core
      - name: test_browser_runtime_electron
      - name: test_build
      - name: test_cli_repl
      - name: test_e2e_tests
      - name: test_editor
      - name: test_errors
      - name: test_history
      - name: test_i18n
      - name: test_js_multiline_to_singleline
      - name: test_logging
      - name: test_node_runtime_worker_thread
      - name: test_service_provider_core
      - name: test_service_provider_node_driver
      - name: test_shell_api
      - name: test_shell_bson
      - name: test_shell_evaluator
      - name: test_snippet_manager
      - name: test_types
  - name: tests_darwin-m82xe_n24
    display_name: "MacOS 14 arm64 m82xe n24 (Unit tests)"
    run_on: macos-14-arm64
    tags: []
    disable: true
    expansions:
      executable_os_id: darwin-arm64
      mongosh_server_test_version: "8.2.0-enterprise"
      node_js_version: "24.11.1"
      mongosh_skip_node_version_check: ""
    tasks:
      - name: test_arg_parser
      - name: test_async_rewriter2
      - name: test_autocomplete
      - name: test_browser_repl
      - name: test_browser_runtime_core
      - name: test_browser_runtime_electron
      - name: test_build
      - name: test_cli_repl
      - name: test_e2e_tests
      - name: test_editor
      - name: test_errors
      - name: test_history
      - name: test_i18n
      - name: test_js_multiline_to_singleline
      - name: test_logging
      - name: test_node_runtime_worker_thread
      - name: test_service_provider_core
      - name: test_service_provider_node_driver
      - name: test_shell_api
      - name: test_shell_bson
      - name: test_shell_evaluator
      - name: test_snippet_manager
      - name: test_types
  - name: tests_darwin-mlatest_n24
    display_name: "MacOS 14 arm64 mlatest n24 (Unit tests)"
    run_on: macos-14-arm64
    tags: ["mlatest"]
    disable: true
    expansions:
      executable_os_id: darwin-arm64
      mongosh_server_test_version: "latest-alpha-enterprise"
      node_js_version: "24.11.1"
      mongosh_skip_node_version_check: ""
    tasks:
      - name: test_arg_parser
      - name: test_async_rewriter2
      - name: test_autocomplete
      - name: test_browser_repl
      - name: test_browser_runtime_core
      - name: test_browser_runtime_electron
      - name: test_build
      - name: test_cli_repl
      - name: test_e2e_tests
      - name: test_editor
      - name: test_errors
      - name: test_history
      - name: test_i18n
      - name: test_js_multiline_to_singleline
      - name: test_logging
      - name: test_node_runtime_worker_thread
      - name: test_service_provider_core
      - name: test_service_provider_node_driver
      - name: test_shell_api
      - name: test_shell_bson
      - name: test_shell_evaluator
      - name: test_snippet_manager
      - name: test_types
  - name: linux-n24
    display_name: "Ubuntu 20.04 x64 n24 (Unit tests)"
    run_on: ubuntu2004-small
    tags: ["nightly-driver"]
    disable: true
    expansions:
      executable_os_id: darwin-arm64
      mongosh_server_test_version: ""
      node_js_version: "24.11.1"
      mongosh_skip_node_version_check: ""
    tasks:
      - name: test_arg_parser
      - name: test_async_rewriter2
      - name: test_autocomplete
      - name: test_browser_runtime_core
      - name: test_browser_runtime_electron
      - name: test_build
      - name: test_cli_repl
      - name: test_e2e_tests
      - name: test_editor
      - name: test_errors
      - name: test_history
      - name: test_i18n
      - name: test_java_shell
      - name: test_js_multiline_to_singleline
      - name: test_logging
      - name: test_node_runtime_worker_thread
      - name: test_service_provider_core
      - name: test_service_provider_node_driver
      - name: test_shell_api
      - name: test_shell_bson
      - name: test_shell_evaluator
      - name: test_snippet_manager
      - name: test_types
  - name: tests_linux-m42xc_n24
    display_name: "Ubuntu 20.04 x64 m42xc n24 (Unit tests)"
    run_on: ubuntu2004-small
    tags: ["nightly-driver"]
    disable: true
    expansions:
      executable_os_id: darwin-arm64
      mongosh_server_test_version: "4.2.x"
      node_js_version: "24.11.1"
      mongosh_skip_node_version_check: ""
    tasks:
      - name: test_arg_parser
      - name: test_async_rewriter2
      - name: test_autocomplete
      - name: test_browser_runtime_core
      - name: test_browser_runtime_electron
      - name: test_build
      - name: test_cli_repl
      - name: test_e2e_tests
      - name: test_editor
      - name: test_errors
      - name: test_history
      - name: test_i18n
      - name: test_java_shell
      - name: test_js_multiline_to_singleline
      - name: test_logging
      - name: test_node_runtime_worker_thread
      - name: test_service_provider_core
      - name: test_service_provider_node_driver
      - name: test_shell_api
      - name: test_shell_bson
      - name: test_shell_evaluator
      - name: test_snippet_manager
      - name: test_types
  - name: tests_linux-m44xc_n24
    display_name: "Ubuntu 20.04 x64 m44xc n24 (Unit tests)"
    run_on: ubuntu2004-small
    tags: ["nightly-driver"]
    disable: true
    expansions:
      executable_os_id: darwin-arm64
      mongosh_server_test_version: "4.4.x"
      node_js_version: "24.11.1"
      mongosh_skip_node_version_check: ""
    tasks:
      - name: test_arg_parser
      - name: test_async_rewriter2
      - name: test_autocomplete
      - name: test_browser_runtime_core
      - name: test_browser_runtime_electron
      - name: test_build
      - name: test_cli_repl
      - name: test_e2e_tests
      - name: test_editor
      - name: test_errors
      - name: test_history
      - name: test_i18n
      - name: test_java_shell
      - name: test_js_multiline_to_singleline
      - name: test_logging
      - name: test_node_runtime_worker_thread
      - name: test_service_provider_core
      - name: test_service_provider_node_driver
      - name: test_shell_api
      - name: test_shell_bson
      - name: test_shell_evaluator
      - name: test_snippet_manager
      - name: test_types
  - name: tests_linux-m44xe_n24
    display_name: "Ubuntu 20.04 x64 m44xe n24 (Unit tests)"
    run_on: ubuntu2004-small
    tags: ["nightly-driver"]
    disable: true
    expansions:
      executable_os_id: darwin-arm64
      mongosh_server_test_version: "4.4.x-enterprise"
      node_js_version: "24.11.1"
      mongosh_skip_node_version_check: ""
    tasks:
      - name: test_arg_parser
      - name: test_async_rewriter2
      - name: test_autocomplete
      - name: test_browser_runtime_core
      - name: test_browser_runtime_electron
      - name: test_build
      - name: test_cli_repl
      - name: test_e2e_tests
      - name: test_editor
      - name: test_errors
      - name: test_history
      - name: test_i18n
      - name: test_java_shell
      - name: test_js_multiline_to_singleline
      - name: test_logging
      - name: test_node_runtime_worker_thread
      - name: test_service_provider_core
      - name: test_service_provider_node_driver
      - name: test_shell_api
      - name: test_shell_bson
      - name: test_shell_evaluator
      - name: test_snippet_manager
      - name: test_types
  - name: tests_linux-m50xc_n24
    display_name: "Ubuntu 20.04 x64 m50xc n24 (Unit tests)"
    run_on: ubuntu2004-small
    tags: ["nightly-driver"]
    disable: true
    expansions:
      executable_os_id: darwin-arm64
      mongosh_server_test_version: "5.0.x"
      node_js_version: "24.11.1"
      mongosh_skip_node_version_check: ""
    tasks:
      - name: test_arg_parser
      - name: test_async_rewriter2
      - name: test_autocomplete
      - name: test_browser_runtime_core
      - name: test_browser_runtime_electron
      - name: test_build
      - name: test_cli_repl
      - name: test_e2e_tests
      - name: test_editor
      - name: test_errors
      - name: test_history
      - name: test_i18n
      - name: test_java_shell
      - name: test_js_multiline_to_singleline
      - name: test_logging
      - name: test_node_runtime_worker_thread
      - name: test_service_provider_core
      - name: test_service_provider_node_driver
      - name: test_shell_api
      - name: test_shell_bson
      - name: test_shell_evaluator
      - name: test_snippet_manager
      - name: test_types
  - name: tests_linux-m50xe_n24
    display_name: "Ubuntu 20.04 x64 m50xe n24 (Unit tests)"
    run_on: ubuntu2004-small
    tags: ["nightly-driver"]
    disable: true
    expansions:
      executable_os_id: darwin-arm64
      mongosh_server_test_version: "5.0.x-enterprise"
      node_js_version: "24.11.1"
      mongosh_skip_node_version_check: ""
    tasks:
      - name: test_arg_parser
      - name: test_async_rewriter2
      - name: test_autocomplete
      - name: test_browser_runtime_core
      - name: test_browser_runtime_electron
      - name: test_build
      - name: test_cli_repl
      - name: test_e2e_tests
      - name: test_editor
      - name: test_errors
      - name: test_history
      - name: test_i18n
      - name: test_java_shell
      - name: test_js_multiline_to_singleline
      - name: test_logging
      - name: test_node_runtime_worker_thread
      - name: test_service_provider_core
      - name: test_service_provider_node_driver
      - name: test_shell_api
      - name: test_shell_bson
      - name: test_shell_evaluator
      - name: test_snippet_manager
      - name: test_types
  - name: tests_linux-m60xc_n24
    display_name: "Ubuntu 20.04 x64 m60xc n24 (Unit tests)"
    run_on: ubuntu2004-small
    tags: ["nightly-driver"]
    disable: true
    expansions:
      executable_os_id: darwin-arm64
      mongosh_server_test_version: "6.0.x"
      node_js_version: "24.11.1"
      mongosh_skip_node_version_check: ""
    tasks:
      - name: test_arg_parser
      - name: test_async_rewriter2
      - name: test_autocomplete
      - name: test_browser_runtime_core
      - name: test_browser_runtime_electron
      - name: test_build
      - name: test_cli_repl
      - name: test_e2e_tests
      - name: test_editor
      - name: test_errors
      - name: test_history
      - name: test_i18n
      - name: test_java_shell
      - name: test_js_multiline_to_singleline
      - name: test_logging
      - name: test_node_runtime_worker_thread
      - name: test_service_provider_core
      - name: test_service_provider_node_driver
      - name: test_shell_api
      - name: test_shell_bson
      - name: test_shell_evaluator
      - name: test_snippet_manager
      - name: test_types
  - name: tests_linux-m60xe_n24
    display_name: "Ubuntu 20.04 x64 m60xe n24 (Unit tests)"
    run_on: ubuntu2004-small
    tags: ["nightly-driver"]
    disable: true
    expansions:
      executable_os_id: darwin-arm64
      mongosh_server_test_version: "6.0.x-enterprise"
      node_js_version: "24.11.1"
      mongosh_skip_node_version_check: ""
    tasks:
      - name: test_arg_parser
      - name: test_async_rewriter2
      - name: test_autocomplete
      - name: test_browser_runtime_core
      - name: test_browser_runtime_electron
      - name: test_build
      - name: test_cli_repl
      - name: test_e2e_tests
      - name: test_editor
      - name: test_errors
      - name: test_history
      - name: test_i18n
      - name: test_java_shell
      - name: test_js_multiline_to_singleline
      - name: test_logging
      - name: test_node_runtime_worker_thread
      - name: test_service_provider_core
      - name: test_service_provider_node_driver
      - name: test_shell_api
      - name: test_shell_bson
      - name: test_shell_evaluator
      - name: test_snippet_manager
      - name: test_types
  - name: tests_linux-m70xc_n24
    display_name: "Ubuntu 20.04 x64 m70xc n24 (Unit tests)"
    run_on: ubuntu2004-small
    tags: ["nightly-driver"]
    disable: true
    expansions:
      executable_os_id: darwin-arm64
      mongosh_server_test_version: "7.0.x"
      node_js_version: "24.11.1"
      mongosh_skip_node_version_check: ""
    tasks:
      - name: test_arg_parser
      - name: test_async_rewriter2
      - name: test_autocomplete
      - name: test_browser_runtime_core
      - name: test_browser_runtime_electron
      - name: test_build
      - name: test_cli_repl
      - name: test_e2e_tests
      - name: test_editor
      - name: test_errors
      - name: test_history
      - name: test_i18n
      - name: test_java_shell
      - name: test_js_multiline_to_singleline
      - name: test_logging
      - name: test_node_runtime_worker_thread
      - name: test_service_provider_core
      - name: test_service_provider_node_driver
      - name: test_shell_api
      - name: test_shell_bson
      - name: test_shell_evaluator
      - name: test_snippet_manager
      - name: test_types
  - name: tests_linux-m70xe_n24
    display_name: "Ubuntu 20.04 x64 m70xe n24 (Unit tests)"
    run_on: ubuntu2004-small
    tags: ["nightly-driver"]
    disable: true
    expansions:
      executable_os_id: darwin-arm64
      mongosh_server_test_version: "7.0.x-enterprise"
      node_js_version: "24.11.1"
      mongosh_skip_node_version_check: ""
    tasks:
      - name: test_arg_parser
      - name: test_async_rewriter2
      - name: test_autocomplete
      - name: test_browser_runtime_core
      - name: test_browser_runtime_electron
      - name: test_build
      - name: test_cli_repl
      - name: test_e2e_tests
      - name: test_editor
      - name: test_errors
      - name: test_history
      - name: test_i18n
      - name: test_java_shell
      - name: test_js_multiline_to_singleline
      - name: test_logging
      - name: test_node_runtime_worker_thread
      - name: test_service_provider_core
      - name: test_service_provider_node_driver
      - name: test_shell_api
      - name: test_shell_bson
      - name: test_shell_evaluator
      - name: test_snippet_manager
      - name: test_types
  - name: tests_linux-m80xc_n24
    display_name: "Ubuntu 20.04 x64 m80xc n24 (Unit tests)"
    run_on: ubuntu2004-small
    tags: ["nightly-driver"]
    disable: true
    expansions:
      executable_os_id: darwin-arm64
      mongosh_server_test_version: "8.0.x"
      node_js_version: "24.11.1"
      mongosh_skip_node_version_check: ""
    tasks:
      - name: test_arg_parser
      - name: test_async_rewriter2
      - name: test_autocomplete
      - name: test_browser_runtime_core
      - name: test_browser_runtime_electron
      - name: test_build
      - name: test_cli_repl
      - name: test_e2e_tests
      - name: test_editor
      - name: test_errors
      - name: test_history
      - name: test_i18n
      - name: test_java_shell
      - name: test_js_multiline_to_singleline
      - name: test_logging
      - name: test_node_runtime_worker_thread
      - name: test_service_provider_core
      - name: test_service_provider_node_driver
      - name: test_shell_api
      - name: test_shell_bson
      - name: test_shell_evaluator
      - name: test_snippet_manager
      - name: test_types
  - name: tests_linux-m80xe_n24
    display_name: "Ubuntu 20.04 x64 m80xe n24 (Unit tests)"
    run_on: ubuntu2004-small
    tags: ["nightly-driver"]
    disable: true
    expansions:
      executable_os_id: darwin-arm64
      mongosh_server_test_version: "8.0.x-enterprise"
      node_js_version: "24.11.1"
      mongosh_skip_node_version_check: ""
    tasks:
      - name: test_arg_parser
      - name: test_async_rewriter2
      - name: test_autocomplete
      - name: test_browser_runtime_core
      - name: test_browser_runtime_electron
      - name: test_build
      - name: test_cli_repl
      - name: test_e2e_tests
      - name: test_editor
      - name: test_errors
      - name: test_history
      - name: test_i18n
      - name: test_java_shell
      - name: test_js_multiline_to_singleline
      - name: test_logging
      - name: test_node_runtime_worker_thread
      - name: test_service_provider_core
      - name: test_service_provider_node_driver
      - name: test_shell_api
      - name: test_shell_bson
      - name: test_shell_evaluator
      - name: test_snippet_manager
      - name: test_types
  - name: tests_linux-m82xc_n24
    display_name: "Ubuntu 20.04 x64 m82xc n24 (Unit tests)"
    run_on: ubuntu2004-small
    tags: ["nightly-driver"]
    disable: true
    expansions:
      executable_os_id: darwin-arm64
      mongosh_server_test_version: "8.2.0"
      node_js_version: "24.11.1"
      mongosh_skip_node_version_check: ""
    tasks:
      - name: test_arg_parser
      - name: test_async_rewriter2
      - name: test_autocomplete
      - name: test_browser_runtime_core
      - name: test_browser_runtime_electron
      - name: test_build
      - name: test_cli_repl
      - name: test_e2e_tests
      - name: test_editor
      - name: test_errors
      - name: test_history
      - name: test_i18n
      - name: test_java_shell
      - name: test_js_multiline_to_singleline
      - name: test_logging
      - name: test_node_runtime_worker_thread
      - name: test_service_provider_core
      - name: test_service_provider_node_driver
      - name: test_shell_api
      - name: test_shell_bson
      - name: test_shell_evaluator
      - name: test_snippet_manager
      - name: test_types
  - name: tests_linux-m82xe_n24
    display_name: "Ubuntu 20.04 x64 m82xe n24 (Unit tests)"
    run_on: ubuntu2004-small
    tags: ["nightly-driver"]
    disable: true
    expansions:
      executable_os_id: darwin-arm64
      mongosh_server_test_version: "8.2.0-enterprise"
      node_js_version: "24.11.1"
      mongosh_skip_node_version_check: ""
    tasks:
      - name: test_arg_parser
      - name: test_async_rewriter2
      - name: test_autocomplete
      - name: test_browser_runtime_core
      - name: test_browser_runtime_electron
      - name: test_build
      - name: test_cli_repl
      - name: test_e2e_tests
      - name: test_editor
      - name: test_errors
      - name: test_history
      - name: test_i18n
      - name: test_java_shell
      - name: test_js_multiline_to_singleline
      - name: test_logging
      - name: test_node_runtime_worker_thread
      - name: test_service_provider_core
      - name: test_service_provider_node_driver
      - name: test_shell_api
      - name: test_shell_bson
      - name: test_shell_evaluator
      - name: test_snippet_manager
      - name: test_types
  - name: tests_linux-mlatest_n24
    display_name: "Ubuntu 20.04 x64 mlatest n24 (Unit tests)"
    run_on: ubuntu2004-small
    tags: ["nightly-driver","mlatest"]
    disable: true
    expansions:
      executable_os_id: darwin-arm64
      mongosh_server_test_version: "latest-alpha-enterprise"
      node_js_version: "24.11.1"
      mongosh_skip_node_version_check: ""
    tasks:
      - name: test_arg_parser
      - name: test_async_rewriter2
      - name: test_autocomplete
      - name: test_browser_runtime_core
      - name: test_browser_runtime_electron
      - name: test_build
      - name: test_cli_repl
      - name: test_e2e_tests
      - name: test_editor
      - name: test_errors
      - name: test_history
      - name: test_i18n
      - name: test_java_shell
      - name: test_js_multiline_to_singleline
      - name: test_logging
      - name: test_node_runtime_worker_thread
      - name: test_service_provider_core
      - name: test_service_provider_node_driver
      - name: test_shell_api
      - name: test_shell_bson
      - name: test_shell_evaluator
      - name: test_snippet_manager
      - name: test_types
  - name: win32-n24
    display_name: "Windows n24 (Unit tests)"
    run_on: windows-vsCurrent-small
    tags: []
    disable: true
    expansions:
      executable_os_id: win32
      mongosh_server_test_version: ""
      node_js_version: "24.11.1"
      mongosh_skip_node_version_check: ""
    tasks:
      - name: test_arg_parser
      - name: test_async_rewriter2
      - name: test_autocomplete
      - name: test_browser_runtime_core
      - name: test_browser_runtime_electron
      - name: test_build
      - name: test_cli_repl
      - name: test_e2e_tests
      - name: test_editor
      - name: test_errors
      - name: test_history
      - name: test_i18n
      - name: test_js_multiline_to_singleline
      - name: test_logging
      - name: test_node_runtime_worker_thread
      - name: test_service_provider_core
      - name: test_service_provider_node_driver
      - name: test_shell_api
      - name: test_shell_bson
      - name: test_shell_evaluator
      - name: test_snippet_manager
      - name: test_types
  - name: tests_win32-m42xc_n24
    display_name: "Windows m42xc n24 (Unit tests)"
    run_on: windows-vsCurrent-small
    tags: []
    disable: true
    expansions:
      executable_os_id: win32
      mongosh_server_test_version: "4.2.x"
      node_js_version: "24.11.1"
      mongosh_skip_node_version_check: ""
    tasks:
      - name: test_arg_parser
      - name: test_async_rewriter2
      - name: test_autocomplete
      - name: test_browser_runtime_core
      - name: test_browser_runtime_electron
      - name: test_build
      - name: test_cli_repl
      - name: test_e2e_tests
      - name: test_editor
      - name: test_errors
      - name: test_history
      - name: test_i18n
      - name: test_js_multiline_to_singleline
      - name: test_logging
      - name: test_node_runtime_worker_thread
      - name: test_service_provider_core
      - name: test_service_provider_node_driver
      - name: test_shell_api
      - name: test_shell_bson
      - name: test_shell_evaluator
      - name: test_snippet_manager
      - name: test_types
  - name: tests_win32-m42xe_n24
    display_name: "Windows m42xe n24 (Unit tests)"
    run_on: windows-vsCurrent-small
    tags: []
    disable: true
    expansions:
      executable_os_id: win32
      mongosh_server_test_version: "4.2.x-enterprise"
      node_js_version: "24.11.1"
      mongosh_skip_node_version_check: ""
    tasks:
      - name: test_arg_parser
      - name: test_async_rewriter2
      - name: test_autocomplete
      - name: test_browser_runtime_core
      - name: test_browser_runtime_electron
      - name: test_build
      - name: test_cli_repl
      - name: test_e2e_tests
      - name: test_editor
      - name: test_errors
      - name: test_history
      - name: test_i18n
      - name: test_js_multiline_to_singleline
      - name: test_logging
      - name: test_node_runtime_worker_thread
      - name: test_service_provider_core
      - name: test_service_provider_node_driver
      - name: test_shell_api
      - name: test_shell_bson
      - name: test_shell_evaluator
      - name: test_snippet_manager
      - name: test_types
  - name: tests_win32-m44xc_n24
    display_name: "Windows m44xc n24 (Unit tests)"
    run_on: windows-vsCurrent-small
    tags: []
    disable: true
    expansions:
      executable_os_id: win32
      mongosh_server_test_version: "4.4.x"
      node_js_version: "24.11.1"
      mongosh_skip_node_version_check: ""
    tasks:
      - name: test_arg_parser
      - name: test_async_rewriter2
      - name: test_autocomplete
      - name: test_browser_runtime_core
      - name: test_browser_runtime_electron
      - name: test_build
      - name: test_cli_repl
      - name: test_e2e_tests
      - name: test_editor
      - name: test_errors
      - name: test_history
      - name: test_i18n
      - name: test_js_multiline_to_singleline
      - name: test_logging
      - name: test_node_runtime_worker_thread
      - name: test_service_provider_core
      - name: test_service_provider_node_driver
      - name: test_shell_api
      - name: test_shell_bson
      - name: test_shell_evaluator
      - name: test_snippet_manager
      - name: test_types
  - name: tests_win32-m44xe_n24
    display_name: "Windows m44xe n24 (Unit tests)"
    run_on: windows-vsCurrent-small
    tags: []
    disable: true
    expansions:
      executable_os_id: win32
      mongosh_server_test_version: "4.4.x-enterprise"
      node_js_version: "24.11.1"
      mongosh_skip_node_version_check: ""
    tasks:
      - name: test_arg_parser
      - name: test_async_rewriter2
      - name: test_autocomplete
      - name: test_browser_runtime_core
      - name: test_browser_runtime_electron
      - name: test_build
      - name: test_cli_repl
      - name: test_e2e_tests
      - name: test_editor
      - name: test_errors
      - name: test_history
      - name: test_i18n
      - name: test_js_multiline_to_singleline
      - name: test_logging
      - name: test_node_runtime_worker_thread
      - name: test_service_provider_core
      - name: test_service_provider_node_driver
      - name: test_shell_api
      - name: test_shell_bson
      - name: test_shell_evaluator
      - name: test_snippet_manager
      - name: test_types
  - name: tests_win32-m50xc_n24
    display_name: "Windows m50xc n24 (Unit tests)"
    run_on: windows-vsCurrent-small
    tags: []
    disable: true
    expansions:
      executable_os_id: win32
      mongosh_server_test_version: "5.0.x"
      node_js_version: "24.11.1"
      mongosh_skip_node_version_check: ""
    tasks:
      - name: test_arg_parser
      - name: test_async_rewriter2
      - name: test_autocomplete
      - name: test_browser_runtime_core
      - name: test_browser_runtime_electron
      - name: test_build
      - name: test_cli_repl
      - name: test_e2e_tests
      - name: test_editor
      - name: test_errors
      - name: test_history
      - name: test_i18n
      - name: test_js_multiline_to_singleline
      - name: test_logging
      - name: test_node_runtime_worker_thread
      - name: test_service_provider_core
      - name: test_service_provider_node_driver
      - name: test_shell_api
      - name: test_shell_bson
      - name: test_shell_evaluator
      - name: test_snippet_manager
      - name: test_types
  - name: tests_win32-m50xe_n24
    display_name: "Windows m50xe n24 (Unit tests)"
    run_on: windows-vsCurrent-small
    tags: []
    disable: true
    expansions:
      executable_os_id: win32
      mongosh_server_test_version: "5.0.x-enterprise"
      node_js_version: "24.11.1"
      mongosh_skip_node_version_check: ""
    tasks:
      - name: test_arg_parser
      - name: test_async_rewriter2
      - name: test_autocomplete
      - name: test_browser_runtime_core
      - name: test_browser_runtime_electron
      - name: test_build
      - name: test_cli_repl
      - name: test_e2e_tests
      - name: test_editor
      - name: test_errors
      - name: test_history
      - name: test_i18n
      - name: test_js_multiline_to_singleline
      - name: test_logging
      - name: test_node_runtime_worker_thread
      - name: test_service_provider_core
      - name: test_service_provider_node_driver
      - name: test_shell_api
      - name: test_shell_bson
      - name: test_shell_evaluator
      - name: test_snippet_manager
      - name: test_types
  - name: tests_win32-m60xc_n24
    display_name: "Windows m60xc n24 (Unit tests)"
    run_on: windows-vsCurrent-small
    tags: []
    disable: true
    expansions:
      executable_os_id: win32
      mongosh_server_test_version: "6.0.x"
      node_js_version: "24.11.1"
      mongosh_skip_node_version_check: ""
    tasks:
      - name: test_arg_parser
      - name: test_async_rewriter2
      - name: test_autocomplete
      - name: test_browser_runtime_core
      - name: test_browser_runtime_electron
      - name: test_build
      - name: test_cli_repl
      - name: test_e2e_tests
      - name: test_editor
      - name: test_errors
      - name: test_history
      - name: test_i18n
      - name: test_js_multiline_to_singleline
      - name: test_logging
      - name: test_node_runtime_worker_thread
      - name: test_service_provider_core
      - name: test_service_provider_node_driver
      - name: test_shell_api
      - name: test_shell_bson
      - name: test_shell_evaluator
      - name: test_snippet_manager
      - name: test_types
  - name: tests_win32-m60xe_n24
    display_name: "Windows m60xe n24 (Unit tests)"
    run_on: windows-vsCurrent-small
    tags: []
    disable: true
    expansions:
      executable_os_id: win32
      mongosh_server_test_version: "6.0.x-enterprise"
      node_js_version: "24.11.1"
      mongosh_skip_node_version_check: ""
    tasks:
      - name: test_arg_parser
      - name: test_async_rewriter2
      - name: test_autocomplete
      - name: test_browser_runtime_core
      - name: test_browser_runtime_electron
      - name: test_build
      - name: test_cli_repl
      - name: test_e2e_tests
      - name: test_editor
      - name: test_errors
      - name: test_history
      - name: test_i18n
      - name: test_js_multiline_to_singleline
      - name: test_logging
      - name: test_node_runtime_worker_thread
      - name: test_service_provider_core
      - name: test_service_provider_node_driver
      - name: test_shell_api
      - name: test_shell_bson
      - name: test_shell_evaluator
      - name: test_snippet_manager
      - name: test_types
  - name: tests_win32-m70xc_n24
    display_name: "Windows m70xc n24 (Unit tests)"
    run_on: windows-vsCurrent-small
    tags: []
    disable: true
    expansions:
      executable_os_id: win32
      mongosh_server_test_version: "7.0.x"
      node_js_version: "24.11.1"
      mongosh_skip_node_version_check: ""
    tasks:
      - name: test_arg_parser
      - name: test_async_rewriter2
      - name: test_autocomplete
      - name: test_browser_runtime_core
      - name: test_browser_runtime_electron
      - name: test_build
      - name: test_cli_repl
      - name: test_e2e_tests
      - name: test_editor
      - name: test_errors
      - name: test_history
      - name: test_i18n
      - name: test_js_multiline_to_singleline
      - name: test_logging
      - name: test_node_runtime_worker_thread
      - name: test_service_provider_core
      - name: test_service_provider_node_driver
      - name: test_shell_api
      - name: test_shell_bson
      - name: test_shell_evaluator
      - name: test_snippet_manager
      - name: test_types
  - name: tests_win32-m70xe_n24
    display_name: "Windows m70xe n24 (Unit tests)"
    run_on: windows-vsCurrent-small
    tags: []
    disable: true
    expansions:
      executable_os_id: win32
      mongosh_server_test_version: "7.0.x-enterprise"
      node_js_version: "24.11.1"
      mongosh_skip_node_version_check: ""
    tasks:
      - name: test_arg_parser
      - name: test_async_rewriter2
      - name: test_autocomplete
      - name: test_browser_runtime_core
      - name: test_browser_runtime_electron
      - name: test_build
      - name: test_cli_repl
      - name: test_e2e_tests
      - name: test_editor
      - name: test_errors
      - name: test_history
      - name: test_i18n
      - name: test_js_multiline_to_singleline
      - name: test_logging
      - name: test_node_runtime_worker_thread
      - name: test_service_provider_core
      - name: test_service_provider_node_driver
      - name: test_shell_api
      - name: test_shell_bson
      - name: test_shell_evaluator
      - name: test_snippet_manager
      - name: test_types
  - name: tests_win32-m80xc_n24
    display_name: "Windows m80xc n24 (Unit tests)"
    run_on: windows-vsCurrent-small
    tags: []
    disable: true
    expansions:
      executable_os_id: win32
      mongosh_server_test_version: "8.0.x"
      node_js_version: "24.11.1"
      mongosh_skip_node_version_check: ""
    tasks:
      - name: test_arg_parser
      - name: test_async_rewriter2
      - name: test_autocomplete
      - name: test_browser_runtime_core
      - name: test_browser_runtime_electron
      - name: test_build
      - name: test_cli_repl
      - name: test_e2e_tests
      - name: test_editor
      - name: test_errors
      - name: test_history
      - name: test_i18n
      - name: test_js_multiline_to_singleline
      - name: test_logging
      - name: test_node_runtime_worker_thread
      - name: test_service_provider_core
      - name: test_service_provider_node_driver
      - name: test_shell_api
      - name: test_shell_bson
      - name: test_shell_evaluator
      - name: test_snippet_manager
      - name: test_types
  - name: tests_win32-m80xe_n24
    display_name: "Windows m80xe n24 (Unit tests)"
    run_on: windows-vsCurrent-small
    tags: []
    disable: true
    expansions:
      executable_os_id: win32
      mongosh_server_test_version: "8.0.x-enterprise"
      node_js_version: "24.11.1"
      mongosh_skip_node_version_check: ""
    tasks:
      - name: test_arg_parser
      - name: test_async_rewriter2
      - name: test_autocomplete
      - name: test_browser_runtime_core
      - name: test_browser_runtime_electron
      - name: test_build
      - name: test_cli_repl
      - name: test_e2e_tests
      - name: test_editor
      - name: test_errors
      - name: test_history
      - name: test_i18n
      - name: test_js_multiline_to_singleline
      - name: test_logging
      - name: test_node_runtime_worker_thread
      - name: test_service_provider_core
      - name: test_service_provider_node_driver
      - name: test_shell_api
      - name: test_shell_bson
      - name: test_shell_evaluator
      - name: test_snippet_manager
      - name: test_types
  - name: tests_win32-m82xc_n24
    display_name: "Windows m82xc n24 (Unit tests)"
    run_on: windows-vsCurrent-small
    tags: []
    disable: true
    expansions:
      executable_os_id: win32
      mongosh_server_test_version: "8.2.0"
      node_js_version: "24.11.1"
      mongosh_skip_node_version_check: ""
    tasks:
      - name: test_arg_parser
      - name: test_async_rewriter2
      - name: test_autocomplete
      - name: test_browser_runtime_core
      - name: test_browser_runtime_electron
      - name: test_build
      - name: test_cli_repl
      - name: test_e2e_tests
      - name: test_editor
      - name: test_errors
      - name: test_history
      - name: test_i18n
      - name: test_js_multiline_to_singleline
      - name: test_logging
      - name: test_node_runtime_worker_thread
      - name: test_service_provider_core
      - name: test_service_provider_node_driver
      - name: test_shell_api
      - name: test_shell_bson
      - name: test_shell_evaluator
      - name: test_snippet_manager
      - name: test_types
  - name: tests_win32-m82xe_n24
    display_name: "Windows m82xe n24 (Unit tests)"
    run_on: windows-vsCurrent-small
    tags: []
    disable: true
    expansions:
      executable_os_id: win32
      mongosh_server_test_version: "8.2.0-enterprise"
      node_js_version: "24.11.1"
      mongosh_skip_node_version_check: ""
    tasks:
      - name: test_arg_parser
      - name: test_async_rewriter2
      - name: test_autocomplete
      - name: test_browser_runtime_core
      - name: test_browser_runtime_electron
      - name: test_build
      - name: test_cli_repl
      - name: test_e2e_tests
      - name: test_editor
      - name: test_errors
      - name: test_history
      - name: test_i18n
      - name: test_js_multiline_to_singleline
      - name: test_logging
      - name: test_node_runtime_worker_thread
      - name: test_service_provider_core
      - name: test_service_provider_node_driver
      - name: test_shell_api
      - name: test_shell_bson
      - name: test_shell_evaluator
      - name: test_snippet_manager
      - name: test_types
  - name: tests_win32-mlatest_n24
    display_name: "Windows mlatest n24 (Unit tests)"
    run_on: windows-vsCurrent-small
    tags: ["mlatest"]
    disable: true
    expansions:
      executable_os_id: win32
      mongosh_server_test_version: "latest-alpha-enterprise"
      node_js_version: "24.11.1"
      mongosh_skip_node_version_check: ""
    tasks:
      - name: test_arg_parser
      - name: test_async_rewriter2
      - name: test_autocomplete
      - name: test_browser_runtime_core
      - name: test_browser_runtime_electron
      - name: test_build
      - name: test_cli_repl
      - name: test_e2e_tests
      - name: test_editor
      - name: test_errors
      - name: test_history
      - name: test_i18n
      - name: test_js_multiline_to_singleline
      - name: test_logging
      - name: test_node_runtime_worker_thread
      - name: test_service_provider_core
      - name: test_service_provider_node_driver
      - name: test_shell_api
      - name: test_shell_bson
      - name: test_shell_evaluator
      - name: test_snippet_manager
      - name: test_types
  - name: build_linux_x64
    display_name: "RHEL 7.0 x64 (Build)"
    run_on: rhel70-build
    expansions:
      executable_os_id: "linux-x64"
      node_js_version: "20.19.5"
    tasks:
      - name: compile_artifact
  - name: build_linux_x64_rhel8
    display_name: "RHEL 8.0 x64 (Build)"
    run_on: rhel80-build
    expansions:
      executable_os_id: "linux-x64"
      node_js_version: "20.19.5"
    tasks:
      - name: compile_artifact
  - name: build_linux_x64_openssl11
    display_name: "RHEL 7.0 x64 openssl11 (Build)"
    run_on: rhel70-build
    expansions:
      executable_os_id: "linux-x64-openssl11"
      node_js_version: "20.19.5"
      mongosh_shared_openssl: "openssl11"
    tasks:
      - name: compile_artifact
  - name: build_linux_x64_openssl11_rhel8
    display_name: "RHEL 8.0 x64 openssl11 (Build)"
    run_on: rhel80-build
    expansions:
      executable_os_id: "linux-x64-openssl11"
      node_js_version: "20.19.5"
      mongosh_shared_openssl: "openssl11"
    tasks:
      - name: compile_artifact
  - name: build_linux_x64_openssl3
    display_name: "RHEL 7.0 x64 openssl3 (Build)"
    run_on: rhel70-build
    expansions:
      executable_os_id: "linux-x64-openssl3"
      node_js_version: "20.19.5"
      mongosh_shared_openssl: "openssl3"
    tasks:
      - name: compile_artifact
  - name: build_linux_x64_openssl3_rhel8
    display_name: "RHEL 8.0 x64 openssl3 (Build)"
    run_on: rhel80-build
    expansions:
      executable_os_id: "linux-x64-openssl3"
      node_js_version: "20.19.5"
      mongosh_shared_openssl: "openssl3"
    tasks:
      - name: compile_artifact
  - name: build_linux_arm64
    display_name: "Amazon 2 arm64 (Build)"
    run_on: amazon2-arm64-large
    expansions:
      executable_os_id: "linux-arm64"
      node_js_version: "20.19.5"
    tasks:
      - name: compile_artifact
  - name: build_linux_arm64_openssl11
    display_name: "Amazon 2 arm64 openssl11 (Build)"
    run_on: amazon2-arm64-large
    expansions:
      executable_os_id: "linux-arm64-openssl11"
      node_js_version: "20.19.5"
      mongosh_shared_openssl: "openssl11"
    tasks:
      - name: compile_artifact
  - name: build_linux_arm64_openssl3
    display_name: "Amazon 2 arm64 openssl3 (Build)"
    run_on: amazon2-arm64-large
    expansions:
      executable_os_id: "linux-arm64-openssl3"
      node_js_version: "20.19.5"
      mongosh_shared_openssl: "openssl3"
    tasks:
      - name: compile_artifact
  - name: build_linux_ppc64le
    display_name: "RHEL 8 PPC (Build)"
    run_on: rhel8-power-small
    expansions:
      executable_os_id: "linux-ppc64le"
      node_js_version: "20.19.5"
    tasks:
      - name: compile_artifact
  - name: build_linux_s390x
    display_name: "RHEL 7 s390x (Build)"
    run_on: rhel7-zseries-large
    expansions:
      executable_os_id: "linux-s390x"
      node_js_version: "20.19.5"
    tasks:
      - name: compile_artifact
  - name: build_darwin
    display_name: "MacOS Big Sur (Build)"
    run_on: macos-11
    expansions:
      executable_os_id: "darwin-x64"
      node_js_version: "20.19.5"
    tasks:
      - name: compile_artifact
  - name: build_darwin_arm64
    display_name: "MacOS Big Sur arm64 (Build)"
    run_on: macos-11-arm64
    expansions:
      executable_os_id: "darwin-arm64"
      node_js_version: "20.19.5"
    tasks:
      - name: compile_artifact
  - name: build_win32
    display_name: "Windows VS 2022 (Build)"
    run_on: windows-vsCurrent-large
    expansions:
      executable_os_id: "win32"
      node_js_version: "20.19.5"
    tasks:
      - name: compile_artifact
  - name: e2e_tests_rhel70_large_m70x
    display_name: "RHEL 7.0 x64 70x (E2E tests)"
    run_on: rhel70-large
    tags: ["nightly-driver"]
    expansions:
      executable_os_id: "linux-x64"
      node_js_version: "20.19.5"
      mongosh_server_test_version: "7.0.x-enterprise"
      mongosh_test_e2e_force_fips: ""
    tasks:
      - name: e2e_tests_linux_x64
  - name: e2e_tests_rhel76_large_m70x
    display_name: "RHEL 7.6 x64 70x (E2E tests)"
    run_on: rhel76-large
    tags: ["nightly-driver"]
    expansions:
      executable_os_id: "linux-x64"
      node_js_version: "20.19.5"
      mongosh_server_test_version: "7.0.x-enterprise"
      mongosh_test_e2e_force_fips: ""
    tasks:
      - name: e2e_tests_linux_x64
  - name: e2e_tests_rhel80_small
    display_name: "RHEL 8.0 x64 (E2E tests)"
    run_on: rhel80-small
    tags: ["nightly-driver"]
    expansions:
      executable_os_id: "linux-x64"
      node_js_version: "20.19.5"
      mongosh_server_test_version: "stable-enterprise"
      mongosh_test_e2e_force_fips: ""
    tasks:
      - name: e2e_tests_linux_x64
  - name: e2e_tests_rhel90_small_m70x
    display_name: "RHEL 9.0 x64 70x (E2E tests)"
    run_on: rhel90-small
    tags: ["nightly-driver"]
    expansions:
      executable_os_id: "linux-x64"
      node_js_version: "20.19.5"
      mongosh_server_test_version: "7.0.x-enterprise"
      mongosh_test_e2e_force_fips: ""
    tasks:
      - name: e2e_tests_linux_x64
  - name: e2e_tests_rhel93_small
    display_name: "RHEL 9.3 x64 (E2E tests)"
    run_on: rhel93-small
    tags: ["nightly-driver"]
    expansions:
      executable_os_id: "linux-x64"
      node_js_version: "20.19.5"
      mongosh_server_test_version: "stable-enterprise"
      mongosh_test_e2e_force_fips: ""
    tasks:
      - name: e2e_tests_linux_x64
  - name: e2e_tests_rhel83_fips
    display_name: "RHEL 8.3 x64 (E2E tests)"
    run_on: rhel83-fips
    tags: ["nightly-driver"]
    expansions:
      executable_os_id: "linux-x64"
      node_js_version: "20.19.5"
      mongosh_server_test_version: "stable-enterprise"
      mongosh_test_e2e_force_fips: ""
    tasks:
      - name: e2e_tests_linux_x64
  - name: e2e_tests_rhel83_fips_openssl11
    display_name: "RHEL 8.3 x64 openssl11 (E2E tests)"
    run_on: rhel83-fips
    tags: ["nightly-driver"]
    expansions:
      executable_os_id: "linux-x64-openssl11"
      node_js_version: "20.19.5"
      mongosh_server_test_version: "stable-enterprise"
      mongosh_test_e2e_force_fips: ""
    tasks:
      - name: e2e_tests_linux_x64_openssl11
  - name: e2e_tests_rhel83_fips_openssl11_true
    display_name: "RHEL 8.3 x64 openssl11 FIPS (E2E tests)"
    run_on: rhel83-fips
    tags: ["nightly-driver"]
    expansions:
      executable_os_id: "linux-x64-openssl11"
      node_js_version: "20.19.5"
      mongosh_server_test_version: "stable-enterprise"
      mongosh_test_e2e_force_fips: "1"
    tasks:
      - name: e2e_tests_linux_x64_openssl11
  - name: e2e_tests_rhel93_fips
    display_name: "RHEL 9.3 x64 (E2E tests)"
    run_on: rhel93-fips
    tags: ["nightly-driver"]
    expansions:
      executable_os_id: "linux-x64"
      node_js_version: "20.19.5"
      mongosh_server_test_version: "stable-enterprise"
      mongosh_test_e2e_force_fips: ""
    tasks:
      - name: e2e_tests_linux_x64
  - name: e2e_tests_rhel93_fips_openssl3
    display_name: "RHEL 9.3 x64 openssl3 (E2E tests)"
    run_on: rhel93-fips
    tags: ["nightly-driver"]
    expansions:
      executable_os_id: "linux-x64-openssl3"
      node_js_version: "20.19.5"
      mongosh_server_test_version: "stable-enterprise"
      mongosh_test_e2e_force_fips: ""
    tasks:
      - name: e2e_tests_linux_x64_openssl3
  - name: e2e_tests_rhel93_fips_openssl3_true
    display_name: "RHEL 9.3 x64 openssl3 FIPS (E2E tests)"
    run_on: rhel93-fips
    tags: ["nightly-driver"]
    expansions:
      executable_os_id: "linux-x64-openssl3"
      node_js_version: "20.19.5"
      mongosh_server_test_version: "stable-enterprise"
      mongosh_test_e2e_force_fips: "1"
    tasks:
      - name: e2e_tests_linux_x64_openssl3
  - name: e2e_tests_ubuntu1804_large_m60x
    display_name: "Ubuntu 18.04 x64 60x (E2E tests)"
    run_on: ubuntu1804-large
    tags: ["nightly-driver"]
    expansions:
      executable_os_id: "linux-x64"
      node_js_version: "20.19.5"
      mongosh_server_test_version: "6.0.x-enterprise"
      mongosh_test_e2e_force_fips: ""
    tasks:
      - name: e2e_tests_linux_x64
  - name: e2e_tests_ubuntu2004_small
    display_name: "Ubuntu 20.04 x64 (E2E tests)"
    run_on: ubuntu2004-small
    tags: ["nightly-driver"]
    expansions:
      executable_os_id: "linux-x64"
      node_js_version: "20.19.5"
      mongosh_server_test_version: "stable-enterprise"
      mongosh_test_e2e_force_fips: ""
    tasks:
      - name: e2e_tests_linux_x64
  - name: e2e_tests_ubuntu2004_small_openssl11
    display_name: "Ubuntu 20.04 x64 openssl11 (E2E tests)"
    run_on: ubuntu2004-small
    tags: ["nightly-driver"]
    expansions:
      executable_os_id: "linux-x64-openssl11"
      node_js_version: "20.19.5"
      mongosh_server_test_version: "stable-enterprise"
      mongosh_test_e2e_force_fips: ""
    tasks:
      - name: e2e_tests_linux_x64_openssl11
  - name: e2e_tests_ubuntu2204_small
    display_name: "Ubuntu 22.04 x64 (E2E tests)"
    run_on: ubuntu2204-small
    tags: ["nightly-driver"]
    expansions:
      executable_os_id: "linux-x64"
      node_js_version: "20.19.5"
      mongosh_server_test_version: "stable-enterprise"
      mongosh_test_e2e_force_fips: ""
    tasks:
      - name: e2e_tests_linux_x64
  - name: e2e_tests_ubuntu2204_small_openssl3
    display_name: "Ubuntu 22.04 x64 openssl3 (E2E tests)"
    run_on: ubuntu2204-small
    tags: ["nightly-driver"]
    expansions:
      executable_os_id: "linux-x64-openssl3"
      node_js_version: "20.19.5"
      mongosh_server_test_version: "stable-enterprise"
      mongosh_test_e2e_force_fips: ""
    tasks:
      - name: e2e_tests_linux_x64_openssl3
  - name: e2e_tests_ubuntu2404_small
    display_name: "Ubuntu 24.04 x64 (E2E tests)"
    run_on: ubuntu2404-small
    tags: ["nightly-driver"]
    expansions:
      executable_os_id: "linux-x64"
      node_js_version: "20.19.5"
      mongosh_server_test_version: "stable-enterprise"
      mongosh_test_e2e_force_fips: ""
    tasks:
      - name: e2e_tests_linux_x64
  - name: e2e_tests_ubuntu2404_small_openssl3
    display_name: "Ubuntu 24.04 x64 openssl3 (E2E tests)"
    run_on: ubuntu2404-small
    tags: ["nightly-driver"]
    expansions:
      executable_os_id: "linux-x64-openssl3"
      node_js_version: "20.19.5"
      mongosh_server_test_version: "stable-enterprise"
      mongosh_test_e2e_force_fips: ""
    tasks:
      - name: e2e_tests_linux_x64_openssl3
  - name: e2e_tests_debian10_small_m60x
    display_name: "Debian 10 x64 60x (E2E tests)"
    run_on: debian10-small
    tags: ["nightly-driver"]
    expansions:
      executable_os_id: "linux-x64"
      node_js_version: "20.19.5"
      mongosh_server_test_version: "6.0.x-enterprise"
      mongosh_test_e2e_force_fips: ""
    tasks:
      - name: e2e_tests_linux_x64
  - name: e2e_tests_debian10_small_openssl11_m60x
    display_name: "Debian 10 x64 60x openssl11 (E2E tests)"
    run_on: debian10-small
    tags: ["nightly-driver"]
    expansions:
      executable_os_id: "linux-x64-openssl11"
      node_js_version: "20.19.5"
      mongosh_server_test_version: "6.0.x-enterprise"
      mongosh_test_e2e_force_fips: ""
    tasks:
      - name: e2e_tests_linux_x64_openssl11
  - name: e2e_tests_debian11_small_m70x
    display_name: "Debian 11 x64 70x (E2E tests)"
    run_on: debian11-small
    tags: ["nightly-driver"]
    expansions:
      executable_os_id: "linux-x64"
      node_js_version: "20.19.5"
      mongosh_server_test_version: "7.0.x-enterprise"
      mongosh_test_e2e_force_fips: ""
    tasks:
      - name: e2e_tests_linux_x64
  - name: e2e_tests_debian11_small_openssl11_m70x
    display_name: "Debian 11 x64 70x openssl11 (E2E tests)"
    run_on: debian11-small
    tags: ["nightly-driver"]
    expansions:
      executable_os_id: "linux-x64-openssl11"
      node_js_version: "20.19.5"
      mongosh_server_test_version: "7.0.x-enterprise"
      mongosh_test_e2e_force_fips: ""
    tasks:
      - name: e2e_tests_linux_x64_openssl11
  - name: e2e_tests_amazon2_large_m70x
    display_name: "Amazon Linux 2 x64 70x (E2E tests)"
    run_on: amazon2-large
    tags: ["nightly-driver"]
    expansions:
      executable_os_id: "linux-x64"
      node_js_version: "20.19.5"
      mongosh_server_test_version: "7.0.x-enterprise"
      mongosh_test_e2e_force_fips: ""
    tasks:
      - name: e2e_tests_linux_x64
  - name: e2e_tests_amazon2023.0_small
    display_name: "Amazon Linux 2023 x64 (E2E tests)"
    run_on: amazon2023.0-small
    tags: ["nightly-driver"]
    expansions:
      executable_os_id: "linux-x64"
      node_js_version: "20.19.5"
      mongosh_server_test_version: "stable-enterprise"
      mongosh_test_e2e_force_fips: ""
    tasks:
      - name: e2e_tests_linux_x64
  - name: e2e_tests_suse12_sp5_large_m70x
    display_name: "SLES 12 x64 70x (E2E tests)"
    run_on: suse12-sp5-large
    tags: ["nightly-driver"]
    expansions:
      executable_os_id: "linux-x64"
      node_js_version: "20.19.5"
      mongosh_server_test_version: "7.0.x-enterprise"
      mongosh_test_e2e_force_fips: ""
    tasks:
      - name: e2e_tests_linux_x64
  - name: e2e_tests_suse15sp4_small
    display_name: "SLES 15 x64 (E2E tests)"
    run_on: suse15sp4-small
    tags: ["nightly-driver"]
    expansions:
      executable_os_id: "linux-x64"
      node_js_version: "20.19.5"
      mongosh_server_test_version: "stable-enterprise"
      mongosh_test_e2e_force_fips: ""
    tasks:
      - name: e2e_tests_linux_x64
  - name: e2e_tests_ubuntu1804_arm64_large_m60x
    display_name: "Ubuntu 18.04 arm64 60x (E2E tests)"
    run_on: ubuntu1804-arm64-large
    tags: []
    expansions:
      executable_os_id: "linux-arm64"
      node_js_version: "20.19.5"
      mongosh_server_test_version: "6.0.x-enterprise"
      mongosh_test_e2e_force_fips: ""
    tasks:
      - name: e2e_tests_linux_arm64
  - name: e2e_tests_ubuntu2004_arm64_small
    display_name: "Ubuntu 20.04 arm64 (E2E tests)"
    run_on: ubuntu2004-arm64-small
    tags: []
    expansions:
      executable_os_id: "linux-arm64"
      node_js_version: "20.19.5"
      mongosh_server_test_version: "stable-enterprise"
      mongosh_test_e2e_force_fips: ""
    tasks:
      - name: e2e_tests_linux_arm64
  - name: e2e_tests_ubuntu2004_arm64_small_openssl11
    display_name: "Ubuntu 20.04 arm64 openssl11 (E2E tests)"
    run_on: ubuntu2004-arm64-small
    tags: []
    expansions:
      executable_os_id: "linux-arm64-openssl11"
      node_js_version: "20.19.5"
      mongosh_server_test_version: "stable-enterprise"
      mongosh_test_e2e_force_fips: ""
    tasks:
      - name: e2e_tests_linux_arm64_openssl11
  - name: e2e_tests_ubuntu2204_arm64_small
    display_name: "Ubuntu 22.04 arm64 (E2E tests)"
    run_on: ubuntu2204-arm64-small
    tags: []
    expansions:
      executable_os_id: "linux-arm64"
      node_js_version: "20.19.5"
      mongosh_server_test_version: "stable-enterprise"
      mongosh_test_e2e_force_fips: ""
    tasks:
      - name: e2e_tests_linux_arm64
  - name: e2e_tests_ubuntu2204_arm64_small_openssl3
    display_name: "Ubuntu 22.04 arm64 openssl3 (E2E tests)"
    run_on: ubuntu2204-arm64-small
    tags: []
    expansions:
      executable_os_id: "linux-arm64-openssl3"
      node_js_version: "20.19.5"
      mongosh_server_test_version: "stable-enterprise"
      mongosh_test_e2e_force_fips: ""
    tasks:
      - name: e2e_tests_linux_arm64_openssl3
  - name: e2e_tests_ubuntu2404_arm64_small
    display_name: "Ubuntu 24.04 arm64 (E2E tests)"
    run_on: ubuntu2404-arm64-small
    tags: []
    expansions:
      executable_os_id: "linux-arm64"
      node_js_version: "20.19.5"
      mongosh_server_test_version: "stable-enterprise"
      mongosh_test_e2e_force_fips: ""
    tasks:
      - name: e2e_tests_linux_arm64
  - name: e2e_tests_ubuntu2404_arm64_small_openssl3
    display_name: "Ubuntu 24.04 arm64 openssl3 (E2E tests)"
    run_on: ubuntu2404-arm64-small
    tags: []
    expansions:
      executable_os_id: "linux-arm64-openssl3"
      node_js_version: "20.19.5"
      mongosh_server_test_version: "stable-enterprise"
      mongosh_test_e2e_force_fips: ""
    tasks:
      - name: e2e_tests_linux_arm64_openssl3
  - name: e2e_tests_ubuntu2404_arm64_small_openssl3_m820-rc4
    display_name: "Ubuntu 24.04 arm64 820-rc4 openssl3 (E2E tests)"
    run_on: ubuntu2404-arm64-small
    tags: []
    expansions:
      executable_os_id: "linux-arm64-openssl3"
      node_js_version: "20.19.5"
      mongosh_server_test_version: "8.2.0-rc4-enterprise"
      mongosh_test_e2e_force_fips: ""
    tasks:
      - name: e2e_tests_linux_arm64_openssl3
  - name: e2e_tests_amazon2_arm64_large_m70x
    display_name: "Amazon Linux 2 arm64 70x (E2E tests)"
    run_on: amazon2-arm64-large
    tags: []
    expansions:
      executable_os_id: "linux-arm64"
      node_js_version: "20.19.5"
      mongosh_server_test_version: "7.0.x-enterprise"
      mongosh_test_e2e_force_fips: ""
    tasks:
      - name: e2e_tests_linux_arm64
  - name: e2e_tests_amazon2023.0_arm64_small
    display_name: "Amazon Linux 2023 arm64 (E2E tests)"
    run_on: amazon2023.0-arm64-small
    tags: []
    expansions:
      executable_os_id: "linux-arm64"
      node_js_version: "20.19.5"
      mongosh_server_test_version: "stable-enterprise"
      mongosh_test_e2e_force_fips: ""
    tasks:
      - name: e2e_tests_linux_arm64
  - name: e2e_tests_amazon2023.0_arm64_small_m820-rc4
    display_name: "Amazon Linux 2023 arm64 820-rc4 (E2E tests)"
    run_on: amazon2023.0-arm64-small
    tags: []
    expansions:
      executable_os_id: "linux-arm64"
      node_js_version: "20.19.5"
      mongosh_server_test_version: "8.2.0-rc4-enterprise"
      mongosh_test_e2e_force_fips: ""
    tasks:
      - name: e2e_tests_linux_arm64
  - name: e2e_tests_rhel82_arm64_small
    display_name: "RHEL 8.2 arm64 (E2E tests)"
    run_on: rhel82-arm64-small
    tags: []
    expansions:
      executable_os_id: "linux-arm64"
      node_js_version: "20.19.5"
      mongosh_server_test_version: "stable-enterprise"
      mongosh_test_e2e_force_fips: ""
    tasks:
      - name: e2e_tests_linux_arm64
  - name: e2e_tests_rhel90_arm64_small_m70x
    display_name: "RHEL 9.0 arm64 70x (E2E tests)"
    run_on: rhel90-arm64-small
    tags: []
    expansions:
      executable_os_id: "linux-arm64"
      node_js_version: "20.19.5"
      mongosh_server_test_version: "7.0.x-enterprise"
      mongosh_test_e2e_force_fips: ""
    tasks:
      - name: e2e_tests_linux_arm64
  - name: e2e_tests_rhel90_arm64_small_openssl3_m70x
    display_name: "RHEL 9.0 arm64 70x openssl3 (E2E tests)"
    run_on: rhel90-arm64-small
    tags: []
    expansions:
      executable_os_id: "linux-arm64-openssl3"
      node_js_version: "20.19.5"
      mongosh_server_test_version: "7.0.x-enterprise"
      mongosh_test_e2e_force_fips: ""
    tasks:
      - name: e2e_tests_linux_arm64_openssl3
  - name: e2e_tests_rhel93_arm64_small
    display_name: "RHEL 9.3 arm64 (E2E tests)"
    run_on: rhel93-arm64-small
    tags: []
    expansions:
      executable_os_id: "linux-arm64"
      node_js_version: "20.19.5"
      mongosh_server_test_version: "stable-enterprise"
      mongosh_test_e2e_force_fips: ""
    tasks:
      - name: e2e_tests_linux_arm64
  - name: e2e_tests_rhel93_arm64_small_openssl3
    display_name: "RHEL 9.3 arm64 openssl3 (E2E tests)"
    run_on: rhel93-arm64-small
    tags: []
    expansions:
      executable_os_id: "linux-arm64-openssl3"
      node_js_version: "20.19.5"
      mongosh_server_test_version: "stable-enterprise"
      mongosh_test_e2e_force_fips: ""
    tasks:
      - name: e2e_tests_linux_arm64_openssl3
  - name: e2e_tests_rhel8_power_small
    display_name: "RHEL 8 PPC (E2E tests)"
    run_on: rhel8-power-small
    tags: []
    expansions:
      executable_os_id: "linux-ppc64le"
      node_js_version: "20.19.5"
      mongosh_server_test_version: "stable-enterprise"
      mongosh_test_e2e_force_fips: ""
    tasks:
      - name: e2e_tests_linux_ppc64le
  - name: e2e_tests_rhel9_power_small
    display_name: "RHEL 9 PPC (E2E tests)"
    run_on: rhel9-power-small
    tags: []
    expansions:
      executable_os_id: "linux-ppc64le"
      node_js_version: "20.19.5"
      mongosh_server_test_version: "stable-enterprise"
      mongosh_test_e2e_force_fips: ""
    tasks:
      - name: e2e_tests_linux_ppc64le
  - name: e2e_tests_rhel9_power_small_m820-rc4
    display_name: "RHEL 9 PPC 820-rc4 (E2E tests)"
    run_on: rhel9-power-small
    tags: []
    expansions:
      executable_os_id: "linux-ppc64le"
      node_js_version: "20.19.5"
      mongosh_server_test_version: "8.2.0-rc4-enterprise"
      mongosh_test_e2e_force_fips: ""
    tasks:
      - name: e2e_tests_linux_ppc64le
  - name: e2e_tests_rhel7_zseries_large_m60x
    display_name: "RHEL 7 s390x 60x (E2E tests)"
    run_on: rhel7-zseries-large
    tags: []
    expansions:
      executable_os_id: "linux-s390x"
      node_js_version: "20.19.5"
      mongosh_server_test_version: "6.0.x-enterprise"
      mongosh_test_e2e_force_fips: ""
    tasks:
      - name: e2e_tests_linux_s390x
  - name: e2e_tests_rhel8_zseries_small
    display_name: "RHEL 8 s390x (E2E tests)"
    run_on: rhel8-zseries-small
    tags: []
    expansions:
      executable_os_id: "linux-s390x"
      node_js_version: "20.19.5"
      mongosh_server_test_version: "stable-enterprise"
      mongosh_test_e2e_force_fips: ""
    tasks:
      - name: e2e_tests_linux_s390x
  - name: e2e_tests_rhel9_zseries_small
    display_name: "RHEL 9 s390x (E2E tests)"
    run_on: rhel9-zseries-small
    tags: []
    expansions:
      executable_os_id: "linux-s390x"
      node_js_version: "20.19.5"
      mongosh_server_test_version: "stable-enterprise"
      mongosh_test_e2e_force_fips: ""
    tasks:
      - name: e2e_tests_linux_s390x
  - name: e2e_tests_rhel9_zseries_small_m820-rc4
    display_name: "RHEL 9 s390x 820-rc4 (E2E tests)"
    run_on: rhel9-zseries-small
    tags: []
    expansions:
      executable_os_id: "linux-s390x"
      node_js_version: "20.19.5"
      mongosh_server_test_version: "8.2.0-rc4-enterprise"
      mongosh_test_e2e_force_fips: ""
    tasks:
      - name: e2e_tests_linux_s390x
  - name: e2e_tests_macos_14
    display_name: "MacOS 14 x64 (E2E tests)"
    run_on: macos-14
    tags: []
    expansions:
      executable_os_id: "darwin-x64"
      node_js_version: "20.19.5"
      mongosh_server_test_version: "stable-enterprise"
      mongosh_test_e2e_force_fips: ""
    tasks:
      - name: e2e_tests_darwin
  - name: e2e_tests_macos_14_arm64
    display_name: "MacOS 14 arm64 (E2E tests)"
    run_on: macos-14-arm64
    tags: []
    expansions:
      executable_os_id: "darwin-arm64"
      node_js_version: "20.19.5"
      mongosh_server_test_version: "stable-enterprise"
      mongosh_test_e2e_force_fips: ""
    tasks:
      - name: e2e_tests_darwin_arm64
  - name: e2e_tests_macos_14_arm64_m820-rc4
    display_name: "MacOS 14 arm64 820-rc4 (E2E tests)"
    run_on: macos-14-arm64
    tags: []
    expansions:
      executable_os_id: "darwin-arm64"
      node_js_version: "20.19.5"
      mongosh_server_test_version: "8.2.0-rc4-enterprise"
      mongosh_test_e2e_force_fips: ""
    tasks:
      - name: e2e_tests_darwin_arm64
  - name: e2e_tests_darwin_m805
    display_name: "MacOS Big Sur 805 (E2E tests)"
    run_on: macos-11
    tags: []
    expansions:
      executable_os_id: "darwin-x64"
      node_js_version: "20.19.5"
      mongosh_server_test_version: "8.0.5-enterprise"
      mongosh_test_e2e_force_fips: ""
    tasks:
      - name: e2e_tests_darwin
  - name: e2e_tests_darwin_arm64_m805
    display_name: "MacOS Big Sur arm64 805 (E2E tests)"
    run_on: macos-11-arm64
    tags: []
    expansions:
      executable_os_id: "darwin-arm64"
      node_js_version: "20.19.5"
      mongosh_server_test_version: "8.0.5-enterprise"
      mongosh_test_e2e_force_fips: ""
    tasks:
      - name: e2e_tests_darwin_arm64
      - name: package_artifact_darwin_x64
      - name: sign_artifact_darwin_x64
      - name: package_artifact_darwin_arm64
      - name: sign_artifact_darwin_arm64
  - name: e2e_tests_windows_vsCurrent_small
    display_name: "Windows VS 2022 (E2E tests)"
    run_on: windows-vsCurrent-small
    tags: []
    expansions:
      executable_os_id: "win32"
      node_js_version: "20.19.5"
      mongosh_server_test_version: "stable-enterprise"
      mongosh_test_e2e_force_fips: ""
    tasks:
      - name: e2e_tests_win32
      - name: package_artifact_win32_x64
      - name: package_artifact_win32msi_x64
  - name: e2e_tests_windows_vsCurrent_small_m820-rc4
    display_name: "Windows VS 2022 820-rc4 (E2E tests)"
    run_on: windows-vsCurrent-small
    tags: []
    expansions:
      executable_os_id: "win32"
      node_js_version: "20.19.5"
      mongosh_server_test_version: "8.2.0-rc4-enterprise"
      mongosh_test_e2e_force_fips: ""
    tasks:
      - name: e2e_tests_win32
      - name: package_artifact_win32_x64
      - name: package_artifact_win32msi_x64

  - name: linux_compile
    display_name: "Ubuntu 20.04 x64 (Compile and Check)"
    run_on: ubuntu2004-small
    tags: ["nightly-driver"]
    tasks:
      - name: compile_ts
      - name: check
  - name: linux_other
    display_name: "Ubuntu 20.04 x64 (Other Tests)"
    run_on: ubuntu2004-small
    tags: ["nightly-driver"]
    expansions:
      node_js_version: "20.19.5"
    tasks:
      - name: test_vscode
      - name: test_connectivity
      - name: test_apistrict
  - name: linux_coverage
    display_name: "Ubuntu 20.04 x64 (Coverage and Static Analysis Check)"
    run_on: ubuntu2004-small
    tasks:
      - name: check_coverage
      - name: create_static_analysis_report
  - name: linux_package
    display_name: "Ubuntu 20.04 x64 (Packaging)"
    run_on: ubuntu2004-small
    tags: ["nightly-driver"]
    tasks:
      - name: add_crypt_shared_and_sbom_darwin_x64
      - name: add_crypt_shared_and_sbom_darwin_arm64
      - name: add_crypt_shared_and_sbom_linux_x64
      - name: package_artifact_linux_x64
      - name: sign_artifact_linux_x64
      - name: add_crypt_shared_and_sbom_deb_x64
      - name: package_artifact_deb_x64
      - name: sign_artifact_deb_x64
      - name: verify_artifact_deb_x64
      - name: add_crypt_shared_and_sbom_rpm_x64
      - name: package_artifact_rpm_x64
      - name: sign_artifact_rpm_x64
      - name: add_crypt_shared_and_sbom_linux_x64_openssl11
      - name: package_artifact_linux_x64_openssl11
      - name: sign_artifact_linux_x64_openssl11
      - name: add_crypt_shared_and_sbom_deb_x64_openssl11
      - name: package_artifact_deb_x64_openssl11
      - name: sign_artifact_deb_x64_openssl11
      - name: verify_artifact_deb_x64_openssl11
      - name: add_crypt_shared_and_sbom_rpm_x64_openssl11
      - name: package_artifact_rpm_x64_openssl11
      - name: sign_artifact_rpm_x64_openssl11
      - name: add_crypt_shared_and_sbom_linux_x64_openssl3
      - name: package_artifact_linux_x64_openssl3
      - name: sign_artifact_linux_x64_openssl3
      - name: add_crypt_shared_and_sbom_deb_x64_openssl3
      - name: package_artifact_deb_x64_openssl3
      - name: sign_artifact_deb_x64_openssl3
      - name: verify_artifact_deb_x64_openssl3
      - name: add_crypt_shared_and_sbom_rpm_x64_openssl3
      - name: package_artifact_rpm_x64_openssl3
      - name: sign_artifact_rpm_x64_openssl3
      - name: add_crypt_shared_and_sbom_linux_arm64
      - name: package_artifact_linux_arm64
      - name: sign_artifact_linux_arm64
      - name: add_crypt_shared_and_sbom_deb_arm64
      - name: package_artifact_deb_arm64
      - name: sign_artifact_deb_arm64
      - name: verify_artifact_deb_arm64
      - name: add_crypt_shared_and_sbom_rpm_arm64
      - name: package_artifact_rpm_arm64
      - name: sign_artifact_rpm_arm64
      - name: add_crypt_shared_and_sbom_linux_arm64_openssl11
      - name: package_artifact_linux_arm64_openssl11
      - name: sign_artifact_linux_arm64_openssl11
      - name: add_crypt_shared_and_sbom_deb_arm64_openssl11
      - name: package_artifact_deb_arm64_openssl11
      - name: sign_artifact_deb_arm64_openssl11
      - name: verify_artifact_deb_arm64_openssl11
      - name: add_crypt_shared_and_sbom_rpm_arm64_openssl11
      - name: package_artifact_rpm_arm64_openssl11
      - name: sign_artifact_rpm_arm64_openssl11
      - name: add_crypt_shared_and_sbom_linux_arm64_openssl3
      - name: package_artifact_linux_arm64_openssl3
      - name: sign_artifact_linux_arm64_openssl3
      - name: add_crypt_shared_and_sbom_deb_arm64_openssl3
      - name: package_artifact_deb_arm64_openssl3
      - name: sign_artifact_deb_arm64_openssl3
      - name: verify_artifact_deb_arm64_openssl3
      - name: add_crypt_shared_and_sbom_rpm_arm64_openssl3
      - name: package_artifact_rpm_arm64_openssl3
      - name: sign_artifact_rpm_arm64_openssl3
      - name: add_crypt_shared_and_sbom_linux_ppc64le
      - name: package_artifact_linux_ppc64le
      - name: sign_artifact_linux_ppc64le
      - name: add_crypt_shared_and_sbom_rpm_ppc64le
      - name: package_artifact_rpm_ppc64le
      - name: sign_artifact_rpm_ppc64le
      - name: add_crypt_shared_and_sbom_linux_s390x
      - name: package_artifact_linux_s390x
      - name: sign_artifact_linux_s390x
      - name: add_crypt_shared_and_sbom_rpm_s390x
      - name: package_artifact_rpm_s390x
      - name: sign_artifact_rpm_s390x
      - name: add_crypt_shared_and_sbom_win32_x64
      - name: add_crypt_shared_and_sbom_win32msi_x64
      - name: sign_artifact_win32_x64
      - name: sign_artifact_win32msi_x64
  - name: verify_rhel_artifact
    display_name: "RHEL (Signature Verification)"
    run_on: rhel80-small
    tasks:
      - name: verify_artifact_rpm_x64
      - name: verify_artifact_rpm_x64_openssl11
      - name: verify_artifact_rpm_x64_openssl3
      - name: verify_artifact_rpm_arm64
      - name: verify_artifact_rpm_arm64_openssl11
      - name: verify_artifact_rpm_arm64_openssl3
      - name: verify_artifact_rpm_ppc64le
      - name: verify_artifact_rpm_s390x
  - name: verify_windows_artifact
    display_name: "Windows (Signature Verification)"
    run_on: windows-vsCurrent-small
    tasks:
      - name: verify_artifact_win32_x64
      - name: verify_artifact_win32msi_x64
  - name: verify_mac_artifact
    display_name: "MacOS (Signature Verification)"
    run_on: macos-14-arm64
    tasks:
      - name: verify_artifact_darwin_arm64
      - name: verify_artifact_darwin_x64

  - name: pkg_smoke_tests_docker_x64
    display_name: "package smoke (x64 Docker)"
    run_on: ubuntu2004-small
    tags: ["nightly-driver"]
    tasks:
      - name: pkg_test_docker_linux_x64_ubuntu20_04_tgz
      - name: pkg_test_docker_deb_x64_ubuntu18_04_deb
      - name: pkg_test_docker_deb_x64_ubuntu20_04_deb
      - name: pkg_test_docker_deb_x64_ubuntu22_04_deb
      - name: pkg_test_docker_deb_x64_ubuntu22_04_nohome_deb
      - name: pkg_test_docker_deb_x64_ubuntu22_04_qemu_deb
      - name: pkg_test_docker_deb_x64_ubuntu24_04_deb
      - name: pkg_test_docker_deb_x64_debian10_deb
      - name: pkg_test_docker_deb_x64_debian11_deb
      - name: pkg_test_docker_deb_x64_debian12_deb
      - name: pkg_test_docker_rpm_x64_centos7_rpm
      - name: pkg_test_docker_rpm_x64_amazonlinux2_rpm
      - name: pkg_test_docker_rpm_x64_amazonlinux2023_rpm
      - name: pkg_test_docker_rpm_x64_rocky8_rpm
      - name: pkg_test_docker_rpm_x64_rocky9_rpm
      - name: pkg_test_docker_rpm_x64_fedora34_rpm
      - name: pkg_test_docker_rpm_x64_suse12_rpm
      - name: pkg_test_docker_rpm_x64_suse15_rpm
      - name: pkg_test_docker_rpm_x64_oraclelinux9_rpm
      - name: pkg_test_docker_deb_x64_openssl11_ubuntu20_04_deb
      - name: pkg_test_docker_deb_x64_openssl11_debian10_deb
      - name: pkg_test_docker_deb_x64_openssl11_debian11_deb
      - name: pkg_test_docker_rpm_x64_openssl11_centos7_epel_rpm
      - name: pkg_test_docker_rpm_x64_openssl11_amazonlinux2_rpm
      - name: pkg_test_docker_rpm_x64_openssl11_rocky8_rpm
      - name: pkg_test_docker_rpm_x64_openssl11_rocky9_rpm
      - name: pkg_test_docker_rpm_x64_openssl11_fedora34_rpm
      - name: pkg_test_docker_deb_x64_openssl3_ubuntu22_04_deb
      - name: pkg_test_docker_deb_x64_openssl3_ubuntu22_04_fips_deb
      - name: pkg_test_docker_deb_x64_openssl3_debian12_deb
      - name: pkg_test_docker_rpm_x64_openssl3_rocky8_epel_rpm
      - name: pkg_test_docker_rpm_x64_openssl3_rocky9_rpm
      - name: pkg_test_docker_rpm_x64_openssl3_rocky9_fips_rpm
      - name: pkg_test_docker_rpm_x64_openssl3_amazonlinux2023_rpm
  - name: pkg_smoke_tests_docker_arm64
    display_name: "package smoke (arm64 Docker)"
    run_on: ubuntu2004-arm64-small
    tags: ["nightly-driver"]
    tasks:
      - name: pkg_test_docker_linux_arm64_ubuntu20_04_tgz
      - name: pkg_test_docker_deb_arm64_ubuntu18_04_deb
      - name: pkg_test_docker_deb_arm64_ubuntu20_04_deb
      - name: pkg_test_docker_deb_arm64_ubuntu22_04_deb
      - name: pkg_test_docker_deb_arm64_ubuntu22_04_nohome_deb
      - name: pkg_test_docker_deb_arm64_ubuntu22_04_qemu_deb
      - name: pkg_test_docker_deb_arm64_ubuntu24_04_deb
      - name: pkg_test_docker_deb_arm64_debian10_deb
      - name: pkg_test_docker_deb_arm64_debian11_deb
      - name: pkg_test_docker_deb_arm64_debian12_deb
      - name: pkg_test_docker_rpm_arm64_rocky8_rpm
      - name: pkg_test_docker_rpm_arm64_rocky9_rpm
      - name: pkg_test_docker_rpm_arm64_fedora34_rpm
      - name: pkg_test_docker_rpm_arm64_amazonlinux2_rpm
      - name: pkg_test_docker_rpm_arm64_amazonlinux2023_rpm
      - name: pkg_test_docker_deb_arm64_openssl11_ubuntu20_04_deb
      - name: pkg_test_docker_deb_arm64_openssl11_debian10_deb
      - name: pkg_test_docker_deb_arm64_openssl11_debian11_deb
      - name: pkg_test_docker_rpm_arm64_openssl11_rocky8_rpm
      - name: pkg_test_docker_rpm_arm64_openssl11_rocky9_rpm
      - name: pkg_test_docker_rpm_arm64_openssl11_fedora34_rpm
      - name: pkg_test_docker_rpm_arm64_openssl11_amazonlinux2_rpm
      - name: pkg_test_docker_deb_arm64_openssl3_ubuntu22_04_deb
      - name: pkg_test_docker_deb_arm64_openssl3_ubuntu22_04_fips_deb
      - name: pkg_test_docker_deb_arm64_openssl3_debian12_deb
      - name: pkg_test_docker_rpm_arm64_openssl3_rocky8_epel_rpm
      - name: pkg_test_docker_rpm_arm64_openssl3_rocky9_rpm
      - name: pkg_test_docker_rpm_arm64_openssl3_rocky9_fips_rpm
      - name: pkg_test_docker_rpm_arm64_openssl3_amazonlinux2023_rpm
  - name: exec_connectitivty_tests_docker_x64_openssl11
    display_name: "executable connectivity tests (x64 Docker for OpenSSL 1.1 base OS)"
    run_on: ubuntu2004-small
    tags: ["nightly-driver"]
    tasks:
      - name: executable_connectivity_test_linux_x64_rocky8
      - name: executable_connectivity_test_linux_x64_ubuntu2004
      - name: executable_connectivity_test_linux_x64_node20
      - name: executable_connectivity_test_linux_x64_rocky9
      - name: executable_connectivity_test_linux_x64_ubuntu2204
      - name: executable_connectivity_test_linux_x64_openssl11_rocky8
      - name: executable_connectivity_test_linux_x64_openssl11_ubuntu2004
  - name: exec_connectitivty_tests_docker_arm64_openssl11
    display_name: "executable connectivity tests (arm64 Docker for OpenSSL 1.1 base OS)"
    run_on: ubuntu2004-arm64-small
    tasks:
      - name: executable_connectivity_test_linux_arm64_rocky8
      - name: executable_connectivity_test_linux_arm64_ubuntu2004
      - name: executable_connectivity_test_linux_arm64_node20
      - name: executable_connectivity_test_linux_arm64_rocky9
      - name: executable_connectivity_test_linux_arm64_ubuntu2204
      - name: executable_connectivity_test_linux_arm64_openssl11_rocky8
      - name: executable_connectivity_test_linux_arm64_openssl11_ubuntu2004
  - name: exec_connectitivty_tests_docker_x64_openssl3
    display_name: "executable connectivity tests (x64 Docker for OpenSSL 3 base OS)"
    run_on: ubuntu2204-small
    tags: ["nightly-driver"]
    tasks:
      - name: executable_connectivity_test_linux_x64_rocky8
      - name: executable_connectivity_test_linux_x64_ubuntu2004
      - name: executable_connectivity_test_linux_x64_node20
      - name: executable_connectivity_test_linux_x64_rocky9
      - name: executable_connectivity_test_linux_x64_ubuntu2204
      - name: executable_connectivity_test_linux_x64_openssl3_node20
      - name: executable_connectivity_test_linux_x64_openssl3_rocky9
      - name: executable_connectivity_test_linux_x64_openssl3_ubuntu2204
  - name: exec_connectitivty_tests_docker_arm64_openssl3
    display_name: "executable connectivity tests (arm64 Docker for OpenSSL 3 base OS)"
    run_on: ubuntu2204-arm64-small
    tasks:
      - name: executable_connectivity_test_linux_arm64_rocky8
      - name: executable_connectivity_test_linux_arm64_ubuntu2004
      - name: executable_connectivity_test_linux_arm64_node20
      - name: executable_connectivity_test_linux_arm64_rocky9
      - name: executable_connectivity_test_linux_arm64_ubuntu2204
      - name: executable_connectivity_test_linux_arm64_openssl3_node20
      - name: executable_connectivity_test_linux_arm64_openssl3_rocky9
      - name: executable_connectivity_test_linux_arm64_openssl3_ubuntu2204
  - name: pkg_smoke_tests_win32
    display_name: "package smoke tests (win32)"
    run_on: ubuntu2004-small
    tasks:
      - name: pkg_test_ssh_win32_x64
      - name: pkg_test_ssh_win32msi_x64
  - name: pkg_smoke_tests_macos_1100_x64
    display_name: "package smoke tests (macos 11.00 x64)"
    run_on: macos-11
    tasks:
      - name: pkg_test_macos_darwin_x64
  - name: pkg_smoke_tests_macos_1100_arm64
    display_name: "package smoke tests (macos 11.00 arm64)"
    run_on: macos-11-arm64
    tasks:
      - name: pkg_test_macos_darwin_arm64
  - name: pkg_smoke_tests_macos_1300_arm64
    display_name: "package smoke tests (macos 13.00 arm64)"
    run_on: macos-13-arm64
    tasks:
      - name: pkg_test_macos_darwin_arm64
  - name: pkg_smoke_tests_macos_1400_x64
    display_name: "package smoke tests (macos 14.00 x64)"
    run_on: macos-14
    tasks:
      - name: pkg_test_macos_darwin_x64
  - name: pkg_smoke_tests_macos_1400_arm64
    display_name: "package smoke tests (macos 14.00 arm64)"
    run_on: macos-14-arm64
    tasks:
      - name: pkg_test_macos_darwin_arm64
  - name: pkg_smoke_tests_rhel7_s390x
    display_name: "package smoke tests (RHEL 7 s390x)"
    run_on: rhel7-zseries-small
    expansions:
      no_automatic_encryption_support: 1
    tasks:
      - name: pkg_test_rpmextract_rpm_s390x
  - name: pkg_smoke_tests_rhel8_s390x
    display_name: "package smoke tests (RHEL 8 s390x)"
    run_on: rhel8-zseries-small
    tasks:
      - name: pkg_test_rpmextract_rpm_s390x
  - name: pkg_smoke_tests_rhel9_s390x
    display_name: "package smoke tests (RHEL 9 s390x)"
    run_on: rhel9-zseries-small
    tasks:
      - name: pkg_test_rpmextract_rpm_s390x
  - name: pkg_smoke_tests_rhel8_ppc64le
    display_name: "package smoke tests (RHEL 8 ppc64le)"
    run_on: rhel8-power-small
    tasks:
      - name: pkg_test_rpmextract_rpm_ppc64le
  - name: pkg_smoke_tests_rhel9_ppc64le
    display_name: "package smoke tests (RHEL 9 ppc64le)"
    run_on: rhel9-power-small
    tasks:
      - name: pkg_test_rpmextract_rpm_ppc64le
  - name: draft_publish_release
    display_name: "Draft/Publish Release"
    run_on: ubuntu2004-small
    tasks:
      - name: release_draft
      - name: release_publish_dry_run
      - name: release_publish

  - name: generate_license_and_vulnerability_report
    display_name: "License and Vulnerability Report"
    run_on: ubuntu2004-small
    tasks:
      - name: generate_license_and_vulnerability_report

  - name: perf_tests_linux_x64
    display_name: "Performance Tests (x64 Linux)"
    run_on: rhel90-dbx-perf-large
    tasks:
      - name: perf_tests_linux_x64
